console.log("ï£¿ iRingo: ðŸ“ GeoServices Response"),console.log("Version: 4.0.9"),console.log("2024/10/12 16:57:01");const e=function(){if("undefined"!=typeof $environment&&$environment["surge-version"])return"Surge";if("undefined"!=typeof $environment&&$environment["stash-version"])return"Stash";if("undefined"!=typeof module&&module.exports)return"Node.js";if("undefined"!=typeof $task)return"Quantumult X";if("undefined"!=typeof $loon)return"Loon";if("undefined"!=typeof $rocket)return"Shadowrocket";if("undefined"!=typeof Egern)return"Egern"}();class t{static name="Lodash";static version="1.2.2";static about(){return console.log(`\nðŸŸ§ ${this.name} v${this.version}\n`)}static get(e={},t="",n=void 0){Array.isArray(t)||(t=this.toPath(t));const a=t.reduce(((e,t)=>Object(e)[t]),e);return void 0===a?n:a}static set(e={},t="",n){return Array.isArray(t)||(t=this.toPath(t)),t.slice(0,-1).reduce(((e,n,a)=>Object(e[n])===e[n]?e[n]:e[n]=/^\d+$/.test(t[a+1])?[]:{}),e)[t[t.length-1]]=n,e}static unset(e={},t=""){return Array.isArray(t)||(t=this.toPath(t)),t.reduce(((e,n,a)=>a===t.length-1?(delete e[n],!0):Object(e)[n]),e)}static toPath(e){return e.replace(/\[(\d+)\]/g,".$1").split(".").filter(Boolean)}static escape(e){const t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};return e.replace(/[&<>"']/g,(e=>t[e]))}static unescape(e){const t={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"};return e.replace(/&amp;|&lt;|&gt;|&quot;|&#39;/g,(e=>t[e]))}}class n{static name="Storage";static version="1.1.0";static about(){return s("",`ðŸŸ§ ${this.name} v${this.version}`,"")}static data=null;static dataFile="box.dat";static#e=/^@(?<key>[^.]+)(?:\.(?<path>.*))?$/;static getItem(n=new String,a=null){let s=a;if(!0===n.startsWith("@")){const{key:e,path:a}=n.match(this.#e)?.groups;n=e;let i=this.getItem(n,{});"object"!=typeof i&&(i={}),s=t.get(i,a);try{s=JSON.parse(s)}catch(e){}}else{switch(e){case"Surge":case"Loon":case"Stash":case"Egern":case"Shadowrocket":s=$persistentStore.read(n);break;case"Quantumult X":s=$prefs.valueForKey(n);break;case"Node.js":this.data=this.#t(this.dataFile),s=this.data?.[n];break;default:s=this.data?.[n]||null}try{s=JSON.parse(s)}catch(e){}}return s??a}static setItem(n=new String,a=new String){let s=!1;if("object"==typeof a)a=JSON.stringify(a);else a=String(a);if(!0===n.startsWith("@")){const{key:e,path:i}=n.match(this.#e)?.groups;n=e;let r=this.getItem(n,{});"object"!=typeof r&&(r={}),t.set(r,i,a),s=this.setItem(n,r)}else switch(e){case"Surge":case"Loon":case"Stash":case"Egern":case"Shadowrocket":s=$persistentStore.write(a,n);break;case"Quantumult X":s=$prefs.setValueForKey(a,n);break;case"Node.js":this.data=this.#t(this.dataFile),this.data[n]=a,this.#n(this.dataFile),s=!0;break;default:s=this.data?.[n]||null}return s}static removeItem(n){let a=!1;if(!0===n.startsWith("@")){const{key:e,path:s}=n.match(this.#e)?.groups;n=e;let i=this.getItem(n);"object"!=typeof i&&(i={}),keyValue=t.unset(i,s),a=this.setItem(n,i)}else switch(e){case"Surge":case"Loon":case"Stash":case"Egern":case"Shadowrocket":case"Node.js":default:a=!1;break;case"Quantumult X":a=$prefs.removeValueForKey(n)}return a}static clear(){let t=!1;switch(e){case"Surge":case"Loon":case"Stash":case"Egern":case"Shadowrocket":case"Node.js":default:t=!1;break;case"Quantumult X":t=$prefs.removeAllValues()}return t}static#t(e){if(!this.isNode())return{};{this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const t=this.path.resolve(e),n=this.path.resolve(process.cwd(),e),a=this.fs.existsSync(t),s=!a&&this.fs.existsSync(n);if(!a&&!s)return{};{const e=a?t:n;try{return JSON.parse(this.fs.readFileSync(e))}catch(e){return{}}}}}static#n(e=this.dataFile){if(this.isNode()){this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const t=this.path.resolve(e),n=this.path.resolve(process.cwd(),e),a=this.fs.existsSync(t),s=!a&&this.fs.existsSync(n),i=JSON.stringify(this.data);a?this.fs.writeFileSync(t,i):s?this.fs.writeFileSync(n,i):this.fs.writeFileSync(t,i)}}}async function a(n={}||"",a={}){switch(n.constructor){case Object:n={...a,...n};break;case String:n={...a,url:n}}n.method||(n.method="GET",(n.body??n.bodyBytes)&&(n.method="POST")),delete n.headers?.Host,delete n.headers?.[":authority"],delete n.headers?.["Content-Length"],delete n.headers?.["content-length"];const s=n.method.toLocaleLowerCase();switch(e){case"Loon":case"Surge":case"Stash":case"Egern":case"Shadowrocket":default:if(n.timeout)switch(n.timeout=parseInt(n.timeout,10),e){case"Loon":case"Shadowrocket":case"Stash":case"Egern":default:n.timeout=n.timeout/1e3;case"Surge":}if(n.policy)switch(e){case"Loon":n.node=n.policy;break;case"Stash":t.set(n,"headers.X-Stash-Selected-Proxy",encodeURI(n.policy));break;case"Shadowrocket":t.set(n,"headers.X-Surge-Proxy",n.policy)}return"boolean"==typeof n.redirection&&(n["auto-redirect"]=n.redirection),n.bodyBytes&&!n.body&&(n.body=n.bodyBytes,delete n.bodyBytes),await new Promise(((e,t)=>{$httpClient[s](n,((a,s,i)=>{a?t(a):(s.ok=/^2\d\d$/.test(s.status),s.statusCode=s.status,i&&(s.body=i,1==n["binary-mode"]&&(s.bodyBytes=i)),e(s))}))}));case"Quantumult X":return n.policy&&t.set(n,"opts.policy",n.policy),"boolean"==typeof n["auto-redirect"]&&t.set(n,"opts.redirection",n["auto-redirect"]),n.body instanceof ArrayBuffer?(n.bodyBytes=n.body,delete n.body):ArrayBuffer.isView(n.body)?(n.bodyBytes=n.body.buffer.slice(n.body.byteOffset,n.body.byteLength+n.body.byteOffset),delete object.body):n.body&&delete n.bodyBytes,await $task.fetch(n).then((e=>(e.ok=/^2\d\d$/.test(e.statusCode),e.status=e.statusCode,e)),(e=>Promise.reject(e.error)));case"Node.js":let a=require("iconv-lite");!function(e){this.got=this.got?this.got:require("got"),this.cktough=this.cktough?this.cktough:require("tough-cookie"),this.ckjar=this.ckjar?this.ckjar:new this.cktough.CookieJar,e&&(e.headers=e.headers?e.headers:{},void 0===e.headers.Cookie&&void 0===e.cookieJar&&(e.cookieJar=this.ckjar))}(n);const{url:i,...r}=n;return await this.got[s](i,r).on("redirect",((e,t)=>{try{if(e.headers["set-cookie"]){const n=e.headers["set-cookie"].map(this.cktough.Cookie.parse).toString();n&&this.ckjar.setCookieSync(n,null),t.cookieJar=this.ckjar}}catch(e){this.logErr(e)}})).then((e=>(e.statusCode=e.status,e.body=a.decode(e.rawBody,"utf-8"),e.bodyBytes=e.rawBody,e)),(e=>Promise.reject(e.message)))}}const s=(...e)=>console.log(e.join("\n"));class i{static name="XML";static version="0.4.2";static about=()=>console.log(`\nðŸŸ§ ${this.name} v${this.version}\n`);static#a="@";static#s="#";static#i={"&amp;":"&","&lt;":"<","&gt;":">","&apos;":"'","&quot;":'"'};static#r={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&apos;",'"':"&quot;"};static parse(e=new String,t=""){const n=this.#i,a=this.#a,s=this.#s;let i=function e(t,n){let i;switch(typeof t){case"string":case"undefined":i=t;break;case"object":const l=t.raw,u=t.name,d=t.tag,m=t.children;i=l||(d?function(e,t){if(!e)return;const n=e.split(/([^\s='"]+(?:\s*=\s*(?:'[\S\s]*?'|"[\S\s]*?"|[^\s'"]*))?)/),s=n.length;let i,r;for(let e=0;e<s;e++){let s=l(n[e]);if(!s)continue;i||(i={});const u=s.indexOf("=");if(u<0)s=a+s,r=null;else{r=s.substr(u+1).replace(/^\s+/,""),s=a+s.substr(0,u).replace(/\s+$/,"");const e=r[0];e!==r[r.length-1]||"'"!==e&&'"'!==e||(r=r.substr(1,r.length-2)),r=o(r)}t&&(r=t(s,r)),c(i,s,r)}return i;function l(e){return e?.trim?.()}}(d,n):m?{}:{[u]:void 0}),"plist"===u?i=Object.assign(i,r(m[0],n)):m?.forEach?.(((t,a)=>{"string"==typeof t?c(i,s,e(t,n),void 0):t.tag||t.children||t.raw?c(i,t.name,e(t,n),void 0):c(i,t.name,e(t,n),m?.[a-1]?.name)})),m&&0===m.length&&c(i,s,null,void 0),n&&(i=n(u||"",i))}return i;function c(e,t,n,a=t){if(void 0!==n){const s=e[a];Array.isArray(s)?s.push(n):s?e[a]=[s,n]:e[t]=n}}}(function(e){const t=e.replace(/^[ \t]+/gm,"").split(/<([^!<>?](?:'[\S\s]*?'|"[\S\s]*?"|[^'"<>])*|!(?:--[\S\s]*?--|\[[^\[\]'"<>]+\[[\S\s]*?]]|DOCTYPE[^\[<>]*?\[[\S\s]*?]|(?:ENTITY[^"<>]*?"[\S\s]*?")?[\S\s]*?)|\?[\S\s]*?\?)>/),n=t.length,a={children:[]};let s=a;const i=[];for(let e=0;e<n;){const n=t[e++];n&&c(n);const a=t[e++];a&&r(a)}return a;function r(e){const t=e.split(" "),n=t.shift(),a=t.length;let r={};switch(n[0]){case"/":const o=e.replace(/^\/|[\s\/].*$/g,"").toLowerCase();for(;i.length;){const e=s?.name?.toLowerCase?.();if(s=i.pop(),e===o)break}break;case"?":r.name=n,r.raw=t.join(" "),l(r);break;case"!":/!\[CDATA\[(.+)\]\]/.test(e)?(r.name="!CDATA",r.raw=e.match(/!\[CDATA\[(?<raw>.+)\]\]/)?.groups?.raw):/!--(.+)--/.test(e)?(r.name="!--",r.raw=e.match(/!--(?<raw>.+)--/)?.groups?.raw):(r.name=n,r.raw=t.join(" ")),l(r);break;default:if(r=function(e){const t={children:[]};e=e.replace(/\s*\/?$/,"");const n=e.search(/[\s='"\/]/);n<0?t.name=e:(t.name=e.substr(0,n),t.tag=e.substr(n));return t}(e),l(r),"/"===(t?.[a-1]??n).slice(-1))delete r.children;else if("link"===n)delete r.children;else i.push(s),s=r}}function c(e){(e=function(e){return e?.replace?.(/^(\r\n|\r|\n|\t)+|(\r\n|\r|\n|\t)+$/g,"")}(e))&&l(o(e))}function l(e){s.children.push(e)}}(e),t);return i;function r(e,t){let n;switch(typeof e){case"string":case"undefined":n=e;break;case"object":const a=e.name,s=e.children;switch(n={},a){case"plist":let e=r(s[0],t);n=Object.assign(n,e);break;case"dict":let i=s.map((e=>r(e,t)));i=function(e,t){var n=0,a=[];for(;n<e.length;)a.push(e.slice(n,n+=t));return a}(i,2),n=Object.fromEntries(i);break;case"array":Array.isArray(n)||(n=[]),n=s.map((e=>r(e,t)));break;case"key":n=s[0];break;case"true":case"false":const o=a;n=JSON.parse(o);break;case"integer":const c=s[0];n=BigInt(c);break;case"real":const l=s[0];n=parseFloat(l);break;case"string":n=s[0]}t&&(n=t(a||"",n))}return n}function o(e){return e.replace(/(&(?:lt|gt|amp|apos|quot|#(?:\d{1,6}|x[0-9a-fA-F]{1,5}));)/g,(function(e){if("#"===e[1]){const t="x"===e[2]?parseInt(e.substr(3),16):parseInt(e.substr(2),10);if(t>-1)return String.fromCharCode(t)}return n[e]||e}))}}static stringify(e=new Object,t=""){this.#r;const n=this.#a,a=this.#s;let s="";for(let t in e)s+=i(e[t],t,"");return s=t?s.replace(/\t/g,t):s.replace(/\t|\n/g,""),s;function i(e,t,s){let o="";switch(typeof e){case"object":if(Array.isArray(e))o=e.reduce(((e,n)=>e+`${s}${i(n,t,`${s}\t`)}\n`),"");else{let c="",l=!1;for(let a in e)a[0]===n?(c+=` ${a.substring(1)}="${e[a].toString()}"`,delete e[a]):void 0===e[a]?t=a:l=!0;if(o+=`${s}<${t}${c}${l||"link"===t?"":"/"}>`,l){if("plist"===t)o+=r(e,t,`${s}\t`);else for(let t in e)if(t===a)o+=e[t]??"";else o+=i(e[t],t,`${s}\t`);o+=("\n"===o.slice(-1)?s:"")+`</${t}>`}}break;case"string":switch(t){case"?xml":o+=`${s}<${t} ${e.toString()}>`;break;case"?":o+=`${s}<${t}${e.toString()}${t}>`;break;case"!--":o+=`${s}\x3c!--${e.toString()}--\x3e`;break;case"!DOCTYPE":o+=`${s}<${t} ${e.toString()}>`;break;case"!CDATA":o+=`${s}<![CDATA[${e.toString()}]]>`;break;case a:o+=e;break;default:o+=`${s}<${t}>${e.toString()}</${t}>`}break;case"undefined":o+=s+`<${t.toString()}/>`}return o}function r(e,t,n){let a="";switch(typeof e){case"boolean":a=`${n}<${e.toString()}/>`;break;case"number":a=`${n}<real>${e.toString()}</real>`;break;case"bigint":a=`${n}<integer>${e.toString()}</integer>`;break;case"string":a=`${n}<string>${e.toString()}</string>`;break;case"object":let o="";if(Array.isArray(e)){for(var s=0,i=e.length;s<i;s++)o+=`${n}${r(e[s],t,`${n}\t`)}`;a=`${n}<array>${o}${n}</array>`}else{let t="";Object.entries(e).forEach((([e,a])=>{t+=`${n}<key>${e}</key>`,t+=r(a,e,n)})),a=`${n}<dict>${t}${n}</dict>`}}return a}}}var r={Location:{Settings:{Switch:!0,PEP:{GCC:"US"}}},Maps:{Settings:{Switch:!0,UrlInfoSet:{Dispatcher:"AutoNavi",Directions:"AutoNavi",RAP:"Apple",LocationShift:"AUTO"},TileSet:{Map:"CN",Satellite:"HYBRID",Traffic:"CN",POI:"CN",Flyover:"XX",Munin:"XX"},GeoManifest:{Dynamic:{Config:{CountryCode:{default:"CN",iOS:"AUTO",iPadOS:"AUTO",watchOS:"US",macOS:"AUTO"}}}},Config:{Announcements:{"Environment:":{default:"AUTO",iOS:"AUTO",iPadOS:"AUTO",watchOS:"AUTO",macOS:"AUTO"}}}},Configs:{}}};function o(e,a,i){s("â˜‘ï¸ Set Environment Variables","");let{Settings:r,Caches:o,Configs:c}=function(e,a,s){let i=n.getItem(e,s),r={};switch(typeof $argument){case"string":let e=Object.fromEntries($argument.split("&").map((e=>e.split("=").map((e=>e.replace(/\"/g,""))))));for(let n in e)t.set(r,n,e[n]);break;case"object":for(let e in $argument)t.set(r,e,$argument[e])}const o={Settings:s?.Default?.Settings||{},Configs:s?.Default?.Configs||{},Caches:{}};Array.isArray(a)||(a=[a]);for(let e of a)o.Settings={...o.Settings,...s?.[e]?.Settings,...r,...i?.[e]?.Settings},o.Configs={...o.Configs,...s?.[e]?.Configs},i?.[e]?.Caches&&"string"==typeof i?.[e]?.Caches&&(i[e].Caches=JSON.parse(i?.[e]?.Caches)),o.Caches={...o.Caches,...i?.[e]?.Caches};return function e(t,n){for(var a in t){var s=t[a];t[a]="object"==typeof s&&null!==s?e(s,n):n(a,s)}return t}(o.Settings,((e,t)=>("true"===t||"false"===t?t=JSON.parse(t):"string"==typeof t&&(t=t.includes(",")?t.split(",").map((e=>c(e))):c(t)),t))),o;function c(e){return e&&!isNaN(e)&&(e=parseInt(e,10)),e}}(e,a,i);if(s(`âœ… Set Environment Variables, Settings: ${typeof r}, Settingså†…å®¹: ${JSON.stringify(r)}`,""),c.Locale&&(c.Locale=new Map(c.Locale)),c.i18n)for(let e in c.i18n)c.i18n[e]=new Map(c.i18n[e]);return{Settings:r,Caches:o,Configs:c}}function c(e){let t=typeof e;if("object"==t){if(Array.isArray(e))return"array";if(null===e)return"null"}return t}let l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),u=[];for(let e=0;e<l.length;e++)u[l[e].charCodeAt(0)]=e;var d,m;function p(){let e=0,t=0;for(let n=0;n<28;n+=7){let a=this.buf[this.pos++];if(e|=(127&a)<<n,!(128&a))return this.assertBounds(),[e,t]}let n=this.buf[this.pos++];if(e|=(15&n)<<28,t=(112&n)>>4,!(128&n))return this.assertBounds(),[e,t];for(let n=3;n<=31;n+=7){let a=this.buf[this.pos++];if(t|=(127&a)<<n,!(128&a))return this.assertBounds(),[e,t]}throw new Error("invalid varint")}function T(e,t,n){for(let a=0;a<28;a+=7){const s=e>>>a,i=!(s>>>7==0&&0==t),r=255&(i?128|s:s);if(n.push(r),!i)return}const a=e>>>28&15|(7&t)<<4,s=!!(t>>3);if(n.push(255&(s?128|a:a)),s){for(let e=3;e<31;e+=7){const a=t>>>e,s=!(a>>>7==0),i=255&(s?128|a:a);if(n.push(i),!s)return}n.push(t>>>31&1)}}u["-".charCodeAt(0)]=l.indexOf("+"),u["_".charCodeAt(0)]=l.indexOf("/"),function(e){e.symbol=Symbol.for("protobuf-ts/unknown"),e.onRead=(n,a,s,i,r)=>{(t(a)?a[e.symbol]:a[e.symbol]=[]).push({no:s,wireType:i,data:r})},e.onWrite=(t,n,a)=>{for(let{no:t,wireType:s,data:i}of e.list(n))a.tag(t,s).raw(i)},e.list=(n,a)=>{if(t(n)){let t=n[e.symbol];return a?t.filter((e=>e.no==a)):t}return[]},e.last=(t,n)=>e.list(t,n).slice(-1)[0];const t=t=>t&&Array.isArray(t[e.symbol])}(d||(d={})),function(e){e[e.Varint=0]="Varint",e[e.Bit64=1]="Bit64",e[e.LengthDelimited=2]="LengthDelimited",e[e.StartGroup=3]="StartGroup",e[e.EndGroup=4]="EndGroup",e[e.Bit32=5]="Bit32"}(m||(m={}));const f=4294967296;function h(e){let t="-"==e[0];t&&(e=e.slice(1));const n=1e6;let a=0,s=0;function i(t,i){const r=Number(e.slice(t,i));s*=n,a=a*n+r,a>=f&&(s+=a/f|0,a%=f)}return i(-24,-18),i(-18,-12),i(-12,-6),i(-6),[t,a,s]}function R(e,t){if(t>>>0<=2097151)return""+(f*t+(e>>>0));let n=(e>>>24|t<<8)>>>0&16777215,a=t>>16&65535,s=(16777215&e)+6777216*n+6710656*a,i=n+8147497*a,r=2*a,o=1e7;function c(e,t){let n=e?String(e):"";return t?"0000000".slice(n.length)+n:n}return s>=o&&(i+=Math.floor(s/o),s%=o),i>=o&&(r+=Math.floor(i/o),i%=o),c(r,0)+c(i,r)+c(s,1)}function E(e,t){if(e>=0){for(;e>127;)t.push(127&e|128),e>>>=7;t.push(e)}else{for(let n=0;n<9;n++)t.push(127&e|128),e>>=7;t.push(1)}}function g(){let e=this.buf[this.pos++],t=127&e;if(!(128&e))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(127&e)<<7,!(128&e))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(127&e)<<14,!(128&e))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(127&e)<<21,!(128&e))return this.assertBounds(),t;e=this.buf[this.pos++],t|=(15&e)<<28;for(let t=5;128&e&&t<10;t++)e=this.buf[this.pos++];if(128&e)throw new Error("invalid varint");return this.assertBounds(),t>>>0}let S;function b(e){if(!e)throw new Error("BigInt unavailable, see https://github.com/timostamm/protobuf-ts/blob/v1.0.8/MANUAL.md#bigint-support")}!function(){const e=new DataView(new ArrayBuffer(8)),t=void 0!==globalThis.BigInt&&"function"==typeof e.getBigInt64&&"function"==typeof e.getBigUint64&&"function"==typeof e.setBigInt64&&"function"==typeof e.setBigUint64;S=t?{MIN:BigInt("-9223372036854775808"),MAX:BigInt("9223372036854775807"),UMIN:BigInt("0"),UMAX:BigInt("18446744073709551615"),C:BigInt,V:e}:void 0}();const O=/^-?[0-9]+$/,k=4294967296,y=2147483648;class A{constructor(e,t){this.lo=0|e,this.hi=0|t}isZero(){return 0==this.lo&&0==this.hi}toNumber(){let e=this.hi*k+(this.lo>>>0);if(!Number.isSafeInteger(e))throw new Error("cannot convert to safe number");return e}}class I extends A{static from(e){if(S)switch(typeof e){case"string":if("0"==e)return this.ZERO;if(""==e)throw new Error("string is no integer");e=S.C(e);case"number":if(0===e)return this.ZERO;e=S.C(e);case"bigint":if(!e)return this.ZERO;if(e<S.UMIN)throw new Error("signed value for ulong");if(e>S.UMAX)throw new Error("ulong too large");return S.V.setBigUint64(0,e,!0),new I(S.V.getInt32(0,!0),S.V.getInt32(4,!0))}else switch(typeof e){case"string":if("0"==e)return this.ZERO;if(e=e.trim(),!O.test(e))throw new Error("string is no integer");let[t,n,a]=h(e);if(t)throw new Error("signed value for ulong");return new I(n,a);case"number":if(0==e)return this.ZERO;if(!Number.isSafeInteger(e))throw new Error("number is no integer");if(e<0)throw new Error("signed value for ulong");return new I(e,e/k)}throw new Error("unknown value "+typeof e)}toString(){return S?this.toBigInt().toString():R(this.lo,this.hi)}toBigInt(){return b(S),S.V.setInt32(0,this.lo,!0),S.V.setInt32(4,this.hi,!0),S.V.getBigUint64(0,!0)}}I.ZERO=new I(0,0);class _ extends A{static from(e){if(S)switch(typeof e){case"string":if("0"==e)return this.ZERO;if(""==e)throw new Error("string is no integer");e=S.C(e);case"number":if(0===e)return this.ZERO;e=S.C(e);case"bigint":if(!e)return this.ZERO;if(e<S.MIN)throw new Error("signed long too small");if(e>S.MAX)throw new Error("signed long too large");return S.V.setBigInt64(0,e,!0),new _(S.V.getInt32(0,!0),S.V.getInt32(4,!0))}else switch(typeof e){case"string":if("0"==e)return this.ZERO;if(e=e.trim(),!O.test(e))throw new Error("string is no integer");let[t,n,a]=h(e);if(t){if(a>y||a==y&&0!=n)throw new Error("signed long too small")}else if(a>=y)throw new Error("signed long too large");let s=new _(n,a);return t?s.negate():s;case"number":if(0==e)return this.ZERO;if(!Number.isSafeInteger(e))throw new Error("number is no integer");return e>0?new _(e,e/k):new _(-e,-e/k).negate()}throw new Error("unknown value "+typeof e)}isNegative(){return!!(this.hi&y)}negate(){let e=~this.hi,t=this.lo;return t?t=1+~t:e+=1,new _(t,e)}toString(){if(S)return this.toBigInt().toString();if(this.isNegative()){let e=this.negate();return"-"+R(e.lo,e.hi)}return R(this.lo,this.hi)}toBigInt(){return b(S),S.V.setInt32(0,this.lo,!0),S.V.setInt32(4,this.hi,!0),S.V.getBigInt64(0,!0)}}_.ZERO=new _(0,0);const N={readUnknownField:!0,readerFactory:e=>new L(e)};class L{constructor(e,t){this.varint64=p,this.uint32=g,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength),this.textDecoder=null!=t?t:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0})}tag(){let e=this.uint32(),t=e>>>3,n=7&e;if(t<=0||n<0||n>5)throw new Error("illegal tag: field no "+t+" wire type "+n);return[t,n]}skip(e){let t=this.pos;switch(e){case m.Varint:for(;128&this.buf[this.pos++];);break;case m.Bit64:this.pos+=4;case m.Bit32:this.pos+=4;break;case m.LengthDelimited:let t=this.uint32();this.pos+=t;break;case m.StartGroup:let n;for(;(n=this.tag()[1])!==m.EndGroup;)this.skip(n);break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(t,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return 0|this.uint32()}sint32(){let e=this.uint32();return e>>>1^-(1&e)}int64(){return new _(...this.varint64())}uint64(){return new I(...this.varint64())}sint64(){let[e,t]=this.varint64(),n=-(1&e);return e=(e>>>1|(1&t)<<31)^n,t=t>>>1^n,new _(e,t)}bool(){let[e,t]=this.varint64();return 0!==e||0!==t}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return new I(this.sfixed32(),this.sfixed32())}sfixed64(){return new _(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),t=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(t,t+e)}string(){return this.textDecoder.decode(this.bytes())}}function C(e,t){if(!e)throw new Error(t)}function U(e){if("number"!=typeof e)throw new Error("invalid int 32: "+typeof e);if(!Number.isInteger(e)||e>2147483647||e<-2147483648)throw new Error("invalid int 32: "+e)}function w(e){if("number"!=typeof e)throw new Error("invalid uint 32: "+typeof e);if(!Number.isInteger(e)||e>4294967295||e<0)throw new Error("invalid uint 32: "+e)}function v(e){if("number"!=typeof e)throw new Error("invalid float 32: "+typeof e);if(Number.isFinite(e)&&(e>34028234663852886e22||e<-34028234663852886e22))throw new Error("invalid float 32: "+e)}const D={writeUnknownFields:!0,writerFactory:()=>new V};class V{constructor(e){this.stack=[],this.textEncoder=null!=e?e:new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let e=0;for(let t=0;t<this.chunks.length;t++)e+=this.chunks[t].length;let t=new Uint8Array(e),n=0;for(let e=0;e<this.chunks.length;e++)t.set(this.chunks[e],n),n+=this.chunks[e].length;return this.chunks=[],t}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),t=this.stack.pop();if(!t)throw new Error("invalid state, fork stack empty");return this.chunks=t.chunks,this.buf=t.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,t){return this.uint32((e<<3|t)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(w(e);e>127;)this.buf.push(127&e|128),e>>>=7;return this.buf.push(e),this}int32(e){return U(e),E(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let t=this.textEncoder.encode(e);return this.uint32(t.byteLength),this.raw(t)}float(e){v(e);let t=new Uint8Array(4);return new DataView(t.buffer).setFloat32(0,e,!0),this.raw(t)}double(e){let t=new Uint8Array(8);return new DataView(t.buffer).setFloat64(0,e,!0),this.raw(t)}fixed32(e){w(e);let t=new Uint8Array(4);return new DataView(t.buffer).setUint32(0,e,!0),this.raw(t)}sfixed32(e){U(e);let t=new Uint8Array(4);return new DataView(t.buffer).setInt32(0,e,!0),this.raw(t)}sint32(e){return U(e),E(e=(e<<1^e>>31)>>>0,this.buf),this}sfixed64(e){let t=new Uint8Array(8),n=new DataView(t.buffer),a=_.from(e);return n.setInt32(0,a.lo,!0),n.setInt32(4,a.hi,!0),this.raw(t)}fixed64(e){let t=new Uint8Array(8),n=new DataView(t.buffer),a=I.from(e);return n.setInt32(0,a.lo,!0),n.setInt32(4,a.hi,!0),this.raw(t)}int64(e){let t=_.from(e);return T(t.lo,t.hi,this.buf),this}sint64(e){let t=_.from(e),n=t.hi>>31;return T(t.lo<<1^n,(t.hi<<1|t.lo>>>31)^n,this.buf),this}uint64(e){let t=I.from(e);return T(t.lo,t.hi,this.buf),this}}const x={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0},P={ignoreUnknownFields:!1};const X=Symbol.for("protobuf-ts/message-type");function B(e){let t=!1;const n=[];for(let a=0;a<e.length;a++){let s=e.charAt(a);"_"==s?t=!0:/\d/.test(s)?(n.push(s),t=!0):t?(n.push(s.toUpperCase()),t=!1):0==a?n.push(s.toLowerCase()):n.push(s)}return n.join("")}var F,M,Y;function $(e){var t,n,a,s;return e.localName=null!==(t=e.localName)&&void 0!==t?t:B(e.name),e.jsonName=null!==(n=e.jsonName)&&void 0!==n?n:B(e.name),e.repeat=null!==(a=e.repeat)&&void 0!==a?a:Y.NO,e.opt=null!==(s=e.opt)&&void 0!==s?s:!e.repeat&&(!e.oneof&&"message"==e.kind),e}function G(e){if("object"!=typeof e||null===e||!e.hasOwnProperty("oneofKind"))return!1;switch(typeof e.oneofKind){case"string":return void 0!==e[e.oneofKind]&&2==Object.keys(e).length;case"undefined":return 1==Object.keys(e).length;default:return!1}}!function(e){e[e.DOUBLE=1]="DOUBLE",e[e.FLOAT=2]="FLOAT",e[e.INT64=3]="INT64",e[e.UINT64=4]="UINT64",e[e.INT32=5]="INT32",e[e.FIXED64=6]="FIXED64",e[e.FIXED32=7]="FIXED32",e[e.BOOL=8]="BOOL",e[e.STRING=9]="STRING",e[e.BYTES=12]="BYTES",e[e.UINT32=13]="UINT32",e[e.SFIXED32=15]="SFIXED32",e[e.SFIXED64=16]="SFIXED64",e[e.SINT32=17]="SINT32",e[e.SINT64=18]="SINT64"}(F||(F={})),function(e){e[e.BIGINT=0]="BIGINT",e[e.STRING=1]="STRING",e[e.NUMBER=2]="NUMBER"}(M||(M={})),function(e){e[e.NO=0]="NO",e[e.PACKED=1]="PACKED",e[e.UNPACKED=2]="UNPACKED"}(Y||(Y={}));class Z{constructor(e){var t;this.fields=null!==(t=e.fields)&&void 0!==t?t:[]}prepare(){if(this.data)return;const e=[],t=[],n=[];for(let a of this.fields)if(a.oneof)n.includes(a.oneof)||(n.push(a.oneof),e.push(a.oneof),t.push(a.oneof));else switch(t.push(a.localName),a.kind){case"scalar":case"enum":a.opt&&!a.repeat||e.push(a.localName);break;case"message":a.repeat&&e.push(a.localName);break;case"map":e.push(a.localName)}this.data={req:e,known:t,oneofs:Object.values(n)}}is(e,t,n=!1){if(t<0)return!0;if(null==e||"object"!=typeof e)return!1;this.prepare();let a=Object.keys(e),s=this.data;if(a.length<s.req.length||s.req.some((e=>!a.includes(e))))return!1;if(!n&&a.some((e=>!s.known.includes(e))))return!1;if(t<1)return!0;for(const a of s.oneofs){const s=e[a];if(!G(s))return!1;if(void 0===s.oneofKind)continue;const i=this.fields.find((e=>e.localName===s.oneofKind));if(!i)return!1;if(!this.field(s[s.oneofKind],i,n,t))return!1}for(const a of this.fields)if(void 0===a.oneof&&!this.field(e[a.localName],a,n,t))return!1;return!0}field(e,t,n,a){let s=t.repeat;switch(t.kind){case"scalar":return void 0===e?t.opt:s?this.scalars(e,t.T,a,t.L):this.scalar(e,t.T,t.L);case"enum":return void 0===e?t.opt:s?this.scalars(e,F.INT32,a):this.scalar(e,F.INT32);case"message":return void 0===e||(s?this.messages(e,t.T(),n,a):this.message(e,t.T(),n,a));case"map":if("object"!=typeof e||null===e)return!1;if(a<2)return!0;if(!this.mapKeys(e,t.K,a))return!1;switch(t.V.kind){case"scalar":return this.scalars(Object.values(e),t.V.T,a,t.V.L);case"enum":return this.scalars(Object.values(e),F.INT32,a);case"message":return this.messages(Object.values(e),t.V.T(),n,a)}}return!0}message(e,t,n,a){return n?t.isAssignable(e,a):t.is(e,a)}messages(e,t,n,a){if(!Array.isArray(e))return!1;if(a<2)return!0;if(n){for(let n=0;n<e.length&&n<a;n++)if(!t.isAssignable(e[n],a-1))return!1}else for(let n=0;n<e.length&&n<a;n++)if(!t.is(e[n],a-1))return!1;return!0}scalar(e,t,n){let a=typeof e;switch(t){case F.UINT64:case F.FIXED64:case F.INT64:case F.SFIXED64:case F.SINT64:switch(n){case M.BIGINT:return"bigint"==a;case M.NUMBER:return"number"==a&&!isNaN(e);default:return"string"==a}case F.BOOL:return"boolean"==a;case F.STRING:return"string"==a;case F.BYTES:return e instanceof Uint8Array;case F.DOUBLE:case F.FLOAT:return"number"==a&&!isNaN(e);default:return"number"==a&&Number.isInteger(e)}}scalars(e,t,n,a){if(!Array.isArray(e))return!1;if(n<2)return!0;if(Array.isArray(e))for(let s=0;s<e.length&&s<n;s++)if(!this.scalar(e[s],t,a))return!1;return!0}mapKeys(e,t,n){let a=Object.keys(e);switch(t){case F.INT32:case F.FIXED32:case F.SFIXED32:case F.SINT32:case F.UINT32:return this.scalars(a.slice(0,n).map((e=>parseInt(e))),t,n);case F.BOOL:return this.scalars(a.slice(0,n).map((e=>"true"==e||"false"!=e&&e)),t,n);default:return this.scalars(a,t,n,M.STRING)}}}function j(e,t){switch(t){case M.BIGINT:return e.toBigInt();case M.NUMBER:return e.toNumber();default:return e.toString()}}class K{constructor(e){this.info=e}prepare(){var e;if(void 0===this.fMap){this.fMap={};const t=null!==(e=this.info.fields)&&void 0!==e?e:[];for(const e of t)this.fMap[e.name]=e,this.fMap[e.jsonName]=e,this.fMap[e.localName]=e}}assert(e,t,n){if(!e){let e=c(n);throw"number"!=e&&"boolean"!=e||(e=n.toString()),new Error(`Cannot parse JSON ${e} for ${this.info.typeName}#${t}`)}}read(e,t,n){this.prepare();const a=[];for(const[i,r]of Object.entries(e)){const e=this.fMap[i];if(!e){if(!n.ignoreUnknownFields)throw new Error(`Found unknown field while reading ${this.info.typeName} from JSON format. JSON key: ${i}`);continue}const o=e.localName;let c;if(e.oneof){if(null===r&&("enum"!==e.kind||"google.protobuf.NullValue"!==e.T()[0]))continue;if(a.includes(e.oneof))throw new Error(`Multiple members of the oneof group "${e.oneof}" of ${this.info.typeName} are present in JSON.`);a.push(e.oneof),c=t[e.oneof]={oneofKind:o}}else c=t;if("map"==e.kind){if(null===r)continue;this.assert(null!==(s=r)&&"object"==typeof s&&!Array.isArray(s),e.name,r);const t=c[o];for(const[a,s]of Object.entries(r)){let i;switch(this.assert(null!==s,e.name+" map value",null),e.V.kind){case"message":i=e.V.T().internalJsonRead(s,n);break;case"enum":if(i=this.enum(e.V.T(),s,e.name,n.ignoreUnknownFields),!1===i)continue;break;case"scalar":i=this.scalar(s,e.V.T,e.V.L,e.name)}this.assert(void 0!==i,e.name+" map value",s);let r=a;e.K==F.BOOL&&(r="true"==r||"false"!=r&&r),r=this.scalar(r,e.K,M.STRING,e.name).toString(),t[r]=i}}else if(e.repeat){if(null===r)continue;this.assert(Array.isArray(r),e.name,r);const t=c[o];for(const a of r){let s;switch(this.assert(null!==a,e.name,null),e.kind){case"message":s=e.T().internalJsonRead(a,n);break;case"enum":if(s=this.enum(e.T(),a,e.name,n.ignoreUnknownFields),!1===s)continue;break;case"scalar":s=this.scalar(a,e.T,e.L,e.name)}this.assert(void 0!==s,e.name,r),t.push(s)}}else switch(e.kind){case"message":if(null===r&&"google.protobuf.Value"!=e.T().typeName){this.assert(void 0===e.oneof,e.name+" (oneof member)",null);continue}c[o]=e.T().internalJsonRead(r,n,c[o]);break;case"enum":let t=this.enum(e.T(),r,e.name,n.ignoreUnknownFields);if(!1===t)continue;c[o]=t;break;case"scalar":c[o]=this.scalar(r,e.T,e.L,e.name)}}var s}enum(e,t,n,a){if("google.protobuf.NullValue"==e[0]&&C(null===t||"NULL_VALUE"===t,`Unable to parse field ${this.info.typeName}#${n}, enum ${e[0]} only accepts null.`),null===t)return 0;switch(typeof t){case"number":return C(Number.isInteger(t),`Unable to parse field ${this.info.typeName}#${n}, enum can only be integral number, got ${t}.`),t;case"string":let s=t;e[2]&&t.substring(0,e[2].length)===e[2]&&(s=t.substring(e[2].length));let i=e[1][s];return(void 0!==i||!a)&&(C("number"==typeof i,`Unable to parse field ${this.info.typeName}#${n}, enum ${e[0]} has no value for "${t}".`),i)}C(!1,`Unable to parse field ${this.info.typeName}#${n}, cannot parse enum value from ${typeof t}".`)}scalar(e,t,n,a){let s;try{switch(t){case F.DOUBLE:case F.FLOAT:if(null===e)return 0;if("NaN"===e)return Number.NaN;if("Infinity"===e)return Number.POSITIVE_INFINITY;if("-Infinity"===e)return Number.NEGATIVE_INFINITY;if(""===e){s="empty string";break}if("string"==typeof e&&e.trim().length!==e.length){s="extra whitespace";break}if("string"!=typeof e&&"number"!=typeof e)break;let a=Number(e);if(Number.isNaN(a)){s="not a number";break}if(!Number.isFinite(a)){s="too large or small";break}return t==F.FLOAT&&v(a),a;case F.INT32:case F.FIXED32:case F.SFIXED32:case F.SINT32:case F.UINT32:if(null===e)return 0;let i;if("number"==typeof e?i=e:""===e?s="empty string":"string"==typeof e&&(e.trim().length!==e.length?s="extra whitespace":i=Number(e)),void 0===i)break;return t==F.UINT32?w(i):U(i),i;case F.INT64:case F.SFIXED64:case F.SINT64:if(null===e)return j(_.ZERO,n);if("number"!=typeof e&&"string"!=typeof e)break;return j(_.from(e),n);case F.FIXED64:case F.UINT64:if(null===e)return j(I.ZERO,n);if("number"!=typeof e&&"string"!=typeof e)break;return j(I.from(e),n);case F.BOOL:if(null===e)return!1;if("boolean"!=typeof e)break;return e;case F.STRING:if(null===e)return"";if("string"!=typeof e){s="extra whitespace";break}try{encodeURIComponent(e)}catch(s){s="invalid UTF8";break}return e;case F.BYTES:if(null===e||""===e)return new Uint8Array(0);if("string"!=typeof e)break;return function(e){let t=3*e.length/4;"="==e[e.length-2]?t-=2:"="==e[e.length-1]&&(t-=1);let n,a=new Uint8Array(t),s=0,i=0,r=0;for(let t=0;t<e.length;t++){if(n=u[e.charCodeAt(t)],void 0===n)switch(e[t]){case"=":i=0;case"\n":case"\r":case"\t":case" ":continue;default:throw Error("invalid base64 string.")}switch(i){case 0:r=n,i=1;break;case 1:a[s++]=r<<2|(48&n)>>4,r=n,i=2;break;case 2:a[s++]=(15&r)<<4|(60&n)>>2,r=n,i=3;break;case 3:a[s++]=(3&r)<<6|n,i=0}}if(1==i)throw Error("invalid base64 string.");return a.subarray(0,s)}(e)}}catch(e){s=e.message}this.assert(!1,a+(s?" - "+s:""),e)}}class H{constructor(e){var t;this.fields=null!==(t=e.fields)&&void 0!==t?t:[]}write(e,t){const n={},a=e;for(const e of this.fields){if(!e.oneof){let s=this.field(e,a[e.localName],t);void 0!==s&&(n[t.useProtoFieldName?e.name:e.jsonName]=s);continue}const s=a[e.oneof];if(s.oneofKind!==e.localName)continue;const i="scalar"==e.kind||"enum"==e.kind?Object.assign(Object.assign({},t),{emitDefaultValues:!0}):t;let r=this.field(e,s[e.localName],i);C(void 0!==r),n[t.useProtoFieldName?e.name:e.jsonName]=r}return n}field(e,t,n){let a;if("map"==e.kind){C("object"==typeof t&&null!==t);const s={};switch(e.V.kind){case"scalar":for(const[n,a]of Object.entries(t)){const t=this.scalar(e.V.T,a,e.name,!1,!0);C(void 0!==t),s[n.toString()]=t}break;case"message":const a=e.V.T();for(const[i,r]of Object.entries(t)){const t=this.message(a,r,e.name,n);C(void 0!==t),s[i.toString()]=t}break;case"enum":const i=e.V.T();for(const[a,r]of Object.entries(t)){C(void 0===r||"number"==typeof r);const t=this.enum(i,r,e.name,!1,!0,n.enumAsInteger);C(void 0!==t),s[a.toString()]=t}}(n.emitDefaultValues||Object.keys(s).length>0)&&(a=s)}else if(e.repeat){C(Array.isArray(t));const s=[];switch(e.kind){case"scalar":for(let n=0;n<t.length;n++){const a=this.scalar(e.T,t[n],e.name,e.opt,!0);C(void 0!==a),s.push(a)}break;case"enum":const a=e.T();for(let i=0;i<t.length;i++){C(void 0===t[i]||"number"==typeof t[i]);const r=this.enum(a,t[i],e.name,e.opt,!0,n.enumAsInteger);C(void 0!==r),s.push(r)}break;case"message":const i=e.T();for(let a=0;a<t.length;a++){const r=this.message(i,t[a],e.name,n);C(void 0!==r),s.push(r)}}(n.emitDefaultValues||s.length>0||n.emitDefaultValues)&&(a=s)}else switch(e.kind){case"scalar":a=this.scalar(e.T,t,e.name,e.opt,n.emitDefaultValues);break;case"enum":a=this.enum(e.T(),t,e.name,e.opt,n.emitDefaultValues,n.enumAsInteger);break;case"message":a=this.message(e.T(),t,e.name,n)}return a}enum(e,t,n,a,s,i){if("google.protobuf.NullValue"==e[0])return s||a?null:void 0;if(void 0!==t){if(0!==t||s||a)return C("number"==typeof t),C(Number.isInteger(t)),i||!e[1].hasOwnProperty(t)?t:e[2]?e[2]+e[1][t]:e[1][t]}else C(a)}message(e,t,n,a){return void 0===t?a.emitDefaultValues?null:void 0:e.internalJsonWrite(t,a)}scalar(e,t,n,a,s){if(void 0===t)return void C(a);const i=s||a;switch(e){case F.INT32:case F.SFIXED32:case F.SINT32:return 0===t?i?0:void 0:(U(t),t);case F.FIXED32:case F.UINT32:return 0===t?i?0:void 0:(w(t),t);case F.FLOAT:v(t);case F.DOUBLE:return 0===t?i?0:void 0:(C("number"==typeof t),Number.isNaN(t)?"NaN":t===Number.POSITIVE_INFINITY?"Infinity":t===Number.NEGATIVE_INFINITY?"-Infinity":t);case F.STRING:return""===t?i?"":void 0:(C("string"==typeof t),t);case F.BOOL:return!1===t?!i&&void 0:(C("boolean"==typeof t),t);case F.UINT64:case F.FIXED64:C("number"==typeof t||"string"==typeof t||"bigint"==typeof t);let e=I.from(t);if(e.isZero()&&!i)return;return e.toString();case F.INT64:case F.SFIXED64:case F.SINT64:C("number"==typeof t||"string"==typeof t||"bigint"==typeof t);let n=_.from(t);if(n.isZero()&&!i)return;return n.toString();case F.BYTES:return C(t instanceof Uint8Array),t.byteLength?function(e){let t,n="",a=0,s=0;for(let i=0;i<e.length;i++)switch(t=e[i],a){case 0:n+=l[t>>2],s=(3&t)<<4,a=1;break;case 1:n+=l[s|t>>4],s=(15&t)<<2,a=2;break;case 2:n+=l[s|t>>6],n+=l[63&t],a=0}return a&&(n+=l[s],n+="=",1==a&&(n+="=")),n}(t):i?"":void 0}}}function W(e,t=M.STRING){switch(e){case F.BOOL:return!1;case F.UINT64:case F.FIXED64:return j(I.ZERO,t);case F.INT64:case F.SFIXED64:case F.SINT64:return j(_.ZERO,t);case F.DOUBLE:case F.FLOAT:return 0;case F.BYTES:return new Uint8Array(0);case F.STRING:return"";default:return 0}}class J{constructor(e){this.info=e}prepare(){var e;if(!this.fieldNoToField){const t=null!==(e=this.info.fields)&&void 0!==e?e:[];this.fieldNoToField=new Map(t.map((e=>[e.no,e])))}}read(e,t,n,a){this.prepare();const s=void 0===a?e.len:e.pos+a;for(;e.pos<s;){const[a,s]=e.tag(),i=this.fieldNoToField.get(a);if(!i){let i=n.readUnknownField;if("throw"==i)throw new Error(`Unknown field ${a} (wire type ${s}) for ${this.info.typeName}`);let r=e.skip(s);!1!==i&&(!0===i?d.onRead:i)(this.info.typeName,t,a,s,r);continue}let r=t,o=i.repeat,c=i.localName;switch(i.oneof&&(r=r[i.oneof],r.oneofKind!==c&&(r=t[i.oneof]={oneofKind:c})),i.kind){case"scalar":case"enum":let t="enum"==i.kind?F.INT32:i.T,a="scalar"==i.kind?i.L:void 0;if(o){let n=r[c];if(s==m.LengthDelimited&&t!=F.STRING&&t!=F.BYTES){let s=e.uint32()+e.pos;for(;e.pos<s;)n.push(this.scalar(e,t,a))}else n.push(this.scalar(e,t,a))}else r[c]=this.scalar(e,t,a);break;case"message":if(o){let t=r[c],a=i.T().internalBinaryRead(e,e.uint32(),n);t.push(a)}else r[c]=i.T().internalBinaryRead(e,e.uint32(),n,r[c]);break;case"map":let[l,u]=this.mapEntry(i,e,n);r[c][l]=u}}}mapEntry(e,t,n){let a,s,i=t.uint32(),r=t.pos+i;for(;t.pos<r;){let[i,r]=t.tag();switch(i){case 1:a=e.K==F.BOOL?t.bool().toString():this.scalar(t,e.K,M.STRING);break;case 2:switch(e.V.kind){case"scalar":s=this.scalar(t,e.V.T,e.V.L);break;case"enum":s=t.int32();break;case"message":s=e.V.T().internalBinaryRead(t,t.uint32(),n)}break;default:throw new Error(`Unknown field ${i} (wire type ${r}) in map entry for ${this.info.typeName}#${e.name}`)}}if(void 0===a){let t=W(e.K);a=e.K==F.BOOL?t.toString():t}if(void 0===s)switch(e.V.kind){case"scalar":s=W(e.V.T,e.V.L);break;case"enum":s=0;break;case"message":s=e.V.T().create()}return[a,s]}scalar(e,t,n){switch(t){case F.INT32:return e.int32();case F.STRING:return e.string();case F.BOOL:return e.bool();case F.DOUBLE:return e.double();case F.FLOAT:return e.float();case F.INT64:return j(e.int64(),n);case F.UINT64:return j(e.uint64(),n);case F.FIXED64:return j(e.fixed64(),n);case F.FIXED32:return e.fixed32();case F.BYTES:return e.bytes();case F.UINT32:return e.uint32();case F.SFIXED32:return e.sfixed32();case F.SFIXED64:return j(e.sfixed64(),n);case F.SINT32:return e.sint32();case F.SINT64:return j(e.sint64(),n)}}}class q{constructor(e){this.info=e}prepare(){if(!this.fields){const e=this.info.fields?this.info.fields.concat():[];this.fields=e.sort(((e,t)=>e.no-t.no))}}write(e,t,n){this.prepare();for(const a of this.fields){let s,i,r=a.repeat,o=a.localName;if(a.oneof){const t=e[a.oneof];if(t.oneofKind!==o)continue;s=t[o],i=!0}else s=e[o],i=!1;switch(a.kind){case"scalar":case"enum":let e="enum"==a.kind?F.INT32:a.T;if(r)if(C(Array.isArray(s)),r==Y.PACKED)this.packed(t,e,a.no,s);else for(const n of s)this.scalar(t,e,a.no,n,!0);else void 0===s?C(a.opt):this.scalar(t,e,a.no,s,i||a.opt);break;case"message":if(r){C(Array.isArray(s));for(const e of s)this.message(t,n,a.T(),a.no,e)}else this.message(t,n,a.T(),a.no,s);break;case"map":C("object"==typeof s&&null!==s);for(const[e,i]of Object.entries(s))this.mapEntry(t,n,a,e,i)}}let a=n.writeUnknownFields;!1!==a&&(!0===a?d.onWrite:a)(this.info.typeName,e,t)}mapEntry(e,t,n,a,s){e.tag(n.no,m.LengthDelimited),e.fork();let i=a;switch(n.K){case F.INT32:case F.FIXED32:case F.UINT32:case F.SFIXED32:case F.SINT32:i=Number.parseInt(a);break;case F.BOOL:C("true"==a||"false"==a),i="true"==a}switch(this.scalar(e,n.K,1,i,!0),n.V.kind){case"scalar":this.scalar(e,n.V.T,2,s,!0);break;case"enum":this.scalar(e,F.INT32,2,s,!0);break;case"message":this.message(e,t,n.V.T(),2,s)}e.join()}message(e,t,n,a,s){void 0!==s&&(n.internalBinaryWrite(s,e.tag(a,m.LengthDelimited).fork(),t),e.join())}scalar(e,t,n,a,s){let[i,r,o]=this.scalarInfo(t,a);o&&!s||(e.tag(n,i),e[r](a))}packed(e,t,n,a){if(!a.length)return;C(t!==F.BYTES&&t!==F.STRING),e.tag(n,m.LengthDelimited),e.fork();let[,s]=this.scalarInfo(t);for(let t=0;t<a.length;t++)e[s](a[t]);e.join()}scalarInfo(e,t){let n,a=m.Varint,s=void 0===t,i=0===t;switch(e){case F.INT32:n="int32";break;case F.STRING:i=s||!t.length,a=m.LengthDelimited,n="string";break;case F.BOOL:i=!1===t,n="bool";break;case F.UINT32:n="uint32";break;case F.DOUBLE:a=m.Bit64,n="double";break;case F.FLOAT:a=m.Bit32,n="float";break;case F.INT64:i=s||_.from(t).isZero(),n="int64";break;case F.UINT64:i=s||I.from(t).isZero(),n="uint64";break;case F.FIXED64:i=s||I.from(t).isZero(),a=m.Bit64,n="fixed64";break;case F.BYTES:i=s||!t.byteLength,a=m.LengthDelimited,n="bytes";break;case F.FIXED32:a=m.Bit32,n="fixed32";break;case F.SFIXED32:a=m.Bit32,n="sfixed32";break;case F.SFIXED64:i=s||_.from(t).isZero(),a=m.Bit64,n="sfixed64";break;case F.SINT32:n="sint32";break;case F.SINT64:i=s||_.from(t).isZero(),n="sint64"}return[a,n,s||i]}}function z(e,t,n){let a,s,i=n;for(let n of e.fields){let e=n.localName;if(n.oneof){const r=i[n.oneof];if(null==(null==r?void 0:r.oneofKind))continue;if(a=r[e],s=t[n.oneof],s.oneofKind=r.oneofKind,null==a){delete s[e];continue}}else if(a=i[e],s=t,null==a)continue;switch(n.repeat&&(s[e].length=a.length),n.kind){case"scalar":case"enum":if(n.repeat)for(let t=0;t<a.length;t++)s[e][t]=a[t];else s[e]=a;break;case"message":let t=n.T();if(n.repeat)for(let n=0;n<a.length;n++)s[e][n]=t.create(a[n]);else void 0===s[e]?s[e]=t.create(a):t.mergePartial(s[e],a);break;case"map":switch(n.V.kind){case"scalar":case"enum":Object.assign(s[e],a);break;case"message":let t=n.V.T();for(let n of Object.keys(a))s[e][n]=t.create(a[n])}}}}const Q=Object.values;function ee(e,t,n){if(t===n)return!0;if(e!==F.BYTES)return!1;let a=t,s=n;if(a.length!==s.length)return!1;for(let e=0;e<a.length;e++)if(a[e]!=s[e])return!1;return!0}function te(e,t,n){if(t.length!==n.length)return!1;for(let a=0;a<t.length;a++)if(!ee(e,t[a],n[a]))return!1;return!0}function ne(e,t,n){if(t.length!==n.length)return!1;for(let a=0;a<t.length;a++)if(!e.equals(t[a],n[a]))return!1;return!0}const ae=Object.getOwnPropertyDescriptors(Object.getPrototypeOf({}));class se{constructor(e,t,n){this.defaultCheckDepth=16,this.typeName=e,this.fields=t.map($),this.options=null!=n?n:{},this.messagePrototype=Object.create(null,Object.assign(Object.assign({},ae),{[X]:{value:this}})),this.refTypeCheck=new Z(this),this.refJsonReader=new K(this),this.refJsonWriter=new H(this),this.refBinReader=new J(this),this.refBinWriter=new q(this)}create(e){let t=function(e){const t=e.messagePrototype?Object.create(e.messagePrototype):Object.defineProperty({},X,{value:e});for(let n of e.fields){let e=n.localName;if(!n.opt)if(n.oneof)t[n.oneof]={oneofKind:void 0};else if(n.repeat)t[e]=[];else switch(n.kind){case"scalar":t[e]=W(n.T,n.L);break;case"enum":t[e]=0;break;case"map":t[e]={}}}return t}(this);return void 0!==e&&z(this,t,e),t}clone(e){let t=this.create();return z(this,t,e),t}equals(e,t){return function(e,t,n){if(t===n)return!0;if(!t||!n)return!1;for(let a of e.fields){let e=a.localName,s=a.oneof?t[a.oneof][e]:t[e],i=a.oneof?n[a.oneof][e]:n[e];switch(a.kind){case"enum":case"scalar":let e="enum"==a.kind?F.INT32:a.T;if(!(a.repeat?te(e,s,i):ee(e,s,i)))return!1;break;case"map":if(!("message"==a.V.kind?ne(a.V.T(),Q(s),Q(i)):te("enum"==a.V.kind?F.INT32:a.V.T,Q(s),Q(i))))return!1;break;case"message":let t=a.T();if(!(a.repeat?ne(t,s,i):t.equals(s,i)))return!1}}return!0}(this,e,t)}is(e,t=this.defaultCheckDepth){return this.refTypeCheck.is(e,t,!1)}isAssignable(e,t=this.defaultCheckDepth){return this.refTypeCheck.is(e,t,!0)}mergePartial(e,t){z(this,e,t)}fromBinary(e,t){let n=function(e){return e?Object.assign(Object.assign({},N),e):N}(t);return this.internalBinaryRead(n.readerFactory(e),e.byteLength,n)}fromJson(e,t){return this.internalJsonRead(e,function(e){return e?Object.assign(Object.assign({},P),e):P}(t))}fromJsonString(e,t){let n=JSON.parse(e);return this.fromJson(n,t)}toJson(e,t){return this.internalJsonWrite(e,function(e){return e?Object.assign(Object.assign({},x),e):x}(t))}toJsonString(e,t){var n;let a=this.toJson(e,t);return JSON.stringify(a,null,null!==(n=null==t?void 0:t.prettySpaces)&&void 0!==n?n:0)}toBinary(e,t){let n=function(e){return e?Object.assign(Object.assign({},D),e):D}(t);return this.internalBinaryWrite(e,n.writerFactory(),n).finish()}internalJsonRead(e,t,n){if(null!==e&&"object"==typeof e&&!Array.isArray(e)){let a=null!=n?n:this.create();return this.refJsonReader.read(e,a,t),a}throw new Error(`Unable to parse message ${this.typeName} from JSON ${c(e)}.`)}internalJsonWrite(e,t){return this.refJsonWriter.write(e,t)}internalBinaryWrite(e,t,n){return this.refBinWriter.write(e,t,n),t}internalBinaryRead(e,t,n,a){let s=null!=a?a:this.create();return this.refBinReader.read(e,s,n,t),s}}var ie,re,oe,ce,le,ue,de;!function(e){e[e.TILE_UPDATE_BEHAVIOR_FLUSH=0]="TILE_UPDATE_BEHAVIOR_FLUSH",e[e.TILE_UPDATE_BEHAVIOR_ETAG=1]="TILE_UPDATE_BEHAVIOR_ETAG"}(ie||(ie={})),function(e){e[e.CHECKSUM_TYPE_NONE=0]="CHECKSUM_TYPE_NONE",e[e.CHECKSUM_TYPE_APPENDED_MD5=1]="CHECKSUM_TYPE_APPENDED_MD5"}(re||(re={})),function(e){e[e.REQUEST_STYLE_LEGACY=0]="REQUEST_STYLE_LEGACY",e[e.REQUEST_STYLE_HEADER_PARAMS_VERSION_BASED_HMAC_AUTH=1]="REQUEST_STYLE_HEADER_PARAMS_VERSION_BASED_HMAC_AUTH"}(oe||(oe={})),function(e){e[e.RASTER_STANDARD=0]="RASTER_STANDARD",e[e.VECTOR_STANDARD=1]="VECTOR_STANDARD",e[e.VECTOR_TRAFFIC_SEGMENTS_FOR_RASTER=2]="VECTOR_TRAFFIC_SEGMENTS_FOR_RASTER",e[e.VECTOR_TRAFFIC_INCIDENTS_FOR_RASTER=3]="VECTOR_TRAFFIC_INCIDENTS_FOR_RASTER",e[e.VECTOR_TRAFFIC_SEGMENTS_AND_INCIDENTS_FOR_RASTER=4]="VECTOR_TRAFFIC_SEGMENTS_AND_INCIDENTS_FOR_RASTER",e[e.RASTER_STANDARD_BACKGROUND=5]="RASTER_STANDARD_BACKGROUND",e[e.RASTER_HYBRID=6]="RASTER_HYBRID",e[e.RASTER_SATELLITE=7]="RASTER_SATELLITE",e[e.RASTER_TERRAIN=8]="RASTER_TERRAIN",e[e.VECTOR_BUILDINGS=11]="VECTOR_BUILDINGS",e[e.VECTOR_TRAFFIC=12]="VECTOR_TRAFFIC",e[e.VECTOR_POI=13]="VECTOR_POI",e[e.SPUTNIK_METADATA=14]="SPUTNIK_METADATA",e[e.SPUTNIK_C3M=15]="SPUTNIK_C3M",e[e.SPUTNIK_DSM=16]="SPUTNIK_DSM",e[e.SPUTNIK_DSM_GLOBAL=17]="SPUTNIK_DSM_GLOBAL",e[e.VECTOR_REALISTIC=18]="VECTOR_REALISTIC",e[e.VECTOR_LEGACY_REALISTIC=19]="VECTOR_LEGACY_REALISTIC",e[e.VECTOR_ROADS=20]="VECTOR_ROADS",e[e.RASTER_VEGETATION=21]="RASTER_VEGETATION",e[e.VECTOR_TRAFFIC_SKELETON=22]="VECTOR_TRAFFIC_SKELETON",e[e.RASTER_COASTLINE_MASK=23]="RASTER_COASTLINE_MASK",e[e.RASTER_HILLSHADE=24]="RASTER_HILLSHADE",e[e.VECTOR_TRAFFIC_WITH_GREEN=25]="VECTOR_TRAFFIC_WITH_GREEN",e[e.VECTOR_TRAFFIC_STATIC=26]="VECTOR_TRAFFIC_STATIC",e[e.RASTER_COASTLINE_DROP_MASK=27]="RASTER_COASTLINE_DROP_MASK",e[e.VECTOR_TRAFFIC_SKELETON_WITH_HISTORICAL=28]="VECTOR_TRAFFIC_SKELETON_WITH_HISTORICAL",e[e.VECTOR_SPEED_PROFILES=29]="VECTOR_SPEED_PROFILES",e[e.VECTOR_VENUES=30]="VECTOR_VENUES",e[e.RASTER_DOWN_SAMPLED=31]="RASTER_DOWN_SAMPLED",e[e.RASTER_COLOR_BALANCED=32]="RASTER_COLOR_BALANCED",e[e.RASTER_SATELLITE_NIGHT=33]="RASTER_SATELLITE_NIGHT",e[e.SPUTNIK_VECTOR_BORDER=34]="SPUTNIK_VECTOR_BORDER",e[e.RASTER_SATELLITE_DIGITIZE=35]="RASTER_SATELLITE_DIGITIZE",e[e.RASTER_HILLSHADE_PARKS=36]="RASTER_HILLSHADE_PARKS",e[e.VECTOR_TRANSIT=37]="VECTOR_TRANSIT",e[e.RASTER_STANDARD_BASE=38]="RASTER_STANDARD_BASE",e[e.RASTER_STANDARD_LABELS=39]="RASTER_STANDARD_LABELS",e[e.RASTER_HYBRID_ROADS=40]="RASTER_HYBRID_ROADS",e[e.RASTER_HYBRID_LABELS=41]="RASTER_HYBRID_LABELS",e[e.FLYOVER_C3M_MESH=42]="FLYOVER_C3M_MESH",e[e.FLYOVER_C3M_JPEG_TEXTURE=43]="FLYOVER_C3M_JPEG_TEXTURE",e[e.FLYOVER_C3M_ASTC_TEXTURE=44]="FLYOVER_C3M_ASTC_TEXTURE",e[e.RASTER_SATELLITE_ASTC=45]="RASTER_SATELLITE_ASTC",e[e.RASTER_HYBRID_ROADS_AND_LABELS=46]="RASTER_HYBRID_ROADS_AND_LABELS",e[e.VECTOR_TRANSIT_SELECTION=47]="VECTOR_TRANSIT_SELECTION",e[e.VECTOR_COVERAGE=48]="VECTOR_COVERAGE",e[e.FLYOVER_VISIBILITY=49]="FLYOVER_VISIBILITY",e[e.FLYOVER_SKYBOX=50]="FLYOVER_SKYBOX",e[e.FLYOVER_NAVGRAPH=51]="FLYOVER_NAVGRAPH",e[e.FLYOVER_METADATA=52]="FLYOVER_METADATA",e[e.VECTOR_ROAD_NETWORK=53]="VECTOR_ROAD_NETWORK",e[e.VECTOR_LAND_COVER=54]="VECTOR_LAND_COVER",e[e.VECTOR_DEBUG=55]="VECTOR_DEBUG",e[e.VECTOR_STREET_POI=56]="VECTOR_STREET_POI",e[e.MUNIN_METADATA=57]="MUNIN_METADATA",e[e.VECTOR_SPR_MERCATOR=58]="VECTOR_SPR_MERCATOR",e[e.VECTOR_SPR_MODELS=59]="VECTOR_SPR_MODELS",e[e.VECTOR_SPR_MATERIALS=60]="VECTOR_SPR_MATERIALS",e[e.VECTOR_SPR_METADATA=61]="VECTOR_SPR_METADATA",e[e.VECTOR_TRACKS=62]="VECTOR_TRACKS",e[e.VECTOR_RESERVED_2=63]="VECTOR_RESERVED_2",e[e.VECTOR_STREET_LANDMARKS=64]="VECTOR_STREET_LANDMARKS",e[e.COARSE_LOCATION_POLYGONS=65]="COARSE_LOCATION_POLYGONS",e[e.VECTOR_SPR_ROADS=66]="VECTOR_SPR_ROADS",e[e.VECTOR_SPR_STANDARD=67]="VECTOR_SPR_STANDARD",e[e.VECTOR_POI_V2=68]="VECTOR_POI_V2",e[e.VECTOR_POLYGON_SELECTION=69]="VECTOR_POLYGON_SELECTION",e[e.VL_METADATA=70]="VL_METADATA",e[e.VL_DATA=71]="VL_DATA",e[e.PROACTIVE_APP_CLIP=72]="PROACTIVE_APP_CLIP",e[e.VECTOR_BUILDINGS_V2=73]="VECTOR_BUILDINGS_V2",e[e.POI_BUSYNESS=74]="POI_BUSYNESS",e[e.POI_DP_BUSYNESS=75]="POI_DP_BUSYNESS",e[e.SMART_INTERFACE_SELECTION=76]="SMART_INTERFACE_SELECTION",e[e.VECTOR_ASSETS=77]="VECTOR_ASSETS",e[e.SPR_ASSET_METADATA=78]="SPR_ASSET_METADATA",e[e.VECTOR_SPR_POLAR=79]="VECTOR_SPR_POLAR",e[e.SMART_DATA_MODE=80]="SMART_DATA_MODE",e[e.CELLULAR_PERFORMANCE_SCORE=81]="CELLULAR_PERFORMANCE_SCORE",e[e.VECTOR_SPR_MODELS_OCCLUSION=82]="VECTOR_SPR_MODELS_OCCLUSION",e[e.VECTOR_TOPOGRAPHIC=83]="VECTOR_TOPOGRAPHIC",e[e.VECTOR_POI_V2_UPDATE=84]="VECTOR_POI_V2_UPDATE",e[e.VECTOR_LIVE_DATA_UPDATES=85]="VECTOR_LIVE_DATA_UPDATES",e[e.VECTOR_TRAFFIC_V2=86]="VECTOR_TRAFFIC_V2",e[e.VECTOR_ROAD_SELECTION=87]="VECTOR_ROAD_SELECTION",e[e.VECTOR_REGION_METADATA=88]="VECTOR_REGION_METADATA",e[e.RAY_TRACING=89]="RAY_TRACING",e[e.VECTOR_CONTOURS=90]="VECTOR_CONTOURS",e[e.RASTER_SATELLITE_POLAR=91]="RASTER_SATELLITE_POLAR",e[e.VMAP4_ELEVATION=92]="VMAP4_ELEVATION",e[e.VMAP4_ELEVATION_POLAR=93]="VMAP4_ELEVATION_POLAR",e[e.CELLULAR_COVERAGE_PLMN=94]="CELLULAR_COVERAGE_PLMN",e[e.RASTER_SATELLITE_POLAR_NIGHT=95]="RASTER_SATELLITE_POLAR_NIGHT",e[e.UNUSED_96=96]="UNUSED_96",e[e.UNUSED_97=97]="UNUSED_97",e[e.UNUSED_98=98]="UNUSED_98",e[e.UNUSED_99=99]="UNUSED_99"}(ce||(ce={})),function(e){e[e.NODPI=0]="NODPI",e[e.LODPI=1]="LODPI",e[e.HIDPI=2]="HIDPI"}(le||(le={})),function(e){e[e.PX128=0]="PX128",e[e.PX256=1]="PX256",e[e.PX512=2]="PX512"}(ue||(ue={})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.WATER=1]="WATER",e[e.NO_TILE=2]="NO_TILE"}(de||(de={}));const me=new class extends se{constructor(){super("com.apple.geo.protobuf.geo.GenericTile",[{no:1,name:"tileType",kind:"enum",opt:!0,T:()=>["com.apple.geo.protobuf.geo.GenericTileType",de]},{no:2,name:"textureIndex",kind:"scalar",opt:!0,T:13},{no:3,name:"resourceIndex",kind:"scalar",opt:!0,T:13}])}create(e){const t=globalThis.Object.create(this.messagePrototype);return void 0!==e&&z(this,t,e),t}internalBinaryRead(e,t,n,a){let s=a??this.create(),i=e.pos+t;for(;e.pos<i;){let[t,a]=e.tag();switch(t){case 1:s.tileType=e.int32();break;case 2:s.textureIndex=e.uint32();break;case 3:s.resourceIndex=e.uint32();break;default:let i=n.readUnknownField;if("throw"===i)throw new globalThis.Error(`Unknown field ${t} (wire type ${a}) for ${this.typeName}`);let r=e.skip(a);!1!==i&&(!0===i?d.onRead:i)(this.typeName,s,t,a,r)}}return s}internalBinaryWrite(e,t,n){void 0!==e.tileType&&t.tag(1,m.Varint).int32(e.tileType),void 0!==e.textureIndex&&t.tag(2,m.Varint).uint32(e.textureIndex),void 0!==e.resourceIndex&&t.tag(3,m.Varint).uint32(e.resourceIndex);let a=n.writeUnknownFields;return!1!==a&&(1==a?d.onWrite:a)(this.typeName,e,t),t}};const pe=new class extends se{constructor(){super("com.apple.geo.protobuf.geo.TileSetRegion",[{no:1,name:"minX",kind:"scalar",T:13},{no:2,name:"minY",kind:"scalar",T:13},{no:3,name:"maxX",kind:"scalar",T:13},{no:4,name:"maxY",kind:"scalar",T:13},{no:5,name:"minZ",kind:"scalar",T:13},{no:6,name:"maxZ",kind:"scalar",T:13}])}create(e){const t=globalThis.Object.create(this.messagePrototype);return t.minX=0,t.minY=0,t.maxX=0,t.maxY=0,t.minZ=0,t.maxZ=0,void 0!==e&&z(this,t,e),t}internalBinaryRead(e,t,n,a){let s=a??this.create(),i=e.pos+t;for(;e.pos<i;){let[t,a]=e.tag();switch(t){case 1:s.minX=e.uint32();break;case 2:s.minY=e.uint32();break;case 3:s.maxX=e.uint32();break;case 4:s.maxY=e.uint32();break;case 5:s.minZ=e.uint32();break;case 6:s.maxZ=e.uint32();break;default:let i=n.readUnknownField;if("throw"===i)throw new globalThis.Error(`Unknown field ${t} (wire type ${a}) for ${this.typeName}`);let r=e.skip(a);!1!==i&&(!0===i?d.onRead:i)(this.typeName,s,t,a,r)}}return s}internalBinaryWrite(e,t,n){0!==e.minX&&t.tag(1,m.Varint).uint32(e.minX),0!==e.minY&&t.tag(2,m.Varint).uint32(e.minY),0!==e.maxX&&t.tag(3,m.Varint).uint32(e.maxX),0!==e.maxY&&t.tag(4,m.Varint).uint32(e.maxY),0!==e.minZ&&t.tag(5,m.Varint).uint32(e.minZ),0!==e.maxZ&&t.tag(6,m.Varint).uint32(e.maxZ);let a=n.writeUnknownFields;return!1!==a&&(1==a?d.onWrite:a)(this.typeName,e,t),t}};const Te=new class extends se{constructor(){super("com.apple.geo.protobuf.geo.TileSetVersion",[{no:1,name:"identifier",kind:"scalar",T:13},{no:2,name:"availableTiles",kind:"message",repeat:2,T:()=>pe},{no:3,name:"timeToLiveSeconds",kind:"scalar",opt:!0,T:13},{no:4,name:"genericTile",kind:"message",repeat:2,T:()=>me},{no:5,name:"supportedLanguagesVersion",kind:"scalar",opt:!0,T:13}])}create(e){const t=globalThis.Object.create(this.messagePrototype);return t.identifier=0,t.availableTiles=[],t.genericTile=[],void 0!==e&&z(this,t,e),t}internalBinaryRead(e,t,n,a){let s=a??this.create(),i=e.pos+t;for(;e.pos<i;){let[t,a]=e.tag();switch(t){case 1:s.identifier=e.uint32();break;case 2:s.availableTiles.push(pe.internalBinaryRead(e,e.uint32(),n));break;case 3:s.timeToLiveSeconds=e.uint32();break;case 4:s.genericTile.push(me.internalBinaryRead(e,e.uint32(),n));break;case 5:s.supportedLanguagesVersion=e.uint32();break;default:let i=n.readUnknownField;if("throw"===i)throw new globalThis.Error(`Unknown field ${t} (wire type ${a}) for ${this.typeName}`);let r=e.skip(a);!1!==i&&(!0===i?d.onRead:i)(this.typeName,s,t,a,r)}}return s}internalBinaryWrite(e,t,n){0!==e.identifier&&t.tag(1,m.Varint).uint32(e.identifier);for(let a=0;a<e.availableTiles.length;a++)pe.internalBinaryWrite(e.availableTiles[a],t.tag(2,m.LengthDelimited).fork(),n).join();void 0!==e.timeToLiveSeconds&&t.tag(3,m.Varint).uint32(e.timeToLiveSeconds);for(let a=0;a<e.genericTile.length;a++)me.internalBinaryWrite(e.genericTile[a],t.tag(4,m.LengthDelimited).fork(),n).join();void 0!==e.supportedLanguagesVersion&&t.tag(5,m.Varint).uint32(e.supportedLanguagesVersion);let a=n.writeUnknownFields;return!1!==a&&(1==a?d.onWrite:a)(this.typeName,e,t),t}};const fe=new class extends se{constructor(){super("com.apple.geo.protobuf.geo.TileSet",[{no:1,name:"baseURL",kind:"scalar",opt:!0,T:9},{no:2,name:"multiTileURL",kind:"scalar",opt:!0,T:9},{no:3,name:"style",kind:"enum",T:()=>["com.apple.geo.protobuf.geo.TileSetStyle",ce]},{no:5,name:"validVersion",kind:"message",repeat:2,T:()=>Te},{no:6,name:"scale",kind:"enum",T:()=>["com.apple.geo.protobuf.geo.TileScale",le]},{no:7,name:"size",kind:"enum",T:()=>["com.apple.geo.protobuf.geo.TileSize",ue]},{no:9,name:"localizationURL",kind:"scalar",opt:!0,T:9},{no:10,name:"supportedLanguage",kind:"message",repeat:2,T:()=>he},{no:11,name:"multiTileURLUsesStatusCodes",kind:"scalar",opt:!0,T:8},{no:12,name:"updateBehavior",kind:"enum",opt:!0,T:()=>["com.apple.geo.protobuf.geo.TileSet.TileSetVersionUpdateBehavior",ie]},{no:13,name:"countryRegionWhitelist",kind:"message",repeat:2,T:()=>Re},{no:14,name:"checksumType",kind:"enum",opt:!0,T:()=>["com.apple.geo.protobuf.geo.TileSet.TileSetChecksumType",re]},{no:15,name:"dataSet",kind:"scalar",opt:!0,T:13},{no:16,name:"requestStyle",kind:"enum",opt:!0,T:()=>["com.apple.geo.protobuf.geo.TileSet.TileRequestStyle",oe]},{no:17,name:"useAuthProxy",kind:"scalar",opt:!0,T:8},{no:18,name:"supportsMultipathTCP",kind:"scalar",opt:!0,T:8},{no:19,name:"alternativeMultipathTCPPort",kind:"scalar",opt:!0,T:13},{no:20,name:"deviceSKUWhitelist",kind:"scalar",repeat:2,T:9}])}create(e){const t=globalThis.Object.create(this.messagePrototype);return t.style=0,t.validVersion=[],t.scale=0,t.size=0,t.supportedLanguage=[],t.countryRegionWhitelist=[],t.deviceSKUWhitelist=[],void 0!==e&&z(this,t,e),t}internalBinaryRead(e,t,n,a){let s=a??this.create(),i=e.pos+t;for(;e.pos<i;){let[t,a]=e.tag();switch(t){case 1:s.baseURL=e.string();break;case 2:s.multiTileURL=e.string();break;case 3:s.style=e.int32();break;case 5:s.validVersion.push(Te.internalBinaryRead(e,e.uint32(),n));break;case 6:s.scale=e.int32();break;case 7:s.size=e.int32();break;case 9:s.localizationURL=e.string();break;case 10:s.supportedLanguage.push(he.internalBinaryRead(e,e.uint32(),n));break;case 11:s.multiTileURLUsesStatusCodes=e.bool();break;case 12:s.updateBehavior=e.int32();break;case 13:s.countryRegionWhitelist.push(Re.internalBinaryRead(e,e.uint32(),n));break;case 14:s.checksumType=e.int32();break;case 15:s.dataSet=e.uint32();break;case 16:s.requestStyle=e.int32();break;case 17:s.useAuthProxy=e.bool();break;case 18:s.supportsMultipathTCP=e.bool();break;case 19:s.alternativeMultipathTCPPort=e.uint32();break;case 20:s.deviceSKUWhitelist.push(e.string());break;default:let i=n.readUnknownField;if("throw"===i)throw new globalThis.Error(`Unknown field ${t} (wire type ${a}) for ${this.typeName}`);let r=e.skip(a);!1!==i&&(!0===i?d.onRead:i)(this.typeName,s,t,a,r)}}return s}internalBinaryWrite(e,t,n){void 0!==e.baseURL&&t.tag(1,m.LengthDelimited).string(e.baseURL),void 0!==e.multiTileURL&&t.tag(2,m.LengthDelimited).string(e.multiTileURL),0!==e.style&&t.tag(3,m.Varint).int32(e.style);for(let a=0;a<e.validVersion.length;a++)Te.internalBinaryWrite(e.validVersion[a],t.tag(5,m.LengthDelimited).fork(),n).join();0!==e.scale&&t.tag(6,m.Varint).int32(e.scale),0!==e.size&&t.tag(7,m.Varint).int32(e.size),void 0!==e.localizationURL&&t.tag(9,m.LengthDelimited).string(e.localizationURL);for(let a=0;a<e.supportedLanguage.length;a++)he.internalBinaryWrite(e.supportedLanguage[a],t.tag(10,m.LengthDelimited).fork(),n).join();void 0!==e.multiTileURLUsesStatusCodes&&t.tag(11,m.Varint).bool(e.multiTileURLUsesStatusCodes),void 0!==e.updateBehavior&&t.tag(12,m.Varint).int32(e.updateBehavior);for(let a=0;a<e.countryRegionWhitelist.length;a++)Re.internalBinaryWrite(e.countryRegionWhitelist[a],t.tag(13,m.LengthDelimited).fork(),n).join();void 0!==e.checksumType&&t.tag(14,m.Varint).int32(e.checksumType),void 0!==e.dataSet&&t.tag(15,m.Varint).uint32(e.dataSet),void 0!==e.requestStyle&&t.tag(16,m.Varint).int32(e.requestStyle),void 0!==e.useAuthProxy&&t.tag(17,m.Varint).bool(e.useAuthProxy),void 0!==e.supportsMultipathTCP&&t.tag(18,m.Varint).bool(e.supportsMultipathTCP),void 0!==e.alternativeMultipathTCPPort&&t.tag(19,m.Varint).uint32(e.alternativeMultipathTCPPort);for(let n=0;n<e.deviceSKUWhitelist.length;n++)t.tag(20,m.LengthDelimited).string(e.deviceSKUWhitelist[n]);let a=n.writeUnknownFields;return!1!==a&&(1==a?d.onWrite:a)(this.typeName,e,t),t}};const he=new class extends se{constructor(){super("com.apple.geo.protobuf.geo.TileSet.Language",[{no:1,name:"identifier",kind:"scalar",T:13},{no:2,name:"language",kind:"scalar",repeat:2,T:9}])}create(e){const t=globalThis.Object.create(this.messagePrototype);return t.identifier=0,t.language=[],void 0!==e&&z(this,t,e),t}internalBinaryRead(e,t,n,a){let s=a??this.create(),i=e.pos+t;for(;e.pos<i;){let[t,a]=e.tag();switch(t){case 1:s.identifier=e.uint32();break;case 2:s.language.push(e.string());break;default:let i=n.readUnknownField;if("throw"===i)throw new globalThis.Error(`Unknown field ${t} (wire type ${a}) for ${this.typeName}`);let r=e.skip(a);!1!==i&&(!0===i?d.onRead:i)(this.typeName,s,t,a,r)}}return s}internalBinaryWrite(e,t,n){0!==e.identifier&&t.tag(1,m.Varint).uint32(e.identifier);for(let n=0;n<e.language.length;n++)t.tag(2,m.LengthDelimited).string(e.language[n]);let a=n.writeUnknownFields;return!1!==a&&(1==a?d.onWrite:a)(this.typeName,e,t),t}};const Re=new class extends se{constructor(){super("com.apple.geo.protobuf.geo.TileSet.CountryRegionTuple",[{no:1,name:"countryCode",kind:"scalar",opt:!0,T:9},{no:2,name:"region",kind:"scalar",opt:!0,T:9}])}create(e){const t=globalThis.Object.create(this.messagePrototype);return void 0!==e&&z(this,t,e),t}internalBinaryRead(e,t,n,a){let s=a??this.create(),i=e.pos+t;for(;e.pos<i;){let[t,a]=e.tag();switch(t){case 1:s.countryCode=e.string();break;case 2:s.region=e.string();break;default:let i=n.readUnknownField;if("throw"===i)throw new globalThis.Error(`Unknown field ${t} (wire type ${a}) for ${this.typeName}`);let r=e.skip(a);!1!==i&&(!0===i?d.onRead:i)(this.typeName,s,t,a,r)}}return s}internalBinaryWrite(e,t,n){void 0!==e.countryCode&&t.tag(1,m.LengthDelimited).string(e.countryCode),void 0!==e.region&&t.tag(2,m.LengthDelimited).string(e.region);let a=n.writeUnknownFields;return!1!==a&&(1==a?d.onWrite:a)(this.typeName,e,t),t}};var Ee,ge,Se,be,Oe,ke;new class extends se{constructor(){super("com.apple.geo.protobuf.geo.SupportedTileSets",[{no:1,name:"SupportedTileSets",kind:"message",jsonName:"SupportedTileSets",repeat:2,T:()=>fe}])}create(e){const t=globalThis.Object.create(this.messagePrototype);return t.supportedTileSets=[],void 0!==e&&z(this,t,e),t}internalBinaryRead(e,t,n,a){let s=a??this.create(),i=e.pos+t;for(;e.pos<i;){let[t,a]=e.tag();if(1===t)s.supportedTileSets.push(fe.internalBinaryRead(e,e.uint32(),n));else{let i=n.readUnknownField;if("throw"===i)throw new globalThis.Error(`Unknown field ${t} (wire type ${a}) for ${this.typeName}`);let r=e.skip(a);!1!==i&&(!0===i?d.onRead:i)(this.typeName,s,t,a,r)}}return s}internalBinaryWrite(e,t,n){for(let a=0;a<e.supportedTileSets.length;a++)fe.internalBinaryWrite(e.supportedTileSets[a],t.tag(1,m.LengthDelimited).fork(),n).join();let a=n.writeUnknownFields;return!1!==a&&(1==a?d.onWrite:a)(this.typeName,e,t),t}},function(e){e[e.RESOURCE_FILTER_SCALE_UNKNOWN=0]="RESOURCE_FILTER_SCALE_UNKNOWN",e[e.RESOURCE_FILTER_SCALE_1X=1]="RESOURCE_FILTER_SCALE_1X",e[e.RESOURCE_FILTER_SCALE_2X=2]="RESOURCE_FILTER_SCALE_2X",e[e.RESOURCE_FILTER_SCALE_3X=3]="RESOURCE_FILTER_SCALE_3X"}(Ee||(Ee={})),function(e){e[e.RESOURCE_FILTER_SCENARIO_UNKNOWN=0]="RESOURCE_FILTER_SCENARIO_UNKNOWN",e[e.RESOURCE_FILTER_SCENARIO_CARPLAY=1]="RESOURCE_FILTER_SCENARIO_CARPLAY",e[e.RESOURCE_FILTER_SCENARIO_NAVIGATION=2]="RESOURCE_FILTER_SCENARIO_NAVIGATION",e[e.RESOURCE_FILTER_SCENARIO_HIGHVISIBILITY=3]="RESOURCE_FILTER_SCENARIO_HIGHVISIBILITY",e[e.RESOURCE_FILTER_SCENARIO_EXPLICIT=4]="RESOURCE_FILTER_SCENARIO_EXPLICIT"}(ge||(ge={})),function(e){e[e.STYLESHEET=0]="STYLESHEET",e[e.TEXTURE=1]="TEXTURE",e[e.FONT=2]="FONT",e[e.ICON=3]="ICON",e[e.XML=4]="XML",e[e.ATTRIBUTION_LOGO=5]="ATTRIBUTION_LOGO",e[e.ATTRIBUTION_BADGE=6]="ATTRIBUTION_BADGE",e[e.OTHER=7]="OTHER"}(Se||(Se={})),function(e){e[e.RESOURCE_DOWNLOAD_CONNECTION_TYPE_UNKNOWN=0]="RESOURCE_DOWNLOAD_CONNECTION_TYPE_UNKNOWN",e[e.RESOURCE_DOWNLOAD_CONNECTION_TYPE_CELLULAR=1]="RESOURCE_DOWNLOAD_CONNECTION_TYPE_CELLULAR",e[e.RESOURCE_DOWNLOAD_CONNECTION_TYPE_PREFER_WIFI=2]="RESOURCE_DOWNLOAD_CONNECTION_TYPE_PREFER_WIFI",e[e.RESOURCE_DOWNLOAD_CONNECTION_TYPE_WIFI_ONLY=3]="RESOURCE_DOWNLOAD_CONNECTION_TYPE_WIFI_ONLY"}(be||(be={})),function(e){e[e.SHA1=0]="SHA1",e[e.CMS=1]="CMS"}(Oe||(Oe={})),function(e){e[e.VERSIONED=0]="VERSIONED",e[e.ETAG=1]="ETAG"}(ke||(ke={}));const ye=new class extends se{constructor(){super("com.apple.geo.protobuf.geo.RegionalResource",[{no:1,name:"x",kind:"scalar",T:13},{no:2,name:"y",kind:"scalar",T:13},{no:3,name:"z",kind:"scalar",T:13},{no:4,name:"icon",kind:"scalar",repeat:2,T:9},{no:6,name:"attribution",kind:"message",repeat:1,T:()=>Ce},{no:7,name:"iconChecksum",kind:"scalar",repeat:2,T:9},{no:29,name:"tileRange",kind:"message",repeat:1,T:()=>pe},{no:30,name:"validSubManifestVersion",kind:"scalar",repeat:1,T:13}])}};const Ae=new class extends se{constructor(){super("com.apple.geo.protobuf.geo.RegionalResourceIndex",[])}};new class extends se{constructor(){super("com.apple.geo.protobuf.geo.RegionalResourceTile",[])}};new class extends se{constructor(){super("com.apple.geo.protobuf.geo.RegionalResourceRegion",[])}};const Ie=new class extends se{constructor(){super("com.apple.geo.protobuf.geo.TileGroup",[{no:1,name:"identifier",kind:"scalar",T:13},{no:2,name:"tileSet",kind:"message",repeat:1,T:()=>_e},{no:3,name:"styleSheetIndex",kind:"scalar",repeat:2,T:13},{no:4,name:"textureIndex",kind:"scalar",repeat:2,T:13},{no:5,name:"fontIndex",kind:"scalar",repeat:2,T:13},{no:6,name:"iconIndex",kind:"scalar",repeat:2,T:13},{no:7,name:"regionalResourceIndex",kind:"message",repeat:1,T:()=>Ae},{no:8,name:"xmlIndex",kind:"scalar",repeat:2,T:13},{no:10,name:"attributionIndex",kind:"scalar",repeat:2,T:13},{no:11,name:"hybridUnavailableRegion",kind:"message",repeat:1,T:()=>pe},{no:12,name:"resourceIndex",kind:"scalar",repeat:2,T:13},{no:14,name:"muninVersion",kind:"scalar",T:13},{no:15,name:"offlineMetadataIndex",kind:"scalar",T:13}])}};const _e=new class extends se{constructor(){super("com.apple.geo.protobuf.geo.TileGroup.VersionedTileSet",[{no:1,name:"tileSetIndex",kind:"scalar",T:13},{no:2,name:"identifier",kind:"scalar",T:13}])}};const Ne=new class extends se{constructor(){super("com.apple.geo.protobuf.geo.ResourceFilter",[{no:1,name:"scale",kind:"enum",repeat:1,T:()=>["com.apple.geo.protobuf.geo.ResourceFilter.Scale",Ee]},{no:2,name:"scenario",kind:"enum",repeat:1,T:()=>["com.apple.geo.protobuf.geo.ResourceFilter.Scenario",ge]}])}};const Le=new class extends se{constructor(){super("com.apple.geo.protobuf.geo.Resource",[{no:1,name:"resourceType",kind:"enum",T:()=>["com.apple.geo.protobuf.geo.Resource.ResourceType",Se,"RESOURCE_TYPE_"]},{no:2,name:"filename",kind:"scalar",T:9},{no:3,name:"checksum",kind:"scalar",T:12},{no:4,name:"region",kind:"message",repeat:1,T:()=>pe},{no:5,name:"filter",kind:"message",repeat:1,T:()=>Ne},{no:6,name:"connectionType",kind:"enum",opt:!0,T:()=>["com.apple.geo.protobuf.geo.Resource.ConnectionType",be]},{no:7,name:"preferWiFiAllowedStaleThreshold",kind:"scalar",opt:!0,T:13},{no:8,name:"validationMethod",kind:"enum",T:()=>["com.apple.geo.protobuf.geo.Resource.ValidationMethod",Oe]},{no:9,name:"alternateResourceURLIndex",kind:"scalar",opt:!0,T:13},{no:10,name:"updateMethod",kind:"enum",T:()=>["com.apple.geo.protobuf.geo.Resource.UpdateMethod",ke]},{no:11,name:"timeToLiveSeconds",kind:"scalar",opt:!0,T:13}])}};const Ce=new class extends se{constructor(){super("com.apple.geo.protobuf.geo.Attribution",[{no:1,name:"badge",kind:"scalar",opt:!0,T:9},{no:2,name:"logo",kind:"scalar",opt:!0,T:9},{no:3,name:"name",kind:"scalar",T:9},{no:4,name:"url",kind:"scalar",T:9},{no:5,name:"badgeChecksum",kind:"scalar",opt:!0,T:9},{no:6,name:"logoChecksum",kind:"scalar",opt:!0,T:9},{no:7,name:"resource",kind:"message",repeat:1,T:()=>Le},{no:8,name:"region",kind:"message",repeat:1,T:()=>pe},{no:9,name:"dataSet",kind:"scalar",opt:!0,T:13},{no:10,name:"linkDisplayStringIndex",kind:"scalar",opt:!0,T:13},{no:11,name:"plainTextURL",kind:"scalar",opt:!0,T:9},{no:12,name:"plainTextURLSHA256Checksum",kind:"scalar",opt:!0,T:12}])}};const Ue=new class extends se{constructor(){super("com.apple.geo.protobuf.geo.ServiceVersion",[{no:1,name:"versionDomain",kind:"scalar",repeat:2,T:9},{no:2,name:"minimumVersion",kind:"scalar",T:13}])}};const we=new class extends se{constructor(){super("com.apple.geo.protobuf.geo.VersionManifest",[{no:1,name:"serviceVersion",kind:"message",repeat:1,T:()=>Ue}])}};const ve=new class extends se{constructor(){super("com.apple.geo.protobuf.geo.DataSetDescription",[{no:1,name:"identifier",kind:"scalar",T:13},{no:2,name:"dataSetDescription",kind:"scalar",T:9}])}};const De=new class extends se{constructor(){super("com.apple.geo.protobuf.geo.DataSetURLOverride",[])}};const Ve=new class extends se{constructor(){super("com.apple.geo.protobuf.geo.MuninVersion",[])}};const xe=new class extends se{constructor(){super("com.apple.geo.protobuf.geo.URLInfo",[{no:1,name:"url",kind:"scalar",T:9},{no:2,name:"useAuthProxy",kind:"scalar",opt:!0,T:8},{no:3,name:"supportsMultipathTCP",kind:"scalar",T:8},{no:4,name:"alternativeMultipathTCPPort",kind:"scalar",opt:!0,T:13}])}};const Pe=new class extends se{constructor(){super("com.apple.geo.protobuf.geo.URLInfoSet",[{no:1,name:"dataSet",kind:"scalar",opt:!0,T:13},{no:2,name:"resourcesURL",kind:"message",T:()=>xe},{no:3,name:"searchAttributionManifestURL",kind:"message",T:()=>xe},{no:4,name:"directionsURL",kind:"message",T:()=>xe},{no:5,name:"etaURL",kind:"message",T:()=>xe},{no:6,name:"batchReverseGeocoderURL",kind:"message",T:()=>xe},{no:7,name:"simpleETAURL",kind:"message",T:()=>xe},{no:8,name:"addressCorrectionInitURL",kind:"message",T:()=>xe},{no:9,name:"addressCorrectionUpdateURL",kind:"message",T:()=>xe},{no:10,name:"polyLocationShiftURL",kind:"message",T:()=>xe},{no:11,name:"problemSubmissionURL",kind:"message",T:()=>xe},{no:12,name:"problemStatusURL",kind:"message",T:()=>xe},{no:13,name:"reverseGeocoderVersionsURL",kind:"message",T:()=>xe},{no:14,name:"problemCategoriesURL",kind:"message",T:()=>xe},{no:15,name:"announcementsURL",kind:"message",T:()=>xe},{no:16,name:"dispatcherURL",kind:"message",T:()=>xe},{no:17,name:"problemOptInURL",kind:"message",T:()=>xe},{no:18,name:"abExperimentURL",kind:"message",T:()=>xe},{no:19,name:"businessPortalBaseURL",kind:"message",T:()=>xe},{no:20,name:"logMessageUsageURL",kind:"message",T:()=>xe},{no:21,name:"spatialLookupURL",kind:"message",T:()=>xe},{no:22,name:"realtimeTrafficProbeURL",kind:"message",T:()=>xe},{no:23,name:"batchTrafficProbeURL",kind:"message",T:()=>xe},{no:24,name:"proactiveRoutingURL",kind:"message",T:()=>xe},{no:25,name:"logMessageUsageV3URL",kind:"message",T:()=>xe},{no:26,name:"backgroundDispatcherURL",kind:"message",T:()=>xe},{no:27,name:"bluePOIDispatcherURL",kind:"message",T:()=>xe},{no:28,name:"backgroundRevGeoURL",kind:"message",T:()=>xe},{no:29,name:"wifiConnectionQualityProbeURL",kind:"message",T:()=>xe},{no:30,name:"muninBaseURL",kind:"message",T:()=>xe},{no:31,name:"authProxyURL",kind:"message",T:()=>xe},{no:32,name:"wifiQualityURL",kind:"message",T:()=>xe},{no:33,name:"feedbackSubmissionURL",kind:"message",T:()=>xe},{no:34,name:"feedbackLookupURL",kind:"message",T:()=>xe},{no:35,name:"junctionImageServiceURL",kind:"message",T:()=>xe},{no:36,name:"analyticsCohortSessionURL",kind:"message",T:()=>xe},{no:37,name:"analyticsLongSessionURL",kind:"message",T:()=>xe},{no:38,name:"analyticsShortSessionURL",kind:"message",T:()=>xe},{no:39,name:"analyticsSessionlessURL",kind:"message",T:()=>xe},{no:40,name:"webModuleBaseURL",kind:"message",T:()=>xe},{no:41,name:"wifiQualityTileURL",kind:"message",T:()=>xe},{no:42,name:"alternateResourcesURL",kind:"message",repeat:1,T:()=>xe},{no:43,name:"tokenAuthenticationURL",kind:"message",T:()=>xe},{no:44,name:"authenticatedClientFeatureFlagURL",kind:"message",T:()=>xe},{no:45,name:"addressCorrectionTaggedLocationURL",kind:"message",T:()=>xe},{no:46,name:"proactiveAppClipURL",kind:"message",T:()=>xe},{no:47,name:"enrichmentSubmissionURL",kind:"message",T:()=>xe},{no:48,name:"ugcLogDiscardURL",kind:"message",T:()=>xe},{no:49,name:"batchReverseGeocoderPlaceRequestURL",kind:"message",T:()=>xe},{no:50,name:"pressureProbeDataURL",kind:"message",T:()=>xe},{no:51,name:"poiBusynessActivityCollectionURL",kind:"message",T:()=>xe},{no:52,name:"rapWebBundleURL",kind:"message",T:()=>xe},{no:53,name:"networkSelectionHarvestURL",kind:"message",T:()=>xe},{no:54,name:"offlineDataBatchListURL",kind:"message",T:()=>xe},{no:55,name:"offlineDataSizeURL",kind:"message",T:()=>xe},{no:56,name:"offlineDataDownloadBaseURL",kind:"message",T:()=>xe},{no:57,name:"bcxDispatcherURL",kind:"message",T:()=>xe}])}};const Xe=new class extends se{constructor(){super("com.apple.geo.protobuf.geo.MuninBucket",[{no:3,name:"bucketID",kind:"scalar",T:13},{no:4,name:"bucketURL",kind:"scalar",T:9},{no:5,name:"lodLevel",kind:"scalar",opt:!0,T:13}])}};const Be=new class extends se{constructor(){super("com.apple.geo.protobuf.geo.DisplayString",[{no:1,name:"localizedString",kind:"message",repeat:1,T:()=>Fe}])}};const Fe=new class extends se{constructor(){super("com.apple.geo.protobuf.geo.LocalizedString",[{no:1,name:"locale",kind:"scalar",T:9},{no:3,name:"stringValue",kind:"scalar",T:9}])}};const Me=new class extends se{constructor(){super("com.apple.geo.protobuf.geo.MapRegion",[])}};const Ye=new class extends se{constructor(){super("com.apple.geo.protobuf.geo.OfflineMetadata",[{no:1,name:"dataVersion",kind:"scalar",T:4,L:2},{no:2,name:"regulatoryRegionId",kind:"scalar",T:13}])}};const $e=new class extends se{constructor(){super("com.apple.geo.protobuf.geo.Resources",[{no:1,name:"tileGroup",kind:"message",repeat:1,T:()=>Ie},{no:2,name:"tileSet",kind:"message",repeat:1,T:()=>fe},{no:3,name:"styleSheet",kind:"scalar",repeat:2,T:9},{no:4,name:"texture",kind:"scalar",repeat:2,T:9},{no:5,name:"font",kind:"scalar",repeat:2,T:9},{no:6,name:"icon",kind:"scalar",repeat:2,T:9},{no:8,name:"regionalResource",kind:"message",repeat:1,T:()=>ye},{no:9,name:"xml",kind:"scalar",repeat:2,T:9},{no:11,name:"attribution",kind:"message",repeat:1,T:()=>Ce},{no:30,name:"authToken",kind:"scalar",T:9},{no:31,name:"resourcesURL",kind:"scalar",opt:!0,T:9},{no:32,name:"searchURL",kind:"scalar",opt:!0,T:9},{no:33,name:"searchAttributionManifestURL",kind:"scalar",opt:!0,T:9},{no:34,name:"autocompleteURL",kind:"scalar",opt:!0,T:9},{no:35,name:"reverseGeocoderURL",kind:"scalar",opt:!0,T:9},{no:36,name:"forwardGeocoderURL",kind:"scalar",opt:!0,T:9},{no:37,name:"directionsURL",kind:"scalar",opt:!0,T:9},{no:38,name:"etaURL",kind:"scalar",opt:!0,T:9},{no:39,name:"locationShiftURL",kind:"scalar",opt:!0,T:9},{no:40,name:"releaseInfo",kind:"scalar",T:9},{no:41,name:"batchReverseGeocoderURL",kind:"scalar",opt:!0,T:9},{no:42,name:"mapMatchURL",kind:"scalar",opt:!0,T:9},{no:43,name:"simpleETAURL",kind:"scalar",opt:!0,T:9},{no:44,name:"styleSheetChecksum",kind:"scalar",repeat:2,T:9},{no:45,name:"textureChecksum",kind:"scalar",repeat:2,T:9},{no:46,name:"fontChecksum",kind:"scalar",repeat:2,T:9},{no:47,name:"iconChecksum",kind:"scalar",repeat:2,T:9},{no:48,name:"xmlChecksum",kind:"scalar",repeat:2,T:9},{no:49,name:"addressCorrectionInitURL",kind:"scalar",opt:!0,T:9},{no:50,name:"addressCorrectionUpdateURL",kind:"scalar",opt:!0,T:9},{no:51,name:"polyLocationShiftURL",kind:"scalar",opt:!0,T:9},{no:52,name:"problemSubmissionURL",kind:"scalar",opt:!0,T:9},{no:53,name:"problemStatusURL",kind:"scalar",opt:!0,T:9},{no:54,name:"reverseGeocoderVersionsURL",kind:"scalar",opt:!0,T:9},{no:55,name:"problemCategoriesURL",kind:"scalar",opt:!0,T:9},{no:56,name:"usageURL",kind:"scalar",opt:!0,T:9},{no:58,name:"businessCallerIDURL",kind:"scalar",opt:!0,T:9},{no:59,name:"problemNotificationAvailabilityURL",kind:"scalar",opt:!0,T:9},{no:61,name:"announcementsURL",kind:"scalar",opt:!0,T:9},{no:62,name:"announcementsSupportedLanguage",kind:"scalar",repeat:2,T:9},{no:63,name:"businessNameResolutionURL",kind:"scalar",opt:!0,T:9},{no:64,name:"dispatcherURL",kind:"scalar",opt:!0,T:9},{no:65,name:"problemOptInURL",kind:"scalar",opt:!0,T:9},{no:66,name:"versionManifest",kind:"message",T:()=>we},{no:67,name:"abExperimentURL",kind:"scalar",opt:!0,T:9},{no:68,name:"businessPortalBaseURL",kind:"scalar",opt:!0,T:9},{no:69,name:"logMessageUsageURL",kind:"scalar",opt:!0,T:9},{no:70,name:"locationShiftEnabledRegion",kind:"message",repeat:1,T:()=>Me},{no:71,name:"locationShiftVersion",kind:"scalar",opt:!0,T:13},{no:72,name:"resource",kind:"message",repeat:1,T:()=>Le},{no:73,name:"spatialLookupURL",kind:"scalar",opt:!0,T:9},{no:74,name:"dataSet",kind:"message",repeat:1,T:()=>ve},{no:75,name:"dataSetURLOverride",kind:"message",repeat:1,T:()=>De},{no:77,name:"realtimeTrafficProbeURL",kind:"scalar",opt:!0,T:9},{no:78,name:"batchTrafficProbeURL",kind:"scalar",opt:!0,T:9},{no:79,name:"proactiveRoutingURL",kind:"scalar",opt:!0,T:9},{no:80,name:"logMessageUsageV3URL",kind:"scalar",opt:!0,T:9},{no:81,name:"backgroundDispatcherURL",kind:"scalar",opt:!0,T:9},{no:82,name:"bluePOIDispatcherURL",kind:"scalar",opt:!0,T:9},{no:83,name:"backgroundRevGeoURL",kind:"scalar",opt:!0,T:9},{no:85,name:"wifiConnectionQualityProbeURL",kind:"scalar",opt:!0,T:9},{no:88,name:"muninBaseURL",kind:"scalar",opt:!0,T:9},{no:89,name:"muninVersion",kind:"message",repeat:1,T:()=>Ve},{no:91,name:"authProxyURL",kind:"scalar",opt:!0,T:9},{no:92,name:"urlInfoSet",kind:"message",repeat:1,T:()=>Pe},{no:93,name:"muninBucket",kind:"message",repeat:1,T:()=>Xe},{no:94,name:"displayString",kind:"message",repeat:1,T:()=>Be},{no:95,name:"offlineMetadata",kind:"message",repeat:1,T:()=>Ye}])}};new class extends se{constructor(){super("com.apple.geo.protobuf.geo.ResourceManifestDownload",[{no:1,name:"resources",kind:"message",T:()=>$e}])}};class Ge{static Name="GEOResourceManifestDownload";static Version="1.0.9";static Author="Virgil Clyne";static decode(e=new Uint8Array([])){s("â˜‘ï¸ GEOResourceManifestDownload.decode","");const t=$e.fromBinary(e);return void 0!==t.tileSet&&(t.tileSet=t.tileSet.map((e=>(void 0!==e.style&&(e.style=ce[e.style]),void 0!==e.validVersion&&(e.validVersion=e.validVersion.map((e=>(void 0!==e.genericTile&&(e.genericTile=e.genericTile.map((e=>(void 0!==e.tileType&&(e.tileType=de[e.tileType]),e)))),e)))),void 0!==e.scale&&(e.scale=le[e.scale]),void 0!==e.size&&(e.size=ue[e.size]),void 0!==e.updateBehavior&&(e.updateBehavior=ie[e.updateBehavior]),void 0!==e.checksumType&&(e.checksumType=re[e.checksumType]),void 0!==e.requestStyle&&(e.requestStyle=oe[e.requestStyle]),e)))),void 0!==t.attribution&&(t.attribution=t.attribution.map((e=>(void 0!==e.resource&&(e.resource=e.resource.map((e=>(void 0!==e.resourceType&&(e.resourceType=Se[e.resourceType]),void 0!==e.filter&&(e.filter=e.filter.map((e=>(void 0!==e.scale&&(e.scale=e.scale.map((e=>Ee[e]))),void 0!==e.scenario&&(e.scenario=e.scenario.map((e=>ge[e]))),e)))),void 0!==e.connectionType&&(e.connectionType=be[e.connectionType]),void 0!==e.validationMethod&&(e.validationMethod=Oe[e.validationMethod]),void 0!==e.updateMethod&&(e.updateMethod=ke[e.updateMethod]),e)))),e)))),void 0!==t.resource&&(t.resource=t.resource.map((e=>(void 0!==e.resourceType&&(e.resourceType=Se[e.resourceType]),void 0!==e.filter&&(e.filter=e.filter.map((e=>(void 0!==e.scale&&(e.scale=e.scale.map((e=>Ee[e]))),void 0!==e.scenario&&(e.scenario=e.scenario.map((e=>ge[e]))),e)))),void 0!==e.connectionType&&(e.connectionType=be[e.connectionType]),void 0!==e.validationMethod&&(e.validationMethod=Oe[e.validationMethod]),void 0!==e.updateMethod&&(e.updateMethod=ke[e.updateMethod]),e)))),s("âœ… GEOResourceManifestDownload.decode",""),t}static encode(e={}){s("â˜‘ï¸ GEOResourceManifestDownload.encode",""),void 0!==e.tileSet&&(e.tileSet=e.tileSet.map((e=>(void 0!==e.style&&(e.style=ce[e.style]),void 0!==e.validVersion&&(e.validVersion=e.validVersion.map((e=>(void 0!==e.genericTile&&(e.genericTile=e.genericTile.map((e=>(void 0!==e.tileType&&(e.tileType=de[e.tileType]),e)))),e)))),void 0!==e.scale&&(e.scale=le[e.scale]),void 0!==e.size&&(e.size=ue[e.size]),void 0!==e.updateBehavior&&(e.updateBehavior=ie[e.updateBehavior]),void 0!==e.checksumType&&(e.checksumType=re[e.checksumType]),void 0!==e.requestStyle&&(e.requestStyle=oe[e.requestStyle]),e)))),void 0!==e.attribution&&(e.attribution=e.attribution.map((e=>(void 0!==e.resource&&(e.resource=e.resource.map((e=>(void 0!==e.resourceType&&(e.resourceType=Se[e.resourceType]),void 0!==e.filter&&(e.filter=e.filter.map((e=>(void 0!==e.scale&&(e.scale=e.scale.map((e=>Ee[e]))),void 0!==e.scenario&&(e.scenario=e.scenario.map((e=>ge[e]))),e)))),void 0!==e.connectionType&&(e.connectionType=be[e.connectionType]),void 0!==e.validationMethod&&(e.validationMethod=Oe[e.validationMethod]),void 0!==e.updateMethod&&(e.updateMethod=ke[e.updateMethod]),e)))),e)))),void 0!==e.resource&&(e.resource=e.resource.map((e=>(void 0!==e.resourceType&&(e.resourceType=Se[e.resourceType]),void 0!==e.filter&&(e.filter=e.filter.map((e=>(void 0!==e.scale&&(e.scale=e.scale.map((e=>Ee[e]))),void 0!==e.scenario&&(e.scenario=e.scenario.map((e=>ge[e]))),e)))),void 0!==e.connectionType&&(e.connectionType=be[e.connectionType]),void 0!==e.validationMethod&&(e.validationMethod=Oe[e.validationMethod]),void 0!==e.updateMethod&&(e.updateMethod=ke[e.updateMethod]),e))));const t=$e.toBinary(e);return s("âœ… GEOResourceManifestDownload.encode",""),t}}class Ze{static Name="GEOResourceManifest";static Version="1.2.4";static Author="Virgil Clyne";static async downloadResourceManifest(t=$request,n="CN"){s("â˜‘ï¸ Download ResourceManifest","");const i={...t};return i.url=new URL(i.url),i.url.searchParams.set("country_code",n),i.url=i.url.toString(),i["binary-mode"]=!0,a(i).then((t=>{let n="Quantumult X"===e?new Uint8Array(t.bodyBytes??[]):t.body??new Uint8Array;return s("âœ… Download ResourceManifest",""),{ETag:t.headers?.Etag??t.headers?.etag,body:Ge.decode(n)}}))}static cacheResourceManifest(e={},t={},a="CN",i=""){switch(s("â˜‘ï¸ Cache ResourceManifest",""),a){case"CN":i!==t?.CN?.ETag&&(t.CN={...e,ETag:i},n.setItem("@iRingo.Maps.Caches",t),s("âœ… Cache ResourceManifest",""));break;case"KR":i!==t?.KR?.ETag&&(t.KR={...e,ETag:i},n.setItem("@iRingo.Maps.Caches",t),s("âœ… Cache ResourceManifest",""));break;default:i!==t?.XX?.ETag&&(t.XX={...e,ETag:i},n.setItem("@iRingo.Maps.Caches",t),s("âœ… Cache ResourceManifest",""))}}static tileSets(e=[],t={},n={},a="CN"){if(s("â˜‘ï¸ Set TileSets",""),"CN"===a)t.XX.tileSet.forEach((n=>{t.CN.tileSet.some((e=>e.style===n.style))||(s(`âš ï¸ Missing style: ${n?.style}`,""),delete n.dataSet,e.push(n))}));else t.CN.tileSet.forEach((n=>{t.XX.tileSet.some((e=>e.style===n.style))||(s(`âš ï¸ Missing style: ${n?.style}`,""),n.dataSet=0,e.push(n))}));return e=e.map(((e,a)=>{switch(e.style){case"VECTOR_STANDARD":case"RASTER_TERRAIN":case"VECTOR_BUILDINGS":case"VECTOR_ROADS":case"VECTOR_VENUES":case"VECTOR_TRANSIT":case"VECTOR_ROAD_NETWORK":case"VECTOR_TRANSIT_SELECTION":case"VECTOR_STREET_LANDMARKS":case"VECTOR_BUILDINGS_V2":case"VECTOR_TRAFFIC_SEGMENTS_FOR_RASTER":case"VECTOR_TRAFFIC_INCIDENTS_FOR_RASTER":case"VECTOR_TRAFFIC_SEGMENTS_AND_INCIDENTS_FOR_RASTER":case"VECTOR_TRAFFIC":case"VECTOR_TRAFFIC_SKELETON":case"VECTOR_TRAFFIC_WITH_GREEN":case"VECTOR_TRAFFIC_STATIC":case"VECTOR_TRAFFIC_SKELETON_WITH_HISTORICAL":case"VECTOR_TRAFFIC_V2":case"VECTOR_POI":case"VECTOR_STREET_POI":case"VECTOR_POI_V2":case"VECTOR_POLYGON_SELECTION":case"POI_BUSYNESS":case"POI_DP_BUSYNESS":case"VECTOR_POI_V2_UPDATE":case"VECTOR_REALISTIC":case"VECTOR_COVERAGE":case"VECTOR_LAND_COVER":case"SMART_DATA_MODE":case"VECTOR_TOPOGRAPHIC":case"VECTOR_ROAD_SELECTION":case"VECTOR_REGION_METADATA":break;case"RASTER_SATELLITE":case"RASTER_SATELLITE_NIGHT":case"RASTER_SATELLITE_DIGITIZE":case"RASTER_SATELLITE_ASTC":case"RASTER_SATELLITE_POLAR":case"RASTER_SATELLITE_POLAR_NIGHT":switch(n.TileSet.Satellite){case"HYBRID":default:break;case"CN":e=t?.CN?.tileSet?.find((t=>t.style===e.style&&t.scale===e.scale&&t.size===e.size))||t?.CN?.tileSet?.find((t=>t.style===e.style&&t.scale===e.scale))||t?.CN?.tileSet?.find((t=>t.style===e.style))||e;break;case"XX":e=t?.XX?.tileSet?.find((t=>t.style===e.style&&t.scale===e.scale&&t.size===e.size))||t?.XX?.tileSet?.find((t=>t.style===e.style&&t.scale===e.scale))||t?.XX?.tileSet?.find((t=>t.style===e.style))||e}break;case"SPUTNIK_METADATA":case"SPUTNIK_C3M":case"SPUTNIK_DSM":case"SPUTNIK_DSM_GLOBAL":case"SPUTNIK_VECTOR_BORDER":case"FLYOVER_C3M_MESH":case"FLYOVER_C3M_JPEG_TEXTURE":case"FLYOVER_C3M_ASTC_TEXTURE":case"FLYOVER_VISIBILITY":case"FLYOVER_SKYBOX":case"FLYOVER_NAVGRAPH":case"FLYOVER_METADATA":switch(n.TileSet.Flyover){case"HYBRID":default:break;case"CN":e=t?.CN?.tileSet?.find((t=>t.style===e.style&&t.scale===e.scale&&t.size===e.size))||t?.CN?.tileSet?.find((t=>t.style===e.style&&t.scale===e.scale))||t?.CN?.tileSet?.find((t=>t.style===e.style))||e;break;case"XX":e=t?.XX?.tileSet?.find((t=>t.style===e.style&&t.scale===e.scale&&t.size===e.size))||t?.XX?.tileSet?.find((t=>t.style===e.style&&t.scale===e.scale))||t?.XX?.tileSet?.find((t=>t.style===e.style))||e}break;case"MUNIN_METADATA":case"VECTOR_SPR_MERCATOR":case"VECTOR_SPR_MODELS":case"VECTOR_SPR_MATERIALS":case"VECTOR_SPR_METADATA":case"VECTOR_SPR_ROADS":case"VECTOR_SPR_STANDARD":case"SPR_ASSET_METADATA":case"VECTOR_SPR_POLAR":case"VECTOR_SPR_MODELS_OCCLUSION":switch(n.TileSet.Munin){case"HYBRID":default:break;case"CN":e=t?.CN?.tileSet?.find((t=>t.style===e.style&&t.scale===e.scale&&t.size===e.size))||t?.CN?.tileSet?.find((t=>t.style===e.style&&t.scale===e.scale))||t?.CN?.tileSet?.find((t=>t.style===e.style))||e;break;case"XX":e=t?.XX?.tileSet?.find((t=>t.style===e.style&&t.scale===e.scale&&t.size===e.size))||t?.XX?.tileSet?.find((t=>t.style===e.style&&t.scale===e.scale))||t?.XX?.tileSet?.find((t=>t.style===e.style))||e}break;default:s(`âš ï¸ default style: ${e?.style}`,""),s(`âš ï¸ default baseURL: ${e?.baseURL}`,"")}return e})).flat(1/0).filter(Boolean),s("âœ… Set TileSets",""),e}static attributions(e=[],t={},n="CN"){switch(s("â˜‘ï¸ Set Attributions",""),n){case"CN":t?.XX?.attribution?.forEach((t=>{e.some((e=>e.name===t.name))||e.unshift(t)}));break;case"KR":t?.KR?.attribution?.forEach((t=>{e.some((e=>e.name===t.name))||e.unshift(t)}));break;default:t?.CN?.attribution?.forEach((t=>{e.some((e=>e.name===t.name))||e.push(t)}))}return e.sort(((e,t)=>{switch(e.name){case"â€Ž":return-1;case"AutoNavi":return 0;default:return 1}})),e=e.map(((e,t)=>{switch(e.name){case"â€Ž":e.name=`ï£¿ iRingo: ðŸ“ GEOResourceManifest\n${new Date}`,delete e.plainTextURLSHA256Checksum;break;case"AutoNavi":e.resource=e.resource.filter((e=>6!==e.resourceType)),e.region=[{minX:214,minY:82,maxX:216,maxY:82,minZ:8,maxZ:21},{minX:213,minY:83,maxX:217,maxY:83,minZ:8,maxZ:21},{minX:213,minY:84,maxX:218,maxY:84,minZ:8,maxZ:21},{minX:213,minY:85,maxX:218,maxY:85,minZ:8,maxZ:21},{minX:212,minY:86,maxX:218,maxY:86,minZ:8,maxZ:21},{minX:189,minY:87,maxX:190,maxY:87,minZ:8,maxZ:21},{minX:210,minY:87,maxX:220,maxY:87,minZ:8,maxZ:21},{minX:188,minY:88,maxX:191,maxY:88,minZ:8,maxZ:21},{minX:210,minY:88,maxX:223,maxY:88,minZ:8,maxZ:21},{minX:188,minY:89,maxX:192,maxY:89,minZ:8,maxZ:21},{minX:210,minY:89,maxX:223,maxY:89,minZ:8,maxZ:21},{minX:186,minY:90,maxX:192,maxY:90,minZ:8,maxZ:21},{minX:210,minY:90,maxX:223,maxY:90,minZ:8,maxZ:21},{minX:209,minY:91,maxX:222,maxY:91,minZ:8,maxZ:21},{minX:186,minY:91,maxX:192,maxY:91,minZ:8,maxZ:21},{minX:184,minY:92,maxX:195,maxY:92,minZ:8,maxZ:21},{minX:207,minY:92,maxX:221,maxY:92,minZ:8,maxZ:21},{minX:185,minY:93,maxX:196,maxY:93,minZ:8,maxZ:21},{minX:206,minY:93,maxX:221,maxY:93,minZ:8,maxZ:21},{minX:185,minY:94,maxX:200,maxY:94,minZ:8,maxZ:21},{minX:203,minY:94,maxX:221,maxY:94,minZ:8,maxZ:21},{minX:182,minY:94,maxX:219,maxY:95,minZ:8,maxZ:21},{minX:180,minY:96,maxX:217,maxY:96,minZ:8,maxZ:21},{minX:180,minY:97,maxX:216,maxY:97,minZ:8,maxZ:21},{minX:180,minY:98,maxX:214,maxY:98,minZ:8,maxZ:21},{minX:180,minY:99,maxX:215,maxY:99,minZ:8,maxZ:21},{minX:182,minY:100,maxX:214,maxY:100,minZ:8,maxZ:21},{minX:183,minY:101,maxX:213,maxY:101,minZ:8,maxZ:21},{minX:184,minY:102,maxX:214,maxY:102,minZ:8,maxZ:21},{minX:183,minY:103,maxX:214,maxY:103,minZ:8,maxZ:21},{minX:184,minY:104,maxX:215,maxY:104,minZ:8,maxZ:21},{minX:185,minY:105,maxX:215,maxY:105,minZ:8,maxZ:21},{minX:187,minY:106,maxX:215,maxY:106,minZ:8,maxZ:21},{minX:189,minY:107,maxX:193,maxY:107,minZ:8,maxZ:21},{minX:197,minY:107,maxX:214,maxY:107,minZ:8,maxZ:21},{minX:198,minY:108,maxX:214,maxY:108,minZ:8,maxZ:21},{minX:110,minY:109,maxX:214,maxY:109,minZ:8,maxZ:21},{minX:197,minY:110,maxX:214,maxY:110,minZ:8,maxZ:21},{minX:198,minY:111,maxX:214,maxY:111,minZ:8,maxZ:21},{minX:204,minY:112,maxX:209,maxY:112,minZ:8,maxZ:21},{minX:213,minY:112,maxX:214,maxY:112,minZ:8,maxZ:21},{minX:205,minY:113,maxX:207,maxY:113,minZ:8,maxZ:21},{minX:205,minY:114,maxX:206,maxY:114,minZ:8,maxZ:21},{minX:204,minY:115,maxX:212,maxY:128,minZ:8,maxZ:21}]}return e})).flat(1/0).filter(Boolean),s("âœ… Set Attributions",""),e}static resources(e=[],t={},n="CN"){if(s("â˜‘ï¸ Set Resources",""),"CN"===n);else t.CN.resource.forEach(((t,n)=>{"POITypeMapping-CN-1.json"===t.filename&&e.push(t),"POITypeMapping-CN-2.json"===t.filename&&e.push(t),"China.cms-lpr"===t.filename&&e.push(t)}));return e}static dataSets(e=[],t={},n="CN"){if(s("â˜‘ï¸ Set DataSets",""),"CN"===n)e=t?.XX?.dataSet;return s("âœ… Set DataSets",""),e}static urlInfoSets(e=[],t={},n={},a="CN"){return s("â˜‘ï¸ Set UrlInfoSets",""),e=e.map(((e,s)=>{switch(a){case"CN":e={...t.XX.urlInfoSet[0],...t.CN.urlInfoSet[0]};break;case"KR":e={...t.KR.urlInfoSet[0],...t.CN.urlInfoSet[0]};break;default:(e={...t.CN.urlInfoSet[0],...t.XX.urlInfoSet[0]}).alternateResourcesURL=t.CN.urlInfoSet[0].alternateResourcesURL,delete e.polyLocationShiftURL}switch(n.Config?.Announcements?.Environment?.default){case"AUTO":default:break;case"CN":e.announcementsURL=t.CN.urlInfoSet[0].announcementsURL;break;case"XX":e.announcementsURL=t.XX.urlInfoSet[0].announcementsURL}switch(n.UrlInfoSet.Dispatcher){case"AUTO":default:break;case"AutoNavi":e.directionsURL=t.CN.urlInfoSet[0].dispatcherURL,e.backgroundDispatcherURL=t.CN.urlInfoSet[0].backgroundDispatcherURL,e.backgroundRevGeoURL=t.CN.urlInfoSet[0].backgroundRevGeoURL,e.batchReverseGeocoderPlaceRequestURL=t.CN.urlInfoSet[0].batchReverseGeocoderPlaceRequestURL;break;case"Apple":e.dispatcherURL=t.XX.urlInfoSet[0].dispatcherURL,e.backgroundDispatcherURL=t.XX.urlInfoSet[0].backgroundDispatcherURL,e.backgroundRevGeoURL=t.XX.urlInfoSet[0].backgroundRevGeoURL,e.batchReverseGeocoderPlaceRequestURL=t.XX.urlInfoSet[0].batchReverseGeocoderPlaceRequestURL}switch(n.UrlInfoSet.Directions){case"AUTO":default:break;case"AutoNavi":e.directionsURL=t.CN.urlInfoSet[0].directionsURL,e.etaURL=t.CN.urlInfoSet[0].etaURL,e.simpleETAURL=t.CN.urlInfoSet[0].simpleETAURL;break;case"Apple":e.directionsURL=t.XX.urlInfoSet[0].directionsURL,e.etaURL=t.XX.urlInfoSet[0].etaURL,e.simpleETAURL=t.XX.urlInfoSet[0].simpleETAURL}switch(n.UrlInfoSet.RAP){case"AUTO":default:case"Apple":e.problemSubmissionURL=t.XX.urlInfoSet[0].problemSubmissionURL,e.problemStatusURL=t.XX.urlInfoSet[0].problemStatusURL,e.problemOptInURL=t.XX.urlInfoSet[0].problemOptInURL,e.feedbackSubmissionURL=t.XX.urlInfoSet[0].feedbackSubmissionURL,e.feedbackLookupURL=t.XX.urlInfoSet[0].feedbackLookupURL;break;case"AutoNavi":e.problemSubmissionURL=t.CN.urlInfoSet[0].problemSubmissionURL,e.problemStatusURL=t.CN.urlInfoSet[0].problemStatusURL,e.feedbackSubmissionURL=t.CN.urlInfoSet[0].feedbackSubmissionURL,e.feedbackLookupURL=t.CN.urlInfoSet[0].feedbackLookupURL}switch(n.UrlInfoSet.LocationShift){case"AUTO":default:break;case"AutoNavi":e.polyLocationShiftURL=t.CN.urlInfoSet[0].polyLocationShiftURL;break;case"Apple":e.polyLocationShiftURL=t.XX.urlInfoSet[0].polyLocationShiftURL}return e})),s("âœ… Set UrlInfoSets",""),e}static muninBuckets(e=[],t={},n={}){switch(s("â˜‘ï¸ Set MuninBuckets",""),n.TileSet.Munin){case"AUTO":default:break;case"CN":e=t.CN.muninBucket;break;case"XX":e=t.XX.muninBucket}return s("âœ… Set MuninBuckets",""),e}static displayStrings(e=[],t={},n="CN"){if(s("â˜‘ï¸ Set DisplayStrings",""),"CN"===n)e=t.XX.displayStrings.map(((e,t)=>e));return s("âœ… Set DisplayStrings",""),e}static SetTileGroups(e={}){return s("â˜‘ï¸ Set TileGroups",""),e.tileGroup=e.tileGroup.map((t=>(s(`ðŸš§ tileGroup.identifier: ${t.identifier}`),t.identifier+=Math.floor(100*Math.random())+1,s(`ðŸš§ tileGroup.identifier: ${t.identifier}`),t.tileSet=e.tileSet.map(((e,t)=>({tileSetIndex:t,identifier:e.validVersion?.[0]?.identifier}))),e.attribution&&(t.attributionIndex=e.attribution.map(((e,t)=>t))),e.resource&&(t.resourceIndex=e.resource.map(((e,t)=>t))),t))),s("âœ… Set TileGroups",""),e}}const je=new URL($request.url);s(`âš  url: ${je.toJSON()}`,"");const Ke=$request.method,He=je.hostname,We=je.pathname;s(`âš  METHOD: ${Ke}, HOST: ${He}, PATH: ${We}`,"");const Je=($response.headers?.["Content-Type"]??$response.headers?.["content-type"])?.split(";")?.[0];s(`âš  FORMAT: ${Je}`,""),(async()=>{const{Settings:a,Caches:c,Configs:l}=o("iRingo",["Location","Maps"],r);switch(s(`âš  Settings.Switch: ${a?.Switch}`,""),a.Switch){case!0:default:let r={};switch(Je){case void 0:case"application/x-www-form-urlencoded":case"text/plain":default:case"application/x-mpegURL":case"application/x-mpegurl":case"application/vnd.apple.mpegurl":case"audio/mpegurl":break;case"text/xml":case"text/html":case"text/plist":case"application/xml":case"application/plist":case"application/x-plist":switch(He){case"gspe1-ssl.ls.apple.com":if("/pep/gcc"===We)if(t.set(c,"pep.gcc",$response.body),n.setItem("@iRingo.Location.Caches",c),"AUTO"===a.PEP.GCC);else $response.body=a.PEP.GCC;break;case"configuration.ls.apple.com":if(BigInt.prototype.toJSON=function(){return this.toString()},r=i.parse($response.body),"/config/defaults"===We){const e=r.plist;e&&(e["com.apple.GEO"].CountryProviders.CN.ShouldEnableLagunaBeach=!0,e["com.apple.GEO"].CountryProviders.CN.DrivingMultiWaypointRoutesEnabled=!0,e["com.apple.GEO"].CountryProviders.CN.EnableClientDrapedVectorPolygons=!0,e["com.apple.GEO"].CountryProviders.CN.GEOAddressCorrectionEnabled=!0,delete e["com.apple.GEO"].CountryProviders.CN.GEOBatchSpatialEventLookupMaxParametersCount,delete e["com.apple.GEO"].CountryProviders.CN.GEOBatchSpatialPlaceLookupMaxParametersCount,e["com.apple.GEO"].CountryProviders.CN.LocalitiesAndLandmarksSupported=!0,e["com.apple.GEO"].CountryProviders.CN.NavigationShowHeadingKey=!0,e["com.apple.GEO"].CountryProviders.CN.POIBusynessDifferentialPrivacy=!0,e["com.apple.GEO"].CountryProviders.CN.POIBusynessRealTime=!0,e["com.apple.GEO"].CountryProviders.CN.TransitPayEnabled=!0,e["com.apple.GEO"].CountryProviders.CN.SupportsOffline=!0,e["com.apple.GEO"].CountryProviders.CN.SupportsCarIntegration=!0,e["com.apple.GEO"].CountryProviders.CN.GEOShouldSpeakWrittenAddresses=!0,e["com.apple.GEO"].CountryProviders.CN.GEOShouldSpeakWrittenPlaceNames=!0,e["com.apple.GEO"].CountryProviders.CN["6694982d2b14e95815e44e970235e230"]=!0,e["com.apple.GEO"].CountryProviders.CN.PedestrianAREnabled=!0,e["com.apple.GEO"].CountryProviders.CN.OpticalHeadingEnabled=!0,e["com.apple.GEO"].CountryProviders.CN.UseCLPedestrianMapMatchedLocations=!0)}$response.body=i.stringify(r)}break;case"text/vtt":case"application/vtt":break;case"text/json":case"application/json":r=JSON.parse($response.body??"{}"),s(`ðŸš§ body: ${JSON.stringify(r)}`,""),$response.body=JSON.stringify(r);break;case"application/protobuf":case"application/x-protobuf":case"application/vnd.google.protobuf":case"application/grpc":case"application/grpc+proto":case"application/octet-stream":let o="Quantumult X"===e?new Uint8Array($response.bodyBytes??[]):$response.body??new Uint8Array;switch(Je){case"application/protobuf":case"application/x-protobuf":case"application/vnd.google.protobuf":case"application/octet-stream":if("gspe35-ssl.ls.apple.com"===He)switch(We){case"/config/announcements":break;case"/geo_manifest/dynamic/config":r=Ge.decode(o);const e=je.searchParams.get("country_code");switch($response.headers?.Etag??$response.headers,e){case"CN":c.CN=r;const{ETag:e,body:t}=await Ze.downloadResourceManifest($request,"US");c.XX=t;break;case"KR":{c.KR=r;const{ETag:e,body:t}=await Ze.downloadResourceManifest($request,"CN");c.CN=t;break}default:{c.XX=r;const{ETag:e,body:t}=await Ze.downloadResourceManifest($request,"CN");c.CN=t;break}}r.tileSet=Ze.tileSets(r.tileSet,c,a,e),r.attribution=Ze.attributions(r.attribution,c,e),r.resource=Ze.resources(r.resource,c,e),r.urlInfoSet=Ze.urlInfoSets(r.urlInfoSet,c,a,e),r.muninBucket=Ze.muninBuckets(r.muninBucket,c,a),s(`ðŸš§ releaseInfo: ${r.releaseInfo}`,""),r=Ze.SetTileGroups(r),o=Ge.encode(r)}}$response.body=o}case!1:}})().catch((t=>function(t){switch(e){case"Surge":case"Loon":case"Stash":case"Egern":case"Shadowrocket":case"Quantumult X":default:s("","â—ï¸æ‰§è¡Œé”™è¯¯!",t,"");break;case"Node.js":s("","â—ï¸æ‰§è¡Œé”™è¯¯!",t.stack,"")}}(t))).finally((()=>function(n={}){switch(e){case"Surge":n.policy&&t.set(n,"headers.X-Surge-Policy",n.policy),s("",`ðŸš© æ‰§è¡Œç»“æŸ! ðŸ•› ${(new Date).getTime()/1e3-$script.startTime} ç§’`,""),$done(n);break;case"Loon":n.policy&&(n.node=n.policy),s("",`ðŸš© æ‰§è¡Œç»“æŸ! ðŸ•› ${(new Date-$script.startTime)/1e3} ç§’`,""),$done(n);break;case"Stash":n.policy&&t.set(n,"headers.X-Stash-Selected-Proxy",encodeURI(n.policy)),s("",`ðŸš© æ‰§è¡Œç»“æŸ! ðŸ•› ${(new Date-$script.startTime)/1e3} ç§’`,""),$done(n);break;case"Egern":case"Shadowrocket":default:s("","ðŸš© æ‰§è¡Œç»“æŸ!",""),$done(n);break;case"Quantumult X":n.policy&&t.set(n,"opts.policy",n.policy),delete n["auto-redirect"],delete n["auto-cookie"],delete n["binary-mode"],delete n.charset,delete n.host,delete n.insecure,delete n.method,delete n.opt,delete n.path,delete n.policy,delete n["policy-descriptor"],delete n.scheme,delete n.sessionIndex,delete n.statusCode,delete n.timeout,n.body instanceof ArrayBuffer?(n.bodyBytes=n.body,delete n.body):ArrayBuffer.isView(n.body)?(n.bodyBytes=n.body.buffer.slice(n.body.byteOffset,n.body.byteLength+n.body.byteOffset),delete n.body):n.body&&delete n.bodyBytes,s("","ðŸš© æ‰§è¡Œç»“æŸ!",""),$done(n);break;case"Node.js":s("","ðŸš© æ‰§è¡Œç»“æŸ!",""),process.exit(1)}}($response)));
