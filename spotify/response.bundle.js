console.log("\uD83C\uDF7F️ DualSubs: \uD83C\uDFB5 Spotify"),console.log("response.bundle.js"),console.log("Version: 1.9.1"),console.log("Date: 2024/10/22 22:46:03"),(()=>{"use strict";let e;var t,n,r,s,i,a,o,l,c,u={},f={};function d(e){var t=f[e];if(void 0!==t)return t.exports;var n=f[e]={exports:{}};return u[e](n,n.exports,d),n.exports}d.rv=function(){return"1.0.14"},d.ruid="bundler=rspack@1.0.14";let h=function(){return"undefined"!=typeof $environment&&$environment["surge-version"]?"Surge":"undefined"!=typeof $environment&&$environment["stash-version"]?"Stash":"undefined"!=typeof module&&module.exports?"Node.js":"undefined"!=typeof $task?"Quantumult X":"undefined"!=typeof $loon?"Loon":"undefined"!=typeof $rocket?"Shadowrocket":"undefined"!=typeof Egern?"Egern":void 0}();class p{static name="Lodash";static version="1.2.2";static about(){return console.log(`
🟧 ${this.name} v${this.version}
`)}static get(e={},t="",n){!Array.isArray(t)&&(t=this.toPath(t));let r=t.reduce((e,t)=>Object(e)[t],e);return void 0===r?n:r}static set(e={},t="",n){return!Array.isArray(t)&&(t=this.toPath(t)),t.slice(0,-1).reduce((e,n,r)=>Object(e[n])===e[n]?e[n]:e[n]=/^\d+$/.test(t[r+1])?[]:{},e)[t[t.length-1]]=n,e}static unset(e={},t=""){return!Array.isArray(t)&&(t=this.toPath(t)),t.reduce((e,n,r)=>r===t.length-1?(delete e[n],!0):Object(e)[n],e)}static toPath(e){return e.replace(/\[(\d+)\]/g,".$1").split(".").filter(Boolean)}static escape(e){let t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};return e.replace(/[&<>"']/g,e=>t[e])}static unescape(e){let t={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"};return e.replace(/&amp;|&lt;|&gt;|&quot;|&#39;/g,e=>t[e])}}class m{static name="Storage";static version="1.1.0";static about(){return g("",`🟧 ${this.name} v${this.version}`,"")}static data=null;static dataFile="box.dat";static #e=/^@(?<key>[^.]+)(?:\.(?<path>.*))?$/;static getItem(e=new String,t=null){let n=t;if(!0===e.startsWith("@")){let{key:t,path:r}=e.match(this.#e)?.groups;e=t;let s=this.getItem(e,{});"object"!=typeof s&&(s={}),n=p.get(s,r);try{n=JSON.parse(n)}catch(e){}}else{switch(h){case"Surge":case"Loon":case"Stash":case"Egern":case"Shadowrocket":n=$persistentStore.read(e);break;case"Quantumult X":n=$prefs.valueForKey(e);break;case"Node.js":this.data=this.#t(this.dataFile),n=this.data?.[e];break;default:n=this.data?.[e]||null}try{n=JSON.parse(n)}catch(e){}}return n??t}static setItem(e=new String,t=new String){let n=!1;if("object"==typeof t)t=JSON.stringify(t);else t=String(t);if(!0===e.startsWith("@")){let{key:r,path:s}=e.match(this.#e)?.groups;e=r;let i=this.getItem(e,{});"object"!=typeof i&&(i={}),p.set(i,s,t),n=this.setItem(e,i)}else switch(h){case"Surge":case"Loon":case"Stash":case"Egern":case"Shadowrocket":n=$persistentStore.write(t,e);break;case"Quantumult X":n=$prefs.setValueForKey(t,e);break;case"Node.js":this.data=this.#t(this.dataFile),this.data[e]=t,this.#n(this.dataFile),n=!0;break;default:n=this.data?.[e]||null}return n}static removeItem(e){let t=!1;if(!0===e.startsWith("@")){let{key:n,path:r}=e.match(this.#e)?.groups;e=n;let s=this.getItem(e);"object"!=typeof s&&(s={}),keyValue=p.unset(s,r),t=this.setItem(e,s)}else switch(h){case"Surge":case"Loon":case"Stash":case"Egern":case"Shadowrocket":case"Node.js":t=!1;break;case"Quantumult X":t=$prefs.removeValueForKey(e);break;default:t=!1}return t}static clear(){let e=!1;switch(h){case"Surge":case"Loon":case"Stash":case"Egern":case"Shadowrocket":case"Node.js":e=!1;break;case"Quantumult X":e=$prefs.removeAllValues();break;default:e=!1}return e}static #t(e){if(!this.isNode())return{};{this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");let t=this.path.resolve(e),n=this.path.resolve(process.cwd(),e),r=this.fs.existsSync(t),s=!r&&this.fs.existsSync(n);if(!r&&!s)return{};try{return JSON.parse(this.fs.readFileSync(r?t:n))}catch(e){return{}}}}static #n(e=this.dataFile){if(this.isNode()){this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");let t=this.path.resolve(e),n=this.path.resolve(process.cwd(),e),r=this.fs.existsSync(t),s=!r&&this.fs.existsSync(n),i=JSON.stringify(this.data);r?this.fs.writeFileSync(t,i):s?this.fs.writeFileSync(n,i):this.fs.writeFileSync(t,i)}}}let g=(...e)=>console.log(e.join("\n")),y={Default:{Settings:{Switch:!0,Type:"Translate",Types:["Official","Translate"],Languages:["EN","ZH"],CacheSize:50},Configs:{breakLine:{"text/xml":"&#x000A;","application/xml":"&#x000A;","text/vtt":"\n","application/vtt":"\n","text/json":"\n","application/json":"\n"}}},Spotify:{Settings:{Switch:!0,CountryCode:"US",Types:["Translate","External"],Languages:["AUTO","ZH"]}}};function T(e=[]){e=e.map(e=>{switch(e?.propertyId?.scope){case"ios-feature-reinventfree":if(e?.propertyId?.name==="is_india_quicksilver_campaign_enabled")e.structuredValue={oneofKind:"boolValue",boolValue:{value:!1}};break;case"ios-liveaudio-livestreampage":if(e?.propertyId?.name==="context_menu_enabled")e.structuredValue={oneofKind:"boolValue",boolValue:{value:!0}}}return e}).filter(Boolean)}function b(e={}){return e["audiobook-onboarding-completed"]={value:{oneofKind:"boolValue",boolValue:!0}},e["has-audiobooks-subscription"]={value:{oneofKind:"boolValue",boolValue:!0}},e["player-license"]={value:{oneofKind:"stringValue",stringValue:"premium"}},e.mobile={value:{oneofKind:"boolValue",boolValue:!0}},e["financial-product"]={value:{oneofKind:"stringValue",stringValue:"pr:premium,tc:0"}},e["premium-mini"]={value:{oneofKind:"boolValue",boolValue:!0}},e["streaming-rules"]={value:{oneofKind:"stringValue",stringValue:""}},e["license-acceptance-grace-days"]={value:{oneofKind:"longValue",longValue:30}},e.name={value:{oneofKind:"stringValue",stringValue:"Spotify Premium"}},e["mobile-login"]={value:{oneofKind:"boolValue",boolValue:!0}},e["hifi-optin-intent"]={value:{oneofKind:"boolValue",boolValue:!0}},e["pick-and-shuffle"]={value:{oneofKind:"boolValue",boolValue:!1}},e["on-demand"]={value:{oneofKind:"boolValue",boolValue:!0}},e.ads={value:{oneofKind:"boolValue",boolValue:!1}},e.catalogue={value:{oneofKind:"stringValue",stringValue:"premium"}},e["high-bitrate"]={value:{oneofKind:"boolValue",boolValue:!0}},e.libspotify={value:{oneofKind:"boolValue",boolValue:!0}},e["nft-disabled"]={value:{oneofKind:"stringValue",stringValue:"1"}},e.shuffle={value:{oneofKind:"boolValue",boolValue:!1}},e["audio-quality"]={value:{oneofKind:"stringValue",stringValue:"1"}},e.offline={value:{oneofKind:"boolValue",boolValue:!0}},e["hifi-eligible"]={value:{oneofKind:"boolValue",boolValue:!0}},e["pause-after"]={value:{oneofKind:"longValue",longValue:0}},e["addon-hifi"]={value:{oneofKind:"boolValue",boolValue:!0}},e.can_use_superbird={value:{oneofKind:"boolValue",boolValue:!0}},e.type={value:{oneofKind:"stringValue",stringValue:"premium"}},e["india-experience"]={value:{oneofKind:"stringValue",stringValue:"1"}},e["loudness-levels"]={value:{oneofKind:"stringValue",stringValue:"1:-9.0,0.0,3.0:-2.0"}},e["payments-initial-campaign"]={value:{oneofKind:"stringValue",stringValue:"web"}},e["shuffle-eligible"]={value:{oneofKind:"boolValue",boolValue:!0}},e.unrestricted={value:{oneofKind:"boolValue",boolValue:!0}},e["com.spotify.madprops.use.ucs.product.state"]={value:{oneofKind:"boolValue",boolValue:!1}},e}!function(e){e.symbol=Symbol.for("protobuf-ts/unknown"),e.onRead=(n,r,s,i,a)=>{(t(r)?r[e.symbol]:r[e.symbol]=[]).push({no:s,wireType:i,data:a})},e.onWrite=(t,n,r)=>{for(let{no:t,wireType:s,data:i}of e.list(n))r.tag(t,s).raw(i)},e.list=(n,r)=>{if(t(n)){let t=n[e.symbol];return r?t.filter(e=>e.no==r):t}return[]},e.last=(t,n)=>e.list(t,n).slice(-1)[0];let t=t=>t&&Array.isArray(t[e.symbol])}(t||(t={}));function S(e,t,n){let r,s;for(let i of e.fields){let e=i.localName;if(i.oneof){let a=n[i.oneof];if((null==a?void 0:a.oneofKind)==void 0)continue;if(r=a[e],(s=t[i.oneof]).oneofKind=a.oneofKind,void 0==r){delete s[e];continue}}else if(r=n[e],s=t,void 0==r)continue;switch(i.repeat&&(s[e].length=r.length),i.kind){case"scalar":case"enum":if(i.repeat)for(let t=0;t<r.length;t++)s[e][t]=r[t];else s[e]=r;break;case"message":let a=i.T();if(i.repeat)for(let t=0;t<r.length;t++)s[e][t]=a.create(r[t]);else void 0===s[e]?s[e]=a.create(r):a.mergePartial(s[e],r);break;case"map":switch(i.V.kind){case"scalar":case"enum":Object.assign(s[e],r);break;case"message":let o=i.V.T();for(let t of Object.keys(r))s[e][t]=o.create(r[t])}}}}!function(e){e[e.Varint=0]="Varint",e[e.Bit64=1]="Bit64",e[e.LengthDelimited=2]="LengthDelimited",e[e.StartGroup=3]="StartGroup",e[e.EndGroup=4]="EndGroup",e[e.Bit32=5]="Bit32"}(n||(n={}));let I=Symbol.for("protobuf-ts/message-type");function E(e){let t=!1,n=[];for(let r=0;r<e.length;r++){let s=e.charAt(r);"_"==s?t=!0:/\d/.test(s)?(n.push(s),t=!0):t?(n.push(s.toUpperCase()),t=!1):0==r?n.push(s.toLowerCase()):n.push(s)}return n.join("")}function N(e){var t,n,r,s;return e.localName=null!==(t=e.localName)&&void 0!==t?t:E(e.name),e.jsonName=null!==(n=e.jsonName)&&void 0!==n?n:E(e.name),e.repeat=null!==(r=e.repeat)&&void 0!==r?r:i.NO,e.opt=null!==(s=e.opt)&&void 0!==s?s:!e.repeat&&!e.oneof&&"message"==e.kind,e}!function(e){e[e.DOUBLE=1]="DOUBLE",e[e.FLOAT=2]="FLOAT",e[e.INT64=3]="INT64",e[e.UINT64=4]="UINT64",e[e.INT32=5]="INT32",e[e.FIXED64=6]="FIXED64",e[e.FIXED32=7]="FIXED32",e[e.BOOL=8]="BOOL",e[e.STRING=9]="STRING",e[e.BYTES=12]="BYTES",e[e.UINT32=13]="UINT32",e[e.SFIXED32=15]="SFIXED32",e[e.SFIXED64=16]="SFIXED64",e[e.SINT32=17]="SINT32",e[e.SINT64=18]="SINT64"}(r||(r={})),!function(e){e[e.BIGINT=0]="BIGINT",e[e.STRING=1]="STRING",e[e.NUMBER=2]="NUMBER"}(s||(s={})),!function(e){e[e.NO=0]="NO",e[e.PACKED=1]="PACKED",e[e.UNPACKED=2]="UNPACKED"}(i||(i={}));class k{constructor(e){var t;this.fields=null!==(t=e.fields)&&void 0!==t?t:[]}prepare(){if(this.data)return;let e=[],t=[],n=[];for(let r of this.fields)if(r.oneof)!n.includes(r.oneof)&&(n.push(r.oneof),e.push(r.oneof),t.push(r.oneof));else switch(t.push(r.localName),r.kind){case"scalar":case"enum":(!r.opt||r.repeat)&&e.push(r.localName);break;case"message":r.repeat&&e.push(r.localName);break;case"map":e.push(r.localName)}this.data={req:e,known:t,oneofs:Object.values(n)}}is(e,t,n=!1){if(t<0)return!0;if(null==e||"object"!=typeof e)return!1;this.prepare();let r=Object.keys(e),s=this.data;if(r.length<s.req.length||s.req.some(e=>!r.includes(e))||!n&&r.some(e=>!s.known.includes(e)))return!1;if(t<1)return!0;for(let r of s.oneofs){let s=e[r];if(!function(e){if("object"!=typeof e||null===e||!e.hasOwnProperty("oneofKind"))return!1;switch(typeof e.oneofKind){case"string":if(void 0===e[e.oneofKind])return!1;return 2==Object.keys(e).length;case"undefined":return 1==Object.keys(e).length;default:return!1}}(s))return!1;if(void 0===s.oneofKind)continue;let i=this.fields.find(e=>e.localName===s.oneofKind);if(!i||!this.field(s[s.oneofKind],i,n,t))return!1}for(let r of this.fields)if(void 0===r.oneof&&!this.field(e[r.localName],r,n,t))return!1;return!0}field(e,t,n,s){let i=t.repeat;switch(t.kind){case"scalar":if(void 0===e)return t.opt;if(i)return this.scalars(e,t.T,s,t.L);return this.scalar(e,t.T,t.L);case"enum":if(void 0===e)return t.opt;if(i)return this.scalars(e,r.INT32,s);return this.scalar(e,r.INT32);case"message":if(void 0===e)break;if(i)return this.messages(e,t.T(),n,s);return this.message(e,t.T(),n,s);case"map":if("object"!=typeof e||null===e)return!1;if(s<2)break;if(!this.mapKeys(e,t.K,s))return!1;switch(t.V.kind){case"scalar":return this.scalars(Object.values(e),t.V.T,s,t.V.L);case"enum":return this.scalars(Object.values(e),r.INT32,s);case"message":return this.messages(Object.values(e),t.V.T(),n,s)}}return!0}message(e,t,n,r){return n?t.isAssignable(e,r):t.is(e,r)}messages(e,t,n,r){if(!Array.isArray(e))return!1;if(r<2)return!0;if(n){for(let n=0;n<e.length&&n<r;n++)if(!t.isAssignable(e[n],r-1))return!1}else for(let n=0;n<e.length&&n<r;n++)if(!t.is(e[n],r-1))return!1;return!0}scalar(e,t,n){let i=typeof e;switch(t){case r.UINT64:case r.FIXED64:case r.INT64:case r.SFIXED64:case r.SINT64:switch(n){case s.BIGINT:return"bigint"==i;case s.NUMBER:return"number"==i&&!isNaN(e);default:return"string"==i}case r.BOOL:return"boolean"==i;case r.STRING:return"string"==i;case r.BYTES:return e instanceof Uint8Array;case r.DOUBLE:case r.FLOAT:return"number"==i&&!isNaN(e);default:return"number"==i&&Number.isInteger(e)}}scalars(e,t,n,r){if(!Array.isArray(e))return!1;if(n<2)return!0;if(Array.isArray(e)){for(let s=0;s<e.length&&s<n;s++)if(!this.scalar(e[s],t,r))return!1}return!0}mapKeys(e,t,n){let i=Object.keys(e);switch(t){case r.INT32:case r.FIXED32:case r.SFIXED32:case r.SINT32:case r.UINT32:return this.scalars(i.slice(0,n).map(e=>parseInt(e)),t,n);case r.BOOL:return this.scalars(i.slice(0,n).map(e=>"true"==e||"false"!=e&&e),t,n);default:return this.scalars(i,t,n,s.STRING)}}}function w(e){let t=typeof e;if("object"==t){if(Array.isArray(e))return"array";if(null===e)return"null"}return t}function O(e){return null!==e&&"object"==typeof e&&!Array.isArray(e)}let A="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),_=[];for(let e=0;e<A.length;e++)_[A[e].charCodeAt(0)]=e;_["-".charCodeAt(0)]=A.indexOf("+"),_["_".charCodeAt(0)]=A.indexOf("/");function R(){let e=0,t=0;for(let n=0;n<28;n+=7){let r=this.buf[this.pos++];if(e|=(127&r)<<n,(128&r)==0)return this.assertBounds(),[e,t]}let n=this.buf[this.pos++];if(e|=(15&n)<<28,t=(112&n)>>4,(128&n)==0)return this.assertBounds(),[e,t];for(let n=3;n<=31;n+=7){let r=this.buf[this.pos++];if(t|=(127&r)<<n,(128&r)==0)return this.assertBounds(),[e,t]}throw Error("invalid varint")}function D(e,t,n){for(let r=0;r<28;r+=7){let s=e>>>r,i=!(s>>>7==0&&0==t),a=(i?128|s:s)&255;if(n.push(a),!i)return}let r=e>>>28&15|(7&t)<<4,s=t>>3!=0;if(n.push((s?128|r:r)&255),!!s){for(let e=3;e<31;e+=7){let r=t>>>e,s=r>>>7!=0,i=(s?128|r:r)&255;if(n.push(i),!s)return}n.push(t>>>31&1)}}function v(e){let t="-"==e[0];t&&(e=e.slice(1));let n=0,r=0;function s(t,s){let i=Number(e.slice(t,s));r*=1e6,(n=1e6*n+i)>=0x100000000&&(r+=n/0x100000000|0,n%=0x100000000)}return s(-24,-18),s(-18,-12),s(-12,-6),s(-6),[t,n,r]}function C(e,t){if(t>>>0<=2097151)return""+(0x100000000*t+(e>>>0));let n=(e>>>24|t<<8)>>>0&0xffffff,r=t>>16&65535,s=(0xffffff&e)+6777216*n+6710656*r,i=n+8147497*r,a=2*r;function o(e,t){let n=e?String(e):"";return t?"0000000".slice(n.length)+n:n}return s>=1e7&&(i+=Math.floor(s/1e7),s%=1e7),i>=1e7&&(a+=Math.floor(i/1e7),i%=1e7),o(a,0)+o(i,a)+o(s,1)}function U(e,t){if(e>=0){for(;e>127;)t.push(127&e|128),e>>>=7;t.push(e)}else{for(let n=0;n<9;n++)t.push(127&e|128),e>>=7;t.push(1)}}function V(){let e=this.buf[this.pos++],t=127&e;if((128&e)==0)return this.assertBounds(),t;if(t|=(127&(e=this.buf[this.pos++]))<<7,(128&e)==0)return this.assertBounds(),t;if(t|=(127&(e=this.buf[this.pos++]))<<14,(128&e)==0)return this.assertBounds(),t;if(t|=(127&(e=this.buf[this.pos++]))<<21,(128&e)==0)return this.assertBounds(),t;t|=(15&(e=this.buf[this.pos++]))<<28;for(let t=5;(128&e)!=0&&t<10;t++)e=this.buf[this.pos++];if((128&e)!=0)throw Error("invalid varint");return this.assertBounds(),t>>>0}function B(e){if(!e)throw Error("BigInt unavailable, see https://github.com/timostamm/protobuf-ts/blob/v1.0.8/MANUAL.md#bigint-support")}!function(){let t=new DataView(new ArrayBuffer(8));e=void 0!==globalThis.BigInt&&"function"==typeof t.getBigInt64&&"function"==typeof t.getBigUint64&&"function"==typeof t.setBigInt64&&"function"==typeof t.setBigUint64?{MIN:BigInt("-9223372036854775808"),MAX:BigInt("9223372036854775807"),UMIN:BigInt("0"),UMAX:BigInt("18446744073709551615"),C:BigInt,V:t}:void 0}();let L=/^-?[0-9]+$/;class x{constructor(e,t){this.lo=0|e,this.hi=0|t}isZero(){return 0==this.lo&&0==this.hi}toNumber(){let e=0x100000000*this.hi+(this.lo>>>0);if(!Number.isSafeInteger(e))throw Error("cannot convert to safe number");return e}}class P extends x{static from(t){if(e)switch(typeof t){case"string":if("0"==t)return this.ZERO;if(""==t)throw Error("string is no integer");t=e.C(t);case"number":if(0===t)return this.ZERO;t=e.C(t);case"bigint":if(!t)return this.ZERO;if(t<e.UMIN)throw Error("signed value for ulong");if(t>e.UMAX)throw Error("ulong too large");return e.V.setBigUint64(0,t,!0),new P(e.V.getInt32(0,!0),e.V.getInt32(4,!0))}else switch(typeof t){case"string":if("0"==t)return this.ZERO;if(t=t.trim(),!L.test(t))throw Error("string is no integer");let[n,r,s]=v(t);if(n)throw Error("signed value for ulong");return new P(r,s);case"number":if(0==t)return this.ZERO;if(!Number.isSafeInteger(t))throw Error("number is no integer");if(t<0)throw Error("signed value for ulong");return new P(t,t/0x100000000)}throw Error("unknown value "+typeof t)}toString(){return e?this.toBigInt().toString():C(this.lo,this.hi)}toBigInt(){return B(e),e.V.setInt32(0,this.lo,!0),e.V.setInt32(4,this.hi,!0),e.V.getBigUint64(0,!0)}}P.ZERO=new P(0,0);class F extends x{static from(t){if(e)switch(typeof t){case"string":if("0"==t)return this.ZERO;if(""==t)throw Error("string is no integer");t=e.C(t);case"number":if(0===t)return this.ZERO;t=e.C(t);case"bigint":if(!t)return this.ZERO;if(t<e.MIN)throw Error("signed long too small");if(t>e.MAX)throw Error("signed long too large");return e.V.setBigInt64(0,t,!0),new F(e.V.getInt32(0,!0),e.V.getInt32(4,!0))}else switch(typeof t){case"string":if("0"==t)return this.ZERO;if(t=t.trim(),!L.test(t))throw Error("string is no integer");let[n,r,s]=v(t);if(n){if(s>0x80000000||0x80000000==s&&0!=r)throw Error("signed long too small")}else if(s>=0x80000000)throw Error("signed long too large");let i=new F(r,s);return n?i.negate():i;case"number":if(0==t)return this.ZERO;if(!Number.isSafeInteger(t))throw Error("number is no integer");return t>0?new F(t,t/0x100000000):new F(-t,-t/0x100000000).negate()}throw Error("unknown value "+typeof t)}isNegative(){return(0x80000000&this.hi)!=0}negate(){let e=~this.hi,t=this.lo;return t?t=~t+1:e+=1,new F(t,e)}toString(){if(e)return this.toBigInt().toString();if(this.isNegative()){let e=this.negate();return"-"+C(e.lo,e.hi)}return C(this.lo,this.hi)}toBigInt(){return B(e),e.V.setInt32(0,this.lo,!0),e.V.setInt32(4,this.hi,!0),e.V.getBigInt64(0,!0)}}function $(e,t){if(!e)throw Error(t)}F.ZERO=new F(0,0);function K(e){if("number"!=typeof e)throw Error("invalid int 32: "+typeof e);if(!Number.isInteger(e)||e>0x7fffffff||e<-0x80000000)throw Error("invalid int 32: "+e)}function j(e){if("number"!=typeof e)throw Error("invalid uint 32: "+typeof e);if(!Number.isInteger(e)||e>0xffffffff||e<0)throw Error("invalid uint 32: "+e)}function W(e){if("number"!=typeof e)throw Error("invalid float 32: "+typeof e);if(Number.isFinite(e)&&(e>34028234663852886e22||e<-34028234663852886e22))throw Error("invalid float 32: "+e)}function M(e,t){switch(t){case s.BIGINT:return e.toBigInt();case s.NUMBER:return e.toNumber();default:return e.toString()}}class G{constructor(e){this.info=e}prepare(){var e;if(void 0===this.fMap)for(let t of(this.fMap={},null!==(e=this.info.fields)&&void 0!==e?e:[]))this.fMap[t.name]=t,this.fMap[t.jsonName]=t,this.fMap[t.localName]=t}assert(e,t,n){if(!e){let e=w(n);throw("number"==e||"boolean"==e)&&(e=n.toString()),Error(`Cannot parse JSON ${e} for ${this.info.typeName}#${t}`)}}read(e,t,n){this.prepare();let i=[];for(let[a,o]of Object.entries(e)){let e;let l=this.fMap[a];if(!l){if(!n.ignoreUnknownFields)throw Error(`Found unknown field while reading ${this.info.typeName} from JSON format. JSON key: ${a}`);continue}let c=l.localName;if(l.oneof){if(null===o&&("enum"!==l.kind||"google.protobuf.NullValue"!==l.T()[0]))continue;if(i.includes(l.oneof))throw Error(`Multiple members of the oneof group "${l.oneof}" of ${this.info.typeName} are present in JSON.`);i.push(l.oneof),e=t[l.oneof]={oneofKind:c}}else e=t;if("map"==l.kind){if(null===o)continue;this.assert(O(o),l.name,o);let t=e[c];for(let[e,i]of Object.entries(o)){let a;switch(this.assert(null!==i,l.name+" map value",null),l.V.kind){case"message":a=l.V.T().internalJsonRead(i,n);break;case"enum":if(!1===(a=this.enum(l.V.T(),i,l.name,n.ignoreUnknownFields)))continue;break;case"scalar":a=this.scalar(i,l.V.T,l.V.L,l.name)}this.assert(void 0!==a,l.name+" map value",i);let o=e;l.K==r.BOOL&&(o="true"==o||"false"!=o&&o),t[o=this.scalar(o,l.K,s.STRING,l.name).toString()]=a}}else if(l.repeat){if(null===o)continue;this.assert(Array.isArray(o),l.name,o);let t=e[c];for(let e of o){let r;switch(this.assert(null!==e,l.name,null),l.kind){case"message":r=l.T().internalJsonRead(e,n);break;case"enum":if(!1===(r=this.enum(l.T(),e,l.name,n.ignoreUnknownFields)))continue;break;case"scalar":r=this.scalar(e,l.T,l.L,l.name)}this.assert(void 0!==r,l.name,o),t.push(r)}}else switch(l.kind){case"message":if(null===o&&"google.protobuf.Value"!=l.T().typeName){this.assert(void 0===l.oneof,l.name+" (oneof member)",null);continue}e[c]=l.T().internalJsonRead(o,n,e[c]);break;case"enum":let u=this.enum(l.T(),o,l.name,n.ignoreUnknownFields);if(!1===u)continue;e[c]=u;break;case"scalar":e[c]=this.scalar(o,l.T,l.L,l.name)}}}enum(e,t,n,r){if("google.protobuf.NullValue"==e[0]&&$(null===t||"NULL_VALUE"===t,`Unable to parse field ${this.info.typeName}#${n}, enum ${e[0]} only accepts null.`),null===t)return 0;switch(typeof t){case"number":return $(Number.isInteger(t),`Unable to parse field ${this.info.typeName}#${n}, enum can only be integral number, got ${t}.`),t;case"string":let s=t;e[2]&&t.substring(0,e[2].length)===e[2]&&(s=t.substring(e[2].length));let i=e[1][s];if(void 0===i&&r)return!1;return $("number"==typeof i,`Unable to parse field ${this.info.typeName}#${n}, enum ${e[0]} has no value for "${t}".`),i}$(!1,`Unable to parse field ${this.info.typeName}#${n}, cannot parse enum value from ${typeof t}".`)}scalar(e,t,n,s){let i;try{switch(t){case r.DOUBLE:case r.FLOAT:if(null===e)return 0;if("NaN"===e)return Number.NaN;if("Infinity"===e)return Number.POSITIVE_INFINITY;if("-Infinity"===e)return Number.NEGATIVE_INFINITY;if(""===e){i="empty string";break}if("string"==typeof e&&e.trim().length!==e.length){i="extra whitespace";break}if("string"!=typeof e&&"number"!=typeof e)break;let s=Number(e);if(Number.isNaN(s)){i="not a number";break}if(!Number.isFinite(s)){i="too large or small";break}return t==r.FLOAT&&W(s),s;case r.INT32:case r.FIXED32:case r.SFIXED32:case r.SINT32:case r.UINT32:let a;if(null===e)return 0;if("number"==typeof e?a=e:""===e?i="empty string":"string"==typeof e&&(e.trim().length!==e.length?i="extra whitespace":a=Number(e)),void 0===a)break;return t==r.UINT32?j(a):K(a),a;case r.INT64:case r.SFIXED64:case r.SINT64:if(null===e)return M(F.ZERO,n);if("number"!=typeof e&&"string"!=typeof e)break;return M(F.from(e),n);case r.FIXED64:case r.UINT64:if(null===e)return M(P.ZERO,n);if("number"!=typeof e&&"string"!=typeof e)break;return M(P.from(e),n);case r.BOOL:if(null===e)return!1;if("boolean"!=typeof e)break;return e;case r.STRING:if(null===e)return"";if("string"!=typeof e){i="extra whitespace";break}try{encodeURIComponent(e)}catch(e){break}return e;case r.BYTES:if(null===e||""===e)return new Uint8Array(0);if("string"!=typeof e)break;return function(e){let t=3*e.length/4;"="==e[e.length-2]?t-=2:"="==e[e.length-1]&&(t-=1);let n=new Uint8Array(t),r=0,s=0,i,a=0;for(let t=0;t<e.length;t++){if(void 0===(i=_[e.charCodeAt(t)]))switch(e[t]){case"=":s=0;case"\n":case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(s){case 0:a=i,s=1;break;case 1:n[r++]=a<<2|(48&i)>>4,a=i,s=2;break;case 2:n[r++]=(15&a)<<4|(60&i)>>2,a=i,s=3;break;case 3:n[r++]=(3&a)<<6|i,s=0}}if(1==s)throw Error("invalid base64 string.");return n.subarray(0,r)}(e)}}catch(e){i=e.message}this.assert(!1,s+(i?" - "+i:""),e)}}class H{constructor(e){var t;this.fields=null!==(t=e.fields)&&void 0!==t?t:[]}write(e,t){let n={};for(let r of this.fields){if(!r.oneof){let s=this.field(r,e[r.localName],t);void 0!==s&&(n[t.useProtoFieldName?r.name:r.jsonName]=s);continue}let s=e[r.oneof];if(s.oneofKind!==r.localName)continue;let i="scalar"==r.kind||"enum"==r.kind?Object.assign(Object.assign({},t),{emitDefaultValues:!0}):t,a=this.field(r,s[r.localName],i);$(void 0!==a),n[t.useProtoFieldName?r.name:r.jsonName]=a}return n}field(e,t,n){let r;if("map"==e.kind){$("object"==typeof t&&null!==t);let s={};switch(e.V.kind){case"scalar":for(let[n,r]of Object.entries(t)){let t=this.scalar(e.V.T,r,e.name,!1,!0);$(void 0!==t),s[n.toString()]=t}break;case"message":let i=e.V.T();for(let[r,a]of Object.entries(t)){let t=this.message(i,a,e.name,n);$(void 0!==t),s[r.toString()]=t}break;case"enum":let a=e.V.T();for(let[r,i]of Object.entries(t)){$(void 0===i||"number"==typeof i);let t=this.enum(a,i,e.name,!1,!0,n.enumAsInteger);$(void 0!==t),s[r.toString()]=t}}(n.emitDefaultValues||Object.keys(s).length>0)&&(r=s)}else if(e.repeat){$(Array.isArray(t));let s=[];switch(e.kind){case"scalar":for(let n=0;n<t.length;n++){let r=this.scalar(e.T,t[n],e.name,e.opt,!0);$(void 0!==r),s.push(r)}break;case"enum":let i=e.T();for(let r=0;r<t.length;r++){$(void 0===t[r]||"number"==typeof t[r]);let a=this.enum(i,t[r],e.name,e.opt,!0,n.enumAsInteger);$(void 0!==a),s.push(a)}break;case"message":let a=e.T();for(let r=0;r<t.length;r++){let i=this.message(a,t[r],e.name,n);$(void 0!==i),s.push(i)}}(n.emitDefaultValues||s.length>0||n.emitDefaultValues)&&(r=s)}else switch(e.kind){case"scalar":r=this.scalar(e.T,t,e.name,e.opt,n.emitDefaultValues);break;case"enum":r=this.enum(e.T(),t,e.name,e.opt,n.emitDefaultValues,n.enumAsInteger);break;case"message":r=this.message(e.T(),t,e.name,n)}return r}enum(e,t,n,r,s,i){if("google.protobuf.NullValue"==e[0])return s||r?null:void 0;if(void 0===t){$(r);return}if(0!==t||s||r)return($("number"==typeof t),$(Number.isInteger(t)),i||!e[1].hasOwnProperty(t))?t:e[2]?e[2]+e[1][t]:e[1][t]}message(e,t,n,r){return void 0===t?r.emitDefaultValues?null:void 0:e.internalJsonWrite(t,r)}scalar(e,t,n,s,i){if(void 0===t){$(s);return}let a=i||s;switch(e){case r.INT32:case r.SFIXED32:case r.SINT32:if(0===t)return a?0:void 0;return K(t),t;case r.FIXED32:case r.UINT32:if(0===t)return a?0:void 0;return j(t),t;case r.FLOAT:W(t);case r.DOUBLE:if(0===t)return a?0:void 0;if($("number"==typeof t),Number.isNaN(t))return"NaN";if(t===Number.POSITIVE_INFINITY)return"Infinity";if(t===Number.NEGATIVE_INFINITY)return"-Infinity";return t;case r.STRING:if(""===t)return a?"":void 0;return $("string"==typeof t),t;case r.BOOL:if(!1===t)return!a&&void 0;return $("boolean"==typeof t),t;case r.UINT64:case r.FIXED64:$("number"==typeof t||"string"==typeof t||"bigint"==typeof t);let o=P.from(t);if(o.isZero()&&!a)return;return o.toString();case r.INT64:case r.SFIXED64:case r.SINT64:$("number"==typeof t||"string"==typeof t||"bigint"==typeof t);let l=F.from(t);if(l.isZero()&&!a)return;return l.toString();case r.BYTES:if($(t instanceof Uint8Array),!t.byteLength)return a?"":void 0;return function(e){let t="",n=0,r,s=0;for(let i=0;i<e.length;i++)switch(r=e[i],n){case 0:t+=A[r>>2],s=(3&r)<<4,n=1;break;case 1:t+=A[s|r>>4],s=(15&r)<<2,n=2;break;case 2:t+=A[s|r>>6],t+=A[63&r],n=0}return n&&(t+=A[s],t+="=",1==n&&(t+="=")),t}(t)}}}function X(e,t=s.STRING){switch(e){case r.BOOL:return!1;case r.UINT64:case r.FIXED64:return M(P.ZERO,t);case r.INT64:case r.SFIXED64:case r.SINT64:return M(F.ZERO,t);case r.DOUBLE:case r.FLOAT:return 0;case r.BYTES:return new Uint8Array(0);case r.STRING:return"";default:return 0}}class Y{constructor(e){this.info=e}prepare(){var e;if(!this.fieldNoToField){let t=null!==(e=this.info.fields)&&void 0!==e?e:[];this.fieldNoToField=new Map(t.map(e=>[e.no,e]))}}read(e,s,i,a){this.prepare();let o=void 0===a?e.len:e.pos+a;for(;e.pos<o;){let[a,o]=e.tag(),l=this.fieldNoToField.get(a);if(!l){let n=i.readUnknownField;if("throw"==n)throw Error(`Unknown field ${a} (wire type ${o}) for ${this.info.typeName}`);let r=e.skip(o);!1!==n&&(!0===n?t.onRead:n)(this.info.typeName,s,a,o,r);continue}let c=s,u=l.repeat,f=l.localName;switch(l.oneof&&(c=c[l.oneof]).oneofKind!==f&&(c=s[l.oneof]={oneofKind:f}),l.kind){case"scalar":case"enum":let d="enum"==l.kind?r.INT32:l.T,h="scalar"==l.kind?l.L:void 0;if(u){let t=c[f];if(o==n.LengthDelimited&&d!=r.STRING&&d!=r.BYTES){let n=e.uint32()+e.pos;for(;e.pos<n;)t.push(this.scalar(e,d,h))}else t.push(this.scalar(e,d,h))}else c[f]=this.scalar(e,d,h);break;case"message":if(u){let t=c[f],n=l.T().internalBinaryRead(e,e.uint32(),i);t.push(n)}else c[f]=l.T().internalBinaryRead(e,e.uint32(),i,c[f]);break;case"map":let[p,m]=this.mapEntry(l,e,i);c[f][p]=m}}}mapEntry(e,t,n){let i,a,o=t.uint32(),l=t.pos+o;for(;t.pos<l;){let[o,l]=t.tag();switch(o){case 1:i=e.K==r.BOOL?t.bool().toString():this.scalar(t,e.K,s.STRING);break;case 2:switch(e.V.kind){case"scalar":a=this.scalar(t,e.V.T,e.V.L);break;case"enum":a=t.int32();break;case"message":a=e.V.T().internalBinaryRead(t,t.uint32(),n)}break;default:throw Error(`Unknown field ${o} (wire type ${l}) in map entry for ${this.info.typeName}#${e.name}`)}}if(void 0===i){let t=X(e.K);i=e.K==r.BOOL?t.toString():t}if(void 0===a)switch(e.V.kind){case"scalar":a=X(e.V.T,e.V.L);break;case"enum":a=0;break;case"message":a=e.V.T().create()}return[i,a]}scalar(e,t,n){switch(t){case r.INT32:return e.int32();case r.STRING:return e.string();case r.BOOL:return e.bool();case r.DOUBLE:return e.double();case r.FLOAT:return e.float();case r.INT64:return M(e.int64(),n);case r.UINT64:return M(e.uint64(),n);case r.FIXED64:return M(e.fixed64(),n);case r.FIXED32:return e.fixed32();case r.BYTES:return e.bytes();case r.UINT32:return e.uint32();case r.SFIXED32:return e.sfixed32();case r.SFIXED64:return M(e.sfixed64(),n);case r.SINT32:return e.sint32();case r.SINT64:return M(e.sint64(),n)}}}class J{constructor(e){this.info=e}prepare(){if(!this.fields){let e=this.info.fields?this.info.fields.concat():[];this.fields=e.sort((e,t)=>e.no-t.no)}}write(e,n,s){for(let t of(this.prepare(),this.fields)){let a,o,l=t.repeat,c=t.localName;if(t.oneof){let n=e[t.oneof];if(n.oneofKind!==c)continue;a=n[c],o=!0}else a=e[c],o=!1;switch(t.kind){case"scalar":case"enum":let u="enum"==t.kind?r.INT32:t.T;if(l){if($(Array.isArray(a)),l==i.PACKED)this.packed(n,u,t.no,a);else for(let e of a)this.scalar(n,u,t.no,e,!0)}else void 0===a?$(t.opt):this.scalar(n,u,t.no,a,o||t.opt);break;case"message":if(l)for(let e of($(Array.isArray(a)),a))this.message(n,s,t.T(),t.no,e);else this.message(n,s,t.T(),t.no,a);break;case"map":for(let[e,r]of($("object"==typeof a&&null!==a),Object.entries(a)))this.mapEntry(n,s,t,e,r)}}let a=s.writeUnknownFields;!1!==a&&(!0===a?t.onWrite:a)(this.info.typeName,e,n)}mapEntry(e,t,s,i,a){e.tag(s.no,n.LengthDelimited),e.fork();let o=i;switch(s.K){case r.INT32:case r.FIXED32:case r.UINT32:case r.SFIXED32:case r.SINT32:o=Number.parseInt(i);break;case r.BOOL:$("true"==i||"false"==i),o="true"==i}switch(this.scalar(e,s.K,1,o,!0),s.V.kind){case"scalar":this.scalar(e,s.V.T,2,a,!0);break;case"enum":this.scalar(e,r.INT32,2,a,!0);break;case"message":this.message(e,t,s.V.T(),2,a)}e.join()}message(e,t,r,s,i){void 0!==i&&(r.internalBinaryWrite(i,e.tag(s,n.LengthDelimited).fork(),t),e.join())}scalar(e,t,n,r,s){let[i,a,o]=this.scalarInfo(t,r);(!o||s)&&(e.tag(n,i),e[a](r))}packed(e,t,s,i){if(!i.length)return;$(t!==r.BYTES&&t!==r.STRING),e.tag(s,n.LengthDelimited),e.fork();let[,a]=this.scalarInfo(t);for(let t=0;t<i.length;t++)e[a](i[t]);e.join()}scalarInfo(e,t){let s,i=n.Varint,a=void 0===t,o=0===t;switch(e){case r.INT32:s="int32";break;case r.STRING:o=a||!t.length,i=n.LengthDelimited,s="string";break;case r.BOOL:o=!1===t,s="bool";break;case r.UINT32:s="uint32";break;case r.DOUBLE:i=n.Bit64,s="double";break;case r.FLOAT:i=n.Bit32,s="float";break;case r.INT64:o=a||F.from(t).isZero(),s="int64";break;case r.UINT64:o=a||P.from(t).isZero(),s="uint64";break;case r.FIXED64:o=a||P.from(t).isZero(),i=n.Bit64,s="fixed64";break;case r.BYTES:o=a||!t.byteLength,i=n.LengthDelimited,s="bytes";break;case r.FIXED32:i=n.Bit32,s="fixed32";break;case r.SFIXED32:i=n.Bit32,s="sfixed32";break;case r.SFIXED64:o=a||F.from(t).isZero(),i=n.Bit64,s="sfixed64";break;case r.SINT32:s="sint32";break;case r.SINT64:o=a||F.from(t).isZero(),s="sint64"}return[i,s,a||o]}}let q={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0},Z={ignoreUnknownFields:!1};function z(e){return e?Object.assign(Object.assign({},q),e):q}let Q=Object.values;function ee(e,t,n){if(t===n)return!0;if(e!==r.BYTES)return!1;if(t.length!==n.length)return!1;for(let e=0;e<t.length;e++)if(t[e]!=n[e])return!1;return!0}function et(e,t,n){if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(!ee(e,t[r],n[r]))return!1;return!0}function en(e,t,n){if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(!e.equals(t[r],n[r]))return!1;return!0}let er={writeUnknownFields:!0,writerFactory:()=>new es};class es{constructor(e){this.stack=[],this.textEncoder=null!=e?e:new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let e=0;for(let t=0;t<this.chunks.length;t++)e+=this.chunks[t].length;let t=new Uint8Array(e),n=0;for(let e=0;e<this.chunks.length;e++)t.set(this.chunks[e],n),n+=this.chunks[e].length;return this.chunks=[],t}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),t=this.stack.pop();if(!t)throw Error("invalid state, fork stack empty");return this.chunks=t.chunks,this.buf=t.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,t){return this.uint32((e<<3|t)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(j(e);e>127;)this.buf.push(127&e|128),e>>>=7;return this.buf.push(e),this}int32(e){return K(e),U(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let t=this.textEncoder.encode(e);return this.uint32(t.byteLength),this.raw(t)}float(e){W(e);let t=new Uint8Array(4);return new DataView(t.buffer).setFloat32(0,e,!0),this.raw(t)}double(e){let t=new Uint8Array(8);return new DataView(t.buffer).setFloat64(0,e,!0),this.raw(t)}fixed32(e){j(e);let t=new Uint8Array(4);return new DataView(t.buffer).setUint32(0,e,!0),this.raw(t)}sfixed32(e){K(e);let t=new Uint8Array(4);return new DataView(t.buffer).setInt32(0,e,!0),this.raw(t)}sint32(e){return K(e),U(e=(e<<1^e>>31)>>>0,this.buf),this}sfixed64(e){let t=new Uint8Array(8),n=new DataView(t.buffer),r=F.from(e);return n.setInt32(0,r.lo,!0),n.setInt32(4,r.hi,!0),this.raw(t)}fixed64(e){let t=new Uint8Array(8),n=new DataView(t.buffer),r=P.from(e);return n.setInt32(0,r.lo,!0),n.setInt32(4,r.hi,!0),this.raw(t)}int64(e){let t=F.from(e);return D(t.lo,t.hi,this.buf),this}sint64(e){let t=F.from(e),n=t.hi>>31;return D(t.lo<<1^n,(t.hi<<1|t.lo>>>31)^n,this.buf),this}uint64(e){let t=P.from(e);return D(t.lo,t.hi,this.buf),this}}let ei={readUnknownField:!0,readerFactory:e=>new ea(e)};class ea{constructor(e,t){this.varint64=R,this.uint32=V,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength),this.textDecoder=null!=t?t:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0})}tag(){let e=this.uint32(),t=e>>>3,n=7&e;if(t<=0||n<0||n>5)throw Error("illegal tag: field no "+t+" wire type "+n);return[t,n]}skip(e){let t=this.pos;switch(e){case n.Varint:for(;128&this.buf[this.pos++];);break;case n.Bit64:this.pos+=4;case n.Bit32:this.pos+=4;break;case n.LengthDelimited:let r=this.uint32();this.pos+=r;break;case n.StartGroup:let s;for(;(s=this.tag()[1])!==n.EndGroup;)this.skip(s);break;default:throw Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(t,this.pos)}assertBounds(){if(this.pos>this.len)throw RangeError("premature EOF")}int32(){return 0|this.uint32()}sint32(){let e=this.uint32();return e>>>1^-(1&e)}int64(){return new F(...this.varint64())}uint64(){return new P(...this.varint64())}sint64(){let[e,t]=this.varint64(),n=-(1&e);return new F(e=(e>>>1|(1&t)<<31)^n,t=t>>>1^n)}bool(){let[e,t]=this.varint64();return 0!==e||0!==t}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return new P(this.sfixed32(),this.sfixed32())}sfixed64(){return new F(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),t=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(t,t+e)}string(){return this.textDecoder.decode(this.bytes())}}let eo=Object.getOwnPropertyDescriptors(Object.getPrototypeOf({}));class el{constructor(e,t,n){this.defaultCheckDepth=16,this.typeName=e,this.fields=t.map(N),this.options=null!=n?n:{},this.messagePrototype=Object.create(null,Object.assign(Object.assign({},eo),{[I]:{value:this}})),this.refTypeCheck=new k(this),this.refJsonReader=new G(this),this.refJsonWriter=new H(this),this.refBinReader=new Y(this),this.refBinWriter=new J(this)}create(e){let t=function(e){let t=e.messagePrototype?Object.create(e.messagePrototype):Object.defineProperty({},I,{value:e});for(let n of e.fields){let e=n.localName;if(!n.opt){if(n.oneof)t[n.oneof]={oneofKind:void 0};else if(n.repeat)t[e]=[];else switch(n.kind){case"scalar":t[e]=X(n.T,n.L);break;case"enum":t[e]=0;break;case"map":t[e]={}}}}return t}(this);return void 0!==e&&S(this,t,e),t}clone(e){let t=this.create();return S(this,t,e),t}equals(e,t){return function(e,t,n){if(t===n)return!0;if(!t||!n)return!1;for(let s of e.fields){let e=s.localName,i=s.oneof?t[s.oneof][e]:t[e],a=s.oneof?n[s.oneof][e]:n[e];switch(s.kind){case"enum":case"scalar":let o="enum"==s.kind?r.INT32:s.T;if(!(s.repeat?et(o,i,a):ee(o,i,a)))return!1;break;case"map":if(!("message"==s.V.kind?en(s.V.T(),Q(i),Q(a)):et("enum"==s.V.kind?r.INT32:s.V.T,Q(i),Q(a))))return!1;break;case"message":let l=s.T();if(!(s.repeat?en(l,i,a):l.equals(i,a)))return!1}}return!0}(this,e,t)}is(e,t=this.defaultCheckDepth){return this.refTypeCheck.is(e,t,!1)}isAssignable(e,t=this.defaultCheckDepth){return this.refTypeCheck.is(e,t,!0)}mergePartial(e,t){S(this,e,t)}fromBinary(e,t){var n;let r=(n=t)?Object.assign(Object.assign({},ei),n):ei;return this.internalBinaryRead(r.readerFactory(e),e.byteLength,r)}fromJson(e,t){var n;return this.internalJsonRead(e,(n=t)?Object.assign(Object.assign({},Z),n):Z)}fromJsonString(e,t){let n=JSON.parse(e);return this.fromJson(n,t)}toJson(e,t){return this.internalJsonWrite(e,z(t))}toJsonString(e,t){var n;return JSON.stringify(this.toJson(e,t),null,null!==(n=null==t?void 0:t.prettySpaces)&&void 0!==n?n:0)}toBinary(e,t){var n;let r=(n=t)?Object.assign(Object.assign({},er),n):er;return this.internalBinaryWrite(e,r.writerFactory(),r).finish()}internalJsonRead(e,t,n){if(null!==e&&"object"==typeof e&&!Array.isArray(e)){let r=null!=n?n:this.create();return this.refJsonReader.read(e,r,t),r}throw Error(`Unable to parse message ${this.typeName} from JSON ${w(e)}.`)}internalJsonWrite(e,t){return this.refJsonWriter.write(e,t)}internalBinaryWrite(e,t,n){return this.refBinWriter.write(e,t,n),t}internalBinaryRead(e,t,n,r){let s=null!=r?r:this.create();return this.refBinReader.read(e,s,n,t),s}}let ec=new class e extends el{constructor(){super("spotify.remote_config.ucs.proto.AccountAttribute",[{no:2,name:"bool_value",kind:"scalar",oneof:"value",T:8},{no:3,name:"long_value",kind:"scalar",oneof:"value",T:3,L:2},{no:4,name:"string_value",kind:"scalar",oneof:"value",T:9}])}};new class e extends el{constructor(){super("spotify.remote_config.ucs.proto.PropertyDefinition",[{no:1,name:"id",kind:"message",T:()=>eu},{no:4,name:"metadata",kind:"message",T:()=>ef},{no:5,name:"bool_spec",kind:"message",oneof:"specification",T:()=>ed},{no:6,name:"int_spec",kind:"message",oneof:"specification",T:()=>eh},{no:7,name:"enum_spec",kind:"message",oneof:"specification",T:()=>ep}])}};let eu=new class e extends el{constructor(){super("spotify.remote_config.ucs.proto.PropertyDefinition.Identifier",[{no:1,name:"scope",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9}])}},ef=new class e extends el{constructor(){super("spotify.remote_config.ucs.proto.PropertyDefinition.Metadata",[{no:1,name:"component_id",kind:"scalar",T:9},{no:2,name:"description",kind:"scalar",T:9}])}},ed=new class e extends el{constructor(){super("spotify.remote_config.ucs.proto.PropertyDefinition.BoolSpec",[{no:1,name:"default",kind:"scalar",T:8}])}},eh=new class e extends el{constructor(){super("spotify.remote_config.ucs.proto.PropertyDefinition.IntSpec",[{no:1,name:"default",kind:"scalar",T:5},{no:2,name:"lower",kind:"scalar",T:5},{no:3,name:"upper",kind:"scalar",T:5}])}},ep=new class e extends el{constructor(){super("spotify.remote_config.ucs.proto.PropertyDefinition.EnumSpec",[{no:1,name:"default",kind:"scalar",T:9},{no:2,name:"values",kind:"scalar",repeat:2,T:9}])}};!function(e){e[e.BLOCKING=0]="BLOCKING",e[e.BACKGROUND_SYNC=1]="BACKGROUND_SYNC",e[e.ASYNC=2]="ASYNC",e[e.PUSH_INITIATED=3]="PUSH_INITIATED",e[e.RECONNECT=4]="RECONNECT"}(a||(a={})),!function(e){e[e.INVALID=0]="INVALID",e[e.USER_ID=1]="USER_ID",e[e.INSTALLATION_ID=2]="INSTALLATION_ID",e[e.VERSION=3]="VERSION"}(o||(o={}));let em=new class e extends el{constructor(){super("spotify.remote_config.ucs.proto.ResolveRequest",[{no:1,name:"property_set_id",kind:"scalar",T:9},{no:2,name:"fetch_type",kind:"message",T:()=>eN},{no:11,name:"context",kind:"message",T:()=>ek},{no:12,name:"backend_context",kind:"message",oneof:"resolutionContext",T:()=>eO}])}},eg=new class e extends el{constructor(){super("spotify.remote_config.ucs.proto.ResolveResponse",[{no:1,name:"configuration",kind:"message",T:()=>ey}])}},ey=new class e extends el{constructor(){super("spotify.remote_config.ucs.proto.Configuration",[{no:1,name:"configuration_assignment_id",kind:"scalar",T:9},{no:2,name:"fetch_time_millis",kind:"scalar",T:3,L:2},{no:3,name:"assigned_values",kind:"message",repeat:1,T:()=>eT}])}},eT=new class e extends el{constructor(){super("spotify.remote_config.ucs.proto.Configuration.AssignedValue",[{no:1,name:"property_id",kind:"message",T:()=>eu},{no:2,name:"metadata",kind:"message",T:()=>eb},{no:3,name:"bool_value",kind:"message",oneof:"structuredValue",T:()=>eS},{no:4,name:"int_value",kind:"message",oneof:"structuredValue",T:()=>eI},{no:5,name:"enum_value",kind:"message",oneof:"structuredValue",T:()=>eE}])}},eb=new class e extends el{constructor(){super("spotify.remote_config.ucs.proto.Configuration.AssignedValue.Metadata",[{no:1,name:"policy_id",kind:"scalar",T:3,L:2},{no:2,name:"external_realm",kind:"scalar",T:9},{no:3,name:"external_realm_id",kind:"scalar",T:3,L:2}])}},eS=new class e extends el{constructor(){super("spotify.remote_config.ucs.proto.Configuration.AssignedValue.BoolValue",[{no:1,name:"value",kind:"scalar",T:8}])}},eI=new class e extends el{constructor(){super("spotify.remote_config.ucs.proto.Configuration.AssignedValue.IntValue",[{no:1,name:"value",kind:"scalar",T:5}])}},eE=new class e extends el{constructor(){super("spotify.remote_config.ucs.proto.Configuration.AssignedValue.EnumValue",[{no:1,name:"value",kind:"scalar",T:9}])}},eN=new class e extends el{constructor(){super("spotify.remote_config.ucs.proto.Fetch",[{no:1,name:"type",kind:"enum",T:()=>["spotify.remote_config.ucs.proto.Fetch.Type",a]}])}},ek=new class e extends el{constructor(){super("spotify.remote_config.ucs.proto.Context",[{no:1,name:"context",kind:"message",repeat:1,T:()=>ew}])}},ew=new class e extends el{constructor(){super("spotify.remote_config.ucs.proto.Context.ContextEntry",[{no:10,name:"value",kind:"scalar",T:9},{no:1,name:"known_context",kind:"enum",oneof:"context",T:()=>["spotify.remote_config.ucs.proto.DynamicContext.KnownContext",o,"KNOWN_CONTEXT_"]}])}},eO=new class e extends el{constructor(){super("spotify.remote_config.ucs.proto.BackendContext",[{no:1,name:"system",kind:"scalar",T:9},{no:2,name:"service_name",kind:"scalar",T:9},{no:3,name:"static_context",kind:"message",T:()=>eA},{no:4,name:"dynamic_context",kind:"message",T:()=>eR},{no:10,name:"surface_metadata",kind:"message",T:()=>e_}])}},eA=new class e extends el{constructor(){super("spotify.remote_config.ucs.proto.BackendContext.StaticContext",[{no:1,name:"system",kind:"scalar",T:9},{no:2,name:"service_name",kind:"scalar",T:9}])}},e_=new class e extends el{constructor(){super("spotify.remote_config.ucs.proto.BackendContext.SurfaceMetadata",[{no:1,name:"backend_sdk_version",kind:"scalar",T:9}])}},eR=new class e extends el{constructor(){super("spotify.remote_config.ucs.proto.DynamicContext",[{no:1,name:"context_definition",kind:"message",repeat:1,T:()=>eD}])}},eD=new class e extends el{constructor(){super("spotify.remote_config.ucs.proto.DynamicContext.ContextDefinition",[{no:1,name:"known_context",kind:"enum",oneof:"context",T:()=>["spotify.remote_config.ucs.proto.DynamicContext.KnownContext",o,"KNOWN_CONTEXT_"]}])}};new class e extends el{constructor(){super("spotify.remote_config.ucs.proto.UcsRequest",[{no:1,name:"caller_info",kind:"message",T:()=>ev},{no:2,name:"resolve_request",kind:"message",T:()=>em},{no:3,name:"account_attributes_request",kind:"message",T:()=>eC}])}};let ev=new class e extends el{constructor(){super("spotify.remote_config.ucs.proto.UcsRequest.CallerInfo",[{no:1,name:"request_origin_id",kind:"scalar",T:9},{no:2,name:"request_orgin_version",kind:"scalar",T:9},{no:3,name:"reason",kind:"scalar",T:9}])}},eC=new class e extends el{constructor(){super("spotify.remote_config.ucs.proto.UcsRequest.AccountAttributesRequest",[])}},eU=new class e extends el{constructor(){super("spotify.remote_config.ucs.proto.UcsResponseWrapper",[{no:1,name:"success",kind:"message",oneof:"result",T:()=>eV},{no:2,name:"error",kind:"message",oneof:"result",T:()=>eL}])}},eV=new class e extends el{constructor(){super("spotify.remote_config.ucs.proto.UcsResponseWrapper.UcsResponse",[{no:5,name:"fetch_time_millis",kind:"scalar",T:3,L:2},{no:1,name:"resolve_success",kind:"message",oneof:"resolveResult",T:()=>eg},{no:2,name:"resolve_error",kind:"message",oneof:"resolveResult",T:()=>eL},{no:3,name:"account_attributes_success",kind:"message",oneof:"accountAttributesResult",T:()=>eB},{no:4,name:"account_attributes_error",kind:"message",oneof:"accountAttributesResult",T:()=>eL}])}},eB=new class e extends el{constructor(){super("spotify.remote_config.ucs.proto.UcsResponseWrapper.AccountAttributesResponse",[{no:1,name:"account_attributes",kind:"map",K:9,V:{kind:"message",T:()=>ec}}])}},eL=new class e extends el{constructor(){super("spotify.remote_config.ucs.proto.UcsResponseWrapper.Error",[{no:1,name:"error_code",kind:"scalar",T:5},{no:2,name:"error_message",kind:"scalar",T:9},{no:3,name:"log_id",kind:"scalar",opt:!0,T:9}])}},ex=new class e extends el{constructor(){super("spotify.remote_config.ucs.proto.BootstrapResponse",[{no:2,name:"ucsResponseV0",kind:"message",T:()=>eP}])}create(e){let t=globalThis.Object.create(this.messagePrototype);return void 0!==e&&S(this,t,e),t}internalBinaryRead(e,n,r,s){let i=s??this.create(),a=e.pos+n;for(;e.pos<a;){let[n,s]=e.tag();if(2===n)i.ucsResponseV0=eP.internalBinaryRead(e,e.uint32(),r,i.ucsResponseV0);else{let a=r.readUnknownField;if("throw"===a)throw new globalThis.Error(`Unknown field ${n} (wire type ${s}) for ${this.typeName}`);let o=e.skip(s);!1!==a&&(!0===a?t.onRead:a)(this.typeName,i,n,s,o)}}return i}internalBinaryWrite(e,r,s){e.ucsResponseV0&&eP.internalBinaryWrite(e.ucsResponseV0,r.tag(2,n.LengthDelimited).fork(),s).join();let i=s.writeUnknownFields;return!1!==i&&(!0==i?t.onWrite:i)(this.typeName,e,r),r}},eP=new class e extends el{constructor(){super("spotify.remote_config.ucs.proto.UcsResponseWrapperV0",[{no:1,name:"success",kind:"message",oneof:"result",T:()=>eF},{no:2,name:"error",kind:"message",oneof:"result",T:()=>e$}])}create(e){let t=globalThis.Object.create(this.messagePrototype);return t.result={oneofKind:void 0},void 0!==e&&S(this,t,e),t}internalBinaryRead(e,n,r,s){let i=s??this.create(),a=e.pos+n;for(;e.pos<a;){let[n,s]=e.tag();switch(n){case 1:i.result={oneofKind:"success",success:eF.internalBinaryRead(e,e.uint32(),r,i.result.success)};break;case 2:i.result={oneofKind:"error",error:e$.internalBinaryRead(e,e.uint32(),r,i.result.error)};break;default:let a=r.readUnknownField;if("throw"===a)throw new globalThis.Error(`Unknown field ${n} (wire type ${s}) for ${this.typeName}`);let o=e.skip(s);!1!==a&&(!0===a?t.onRead:a)(this.typeName,i,n,s,o)}}return i}internalBinaryWrite(e,r,s){"success"===e.result.oneofKind&&eF.internalBinaryWrite(e.result.success,r.tag(1,n.LengthDelimited).fork(),s).join(),"error"===e.result.oneofKind&&e$.internalBinaryWrite(e.result.error,r.tag(2,n.LengthDelimited).fork(),s).join();let i=s.writeUnknownFields;return!1!==i&&(!0==i?t.onWrite:i)(this.typeName,e,r),r}},eF=new class e extends el{constructor(){super("spotify.remote_config.ucs.proto.UcsResponseWrapperSuccess",[{no:1,name:"customization",kind:"message",T:()=>eU}])}create(e){let t=globalThis.Object.create(this.messagePrototype);return void 0!==e&&S(this,t,e),t}internalBinaryRead(e,n,r,s){let i=s??this.create(),a=e.pos+n;for(;e.pos<a;){let[n,s]=e.tag();if(1===n)i.customization=eU.internalBinaryRead(e,e.uint32(),r,i.customization);else{let a=r.readUnknownField;if("throw"===a)throw new globalThis.Error(`Unknown field ${n} (wire type ${s}) for ${this.typeName}`);let o=e.skip(s);!1!==a&&(!0===a?t.onRead:a)(this.typeName,i,n,s,o)}}return i}internalBinaryWrite(e,r,s){e.customization&&eU.internalBinaryWrite(e.customization,r.tag(1,n.LengthDelimited).fork(),s).join();let i=s.writeUnknownFields;return!1!==i&&(!0==i?t.onWrite:i)(this.typeName,e,r),r}},e$=new class e extends el{constructor(){super("spotify.remote_config.ucs.proto.Error",[{no:1,name:"errorCode",kind:"scalar",T:5},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"logId",kind:"scalar",opt:!0,T:9}])}create(e){let t=globalThis.Object.create(this.messagePrototype);return t.errorCode=0,t.message="",void 0!==e&&S(this,t,e),t}internalBinaryRead(e,n,r,s){let i=s??this.create(),a=e.pos+n;for(;e.pos<a;){let[n,s]=e.tag();switch(n){case 1:i.errorCode=e.int32();break;case 2:i.message=e.string();break;case 3:i.logId=e.string();break;default:let a=r.readUnknownField;if("throw"===a)throw new globalThis.Error(`Unknown field ${n} (wire type ${s}) for ${this.typeName}`);let o=e.skip(s);!1!==a&&(!0===a?t.onRead:a)(this.typeName,i,n,s,o)}}return i}internalBinaryWrite(e,r,s){0!==e.errorCode&&r.tag(1,n.Varint).int32(e.errorCode),""!==e.message&&r.tag(2,n.LengthDelimited).string(e.message),void 0!==e.logId&&r.tag(3,n.LengthDelimited).string(e.logId);let i=s.writeUnknownFields;return!1!==i&&(!0==i?t.onWrite:i)(this.typeName,e,r),r}},eK=new class e extends el{constructor(){super("google.protobuf.Any",[{no:1,name:"type_url",kind:"scalar",T:9},{no:2,name:"value",kind:"scalar",T:12}])}pack(e,t){return{typeUrl:this.typeNameToUrl(t.typeName),value:t.toBinary(e)}}unpack(e,t,n){if(!this.contains(e,t))throw Error("Cannot unpack google.protobuf.Any with typeUrl '"+e.typeUrl+"' as "+t.typeName+".");return t.fromBinary(e.value,n)}contains(e,t){return!!e.typeUrl.length&&("string"==typeof t?t:t.typeName)===this.typeUrlToName(e.typeUrl)}internalJsonWrite(e,t){if(""===e.typeUrl)return{};let n=this.typeUrlToName(e.typeUrl),r=z(t),s=r.typeRegistry?.find(e=>e.typeName===n);if(!s)throw new globalThis.Error("Unable to convert google.protobuf.Any with typeUrl '"+e.typeUrl+"' to JSON. The specified type "+n+" is not available in the type registry.");let i=s.fromBinary(e.value,{readUnknownField:!1}),a=s.internalJsonWrite(i,r);return(n.startsWith("google.protobuf.")||!O(a))&&(a={value:a}),a["@type"]=e.typeUrl,a}internalJsonRead(e,t,n){let r;if(!O(e))throw new globalThis.Error("Unable to parse google.protobuf.Any from JSON "+w(e)+".");if("string"!=typeof e["@type"]||""==e["@type"])return this.create();let s=this.typeUrlToName(e["@type"]),i=t?.typeRegistry?.find(e=>e.typeName==s);if(!i)throw new globalThis.Error("Unable to parse google.protobuf.Any from JSON. The specified type "+s+" is not available in the type registry.");if(s.startsWith("google.protobuf.")&&e.hasOwnProperty("value"))r=i.fromJson(e.value,t);else{let n=Object.assign({},e);delete n["@type"],r=i.fromJson(n,t)}return void 0===n&&(n=this.create()),n.typeUrl=e["@type"],n.value=i.toBinary(r),n}typeNameToUrl(e){if(!e.length)throw Error("invalid type name: "+e);return"type.googleapis.com/"+e}typeUrlToName(e){if(!e.length)throw Error("invalid type url: "+e);let t=e.lastIndexOf("/"),n=t>0?e.substring(t+1):e;if(!n.length)throw Error("invalid type url: "+e);return n}create(e){let t=globalThis.Object.create(this.messagePrototype);return t.typeUrl="",t.value=new Uint8Array(0),void 0!==e&&S(this,t,e),t}internalBinaryRead(e,n,r,s){let i=s??this.create(),a=e.pos+n;for(;e.pos<a;){let[n,s]=e.tag();switch(n){case 1:i.typeUrl=e.string();break;case 2:i.value=e.bytes();break;default:let a=r.readUnknownField;if("throw"===a)throw new globalThis.Error(`Unknown field ${n} (wire type ${s}) for ${this.typeName}`);let o=e.skip(s);!1!==a&&(!0===a?t.onRead:a)(this.typeName,i,n,s,o)}}return i}internalBinaryWrite(e,r,s){""!==e.typeUrl&&r.tag(1,n.LengthDelimited).string(e.typeUrl),e.value.length&&r.tag(2,n.LengthDelimited).bytes(e.value);let i=s.writeUnknownFields;return!1!==i&&(!0==i?t.onWrite:i)(this.typeName,e,r),r}};!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.GENERIC=1]="GENERIC",e[e.ASSOC=2]="ASSOC"}(l||(l={})),!function(e){e[e.UNKNOWN_EXTENSION=0]="UNKNOWN_EXTENSION",e[e.CANVAZ=1]="CANVAZ",e[e.STORYLINES=2]="STORYLINES",e[e.PODCAST_TOPICS=3]="PODCAST_TOPICS",e[e.PODCAST_SEGMENTS=4]="PODCAST_SEGMENTS",e[e.AUDIO_FILES=5]="AUDIO_FILES",e[e.TRACK_DESCRIPTOR=6]="TRACK_DESCRIPTOR",e[e.PODCAST_COUNTER=7]="PODCAST_COUNTER",e[e.ARTIST_V4=8]="ARTIST_V4",e[e.ALBUM_V4=9]="ALBUM_V4",e[e.TRACK_V4=10]="TRACK_V4",e[e.SHOW_V4=11]="SHOW_V4",e[e.EPISODE_V4=12]="EPISODE_V4",e[e.PODCAST_HTML_DESCRIPTION=13]="PODCAST_HTML_DESCRIPTION",e[e.PODCAST_QUOTES=14]="PODCAST_QUOTES",e[e.USER_PROFILE=15]="USER_PROFILE",e[e.CANVAS_V1=16]="CANVAS_V1",e[e.SHOW_V4_BASE=17]="SHOW_V4_BASE",e[e.SHOW_V4_EPISODES_ASSOC=18]="SHOW_V4_EPISODES_ASSOC",e[e.TRACK_DESCRIPTOR_SIGNATURES=19]="TRACK_DESCRIPTOR_SIGNATURES",e[e.PODCAST_AD_SEGMENTS=20]="PODCAST_AD_SEGMENTS",e[e.EPISODE_TRANSCRIPTS=21]="EPISODE_TRANSCRIPTS",e[e.PODCAST_SUBSCRIPTIONS=22]="PODCAST_SUBSCRIPTIONS",e[e.EXTRACTED_COLOR=23]="EXTRACTED_COLOR",e[e.PODCAST_VIRALITY=24]="PODCAST_VIRALITY",e[e.IMAGE_SPARKLES_HACK=25]="IMAGE_SPARKLES_HACK",e[e.PODCAST_POPULARITY_HACK=26]="PODCAST_POPULARITY_HACK",e[e.AUTOMIX_MODE=27]="AUTOMIX_MODE",e[e.CUEPOINTS=28]="CUEPOINTS",e[e.PODCAST_POLL=29]="PODCAST_POLL",e[e.EPISODE_ACCESS=30]="EPISODE_ACCESS",e[e.SHOW_ACCESS=31]="SHOW_ACCESS",e[e.PODCAST_QNA=32]="PODCAST_QNA",e[e.CLIPS=33]="CLIPS",e[e.SHOW_V5=34]="SHOW_V5",e[e.EPISODE_V5=35]="EPISODE_V5",e[e.PODCAST_CTA_CARDS=36]="PODCAST_CTA_CARDS",e[e.PODCAST_RATING=37]="PODCAST_RATING",e[e.DISPLAY_SEGMENTS=38]="DISPLAY_SEGMENTS",e[e.GREENROOM=39]="GREENROOM",e[e.USER_CREATED=40]="USER_CREATED",e[e.SHOW_DESCRIPTION=41]="SHOW_DESCRIPTION",e[e.SHOW_HTML_DESCRIPTION=42]="SHOW_HTML_DESCRIPTION",e[e.SHOW_PLAYABILITY=43]="SHOW_PLAYABILITY",e[e.EPISODE_DESCRIPTION=44]="EPISODE_DESCRIPTION",e[e.EPISODE_HTML_DESCRIPTION=45]="EPISODE_HTML_DESCRIPTION",e[e.EPISODE_PLAYABILITY=46]="EPISODE_PLAYABILITY",e[e.SHOW_EPISODES_ASSOC=47]="SHOW_EPISODES_ASSOC",e[e.CLIENT_CONFIG=48]="CLIENT_CONFIG",e[e.PLAYLISTABILITY=49]="PLAYLISTABILITY",e[e.AUDIOBOOK_V5=50]="AUDIOBOOK_V5",e[e.CHAPTER_V5=51]="CHAPTER_V5",e[e.AUDIOBOOK_SPECIFICS=52]="AUDIOBOOK_SPECIFICS",e[e.EPISODE_RANKING=53]="EPISODE_RANKING",e[e.HTML_DESCRIPTION=54]="HTML_DESCRIPTION",e[e.CREATOR_CHANNEL=55]="CREATOR_CHANNEL",e[e.AUDIOBOOK_PROVIDERS=56]="AUDIOBOOK_PROVIDERS",e[e.PLAY_TRAIT=57]="PLAY_TRAIT",e[e.CONTENT_WARNING=58]="CONTENT_WARNING",e[e.IMAGE_CUE=59]="IMAGE_CUE",e[e.STREAM_COUNT=60]="STREAM_COUNT",e[e.AUDIO_ATTRIBUTES=61]="AUDIO_ATTRIBUTES",e[e.NAVIGABLE_TRAIT=62]="NAVIGABLE_TRAIT",e[e.NEXT_BEST_EPISODE=63]="NEXT_BEST_EPISODE",e[e.AUDIOBOOK_PRICE=64]="AUDIOBOOK_PRICE",e[e.EXPRESSIVE_PLAYLISTS=65]="EXPRESSIVE_PLAYLISTS",e[e.DYNAMIC_SHOW_EPISODE=66]="DYNAMIC_SHOW_EPISODE",e[e.LIVE=67]="LIVE",e[e.SKIP_PLAYED=68]="SKIP_PLAYED",e[e.AD_BREAK_FREE_PODCASTS=69]="AD_BREAK_FREE_PODCASTS",e[e.ASSOCIATIONS=70]="ASSOCIATIONS",e[e.PLAYLIST_EVALUATION=71]="PLAYLIST_EVALUATION",e[e.CACHE_INVALIDATIONS=72]="CACHE_INVALIDATIONS",e[e.LIVESTREAM_ENTITY=73]="LIVESTREAM_ENTITY",e[e.SINGLE_TAP_REACTIONS=74]="SINGLE_TAP_REACTIONS",e[e.USER_COMMENTS=75]="USER_COMMENTS",e[e.CLIENT_RESTRICTIONS=76]="CLIENT_RESTRICTIONS",e[e.PODCAST_GUEST=77]="PODCAST_GUEST",e[e.PLAYABILITY=78]="PLAYABILITY",e[e.COVER_IMAGE=79]="COVER_IMAGE",e[e.SHARE_TRAIT=80]="SHARE_TRAIT",e[e.INSTANCE_SHARING=81]="INSTANCE_SHARING",e[e.ARTIST_TOUR=82]="ARTIST_TOUR",e[e.AUDIOBOOK_GENRE=83]="AUDIOBOOK_GENRE",e[e.CONCEPT=84]="CONCEPT",e[e.ORIGINAL_VIDEO=85]="ORIGINAL_VIDEO",e[e.SMART_SHUFFLE=86]="SMART_SHUFFLE",e[e.LIVE_EVENTS=87]="LIVE_EVENTS",e[e.AUDIOBOOK_RELATIONS=88]="AUDIOBOOK_RELATIONS",e[e.HOME_POC_BASECARD=89]="HOME_POC_BASECARD",e[e.AUDIOBOOK_SUPPLEMENTS=90]="AUDIOBOOK_SUPPLEMENTS",e[e.PAID_PODCAST_BANNER=91]="PAID_PODCAST_BANNER",e[e.FEWER_ADS=92]="FEWER_ADS",e[e.WATCH_FEED_SHOW_EXPLORER=93]="WATCH_FEED_SHOW_EXPLORER",e[e.TRACK_EXTRA_DESCRIPTORS=94]="TRACK_EXTRA_DESCRIPTORS",e[e.TRACK_EXTRA_AUDIO_ATTRIBUTES=95]="TRACK_EXTRA_AUDIO_ATTRIBUTES",e[e.TRACK_EXTENDED_CREDITS=96]="TRACK_EXTENDED_CREDITS",e[e.SIMPLE_TRAIT=97]="SIMPLE_TRAIT",e[e.AUDIO_ASSOCIATIONS=98]="AUDIO_ASSOCIATIONS",e[e.VIDEO_ASSOCIATIONS=99]="VIDEO_ASSOCIATIONS",e[e.PLAYLIST_TUNER=100]="PLAYLIST_TUNER",e[e.ARTIST_VIDEOS_ENTRYPOINT=101]="ARTIST_VIDEOS_ENTRYPOINT",e[e.PRERELEASE=102]="PRERELEASE",e[e.CONTENT_ALTERNATIVES=103]="CONTENT_ALTERNATIVES",e[e.SNAPSHOT_SHARING=105]="SNAPSHOT_SHARING"}(c||(c={}));new class e extends el{constructor(){super("com.spotify.extendedmetadata.proto.BatchedEntityRequest",[{no:1,name:"header",kind:"message",T:()=>ej},{no:2,name:"request",kind:"message",repeat:1,T:()=>eW}])}create(e){let t=globalThis.Object.create(this.messagePrototype);return t.request=[],void 0!==e&&S(this,t,e),t}internalBinaryRead(e,n,r,s){let i=s??this.create(),a=e.pos+n;for(;e.pos<a;){let[n,s]=e.tag();switch(n){case 1:i.header=ej.internalBinaryRead(e,e.uint32(),r,i.header);break;case 2:i.request.push(eW.internalBinaryRead(e,e.uint32(),r));break;default:let a=r.readUnknownField;if("throw"===a)throw new globalThis.Error(`Unknown field ${n} (wire type ${s}) for ${this.typeName}`);let o=e.skip(s);!1!==a&&(!0===a?t.onRead:a)(this.typeName,i,n,s,o)}}return i}internalBinaryWrite(e,r,s){e.header&&ej.internalBinaryWrite(e.header,r.tag(1,n.LengthDelimited).fork(),s).join();for(let t=0;t<e.request.length;t++)eW.internalBinaryWrite(e.request[t],r.tag(2,n.LengthDelimited).fork(),s).join();let i=s.writeUnknownFields;return!1!==i&&(!0==i?t.onWrite:i)(this.typeName,e,r),r}};let ej=new class e extends el{constructor(){super("com.spotify.extendedmetadata.proto.BatchedEntityRequestHeader",[{no:1,name:"country",kind:"scalar",T:9},{no:2,name:"catalogue",kind:"scalar",T:9},{no:3,name:"task_id",kind:"scalar",T:12}])}create(e){let t=globalThis.Object.create(this.messagePrototype);return t.country="",t.catalogue="",t.taskId=new Uint8Array(0),void 0!==e&&S(this,t,e),t}internalBinaryRead(e,n,r,s){let i=s??this.create(),a=e.pos+n;for(;e.pos<a;){let[n,s]=e.tag();switch(n){case 1:i.country=e.string();break;case 2:i.catalogue=e.string();break;case 3:i.taskId=e.bytes();break;default:let a=r.readUnknownField;if("throw"===a)throw new globalThis.Error(`Unknown field ${n} (wire type ${s}) for ${this.typeName}`);let o=e.skip(s);!1!==a&&(!0===a?t.onRead:a)(this.typeName,i,n,s,o)}}return i}internalBinaryWrite(e,r,s){""!==e.country&&r.tag(1,n.LengthDelimited).string(e.country),""!==e.catalogue&&r.tag(2,n.LengthDelimited).string(e.catalogue),e.taskId.length&&r.tag(3,n.LengthDelimited).bytes(e.taskId);let i=s.writeUnknownFields;return!1!==i&&(!0==i?t.onWrite:i)(this.typeName,e,r),r}},eW=new class e extends el{constructor(){super("com.spotify.extendedmetadata.proto.EntityRequest",[{no:1,name:"uri",kind:"scalar",T:9},{no:2,name:"query",kind:"message",repeat:1,T:()=>eM}])}create(e){let t=globalThis.Object.create(this.messagePrototype);return t.uri="",t.query=[],void 0!==e&&S(this,t,e),t}internalBinaryRead(e,n,r,s){let i=s??this.create(),a=e.pos+n;for(;e.pos<a;){let[n,s]=e.tag();switch(n){case 1:i.uri=e.string();break;case 2:i.query.push(eM.internalBinaryRead(e,e.uint32(),r));break;default:let a=r.readUnknownField;if("throw"===a)throw new globalThis.Error(`Unknown field ${n} (wire type ${s}) for ${this.typeName}`);let o=e.skip(s);!1!==a&&(!0===a?t.onRead:a)(this.typeName,i,n,s,o)}}return i}internalBinaryWrite(e,r,s){""!==e.uri&&r.tag(1,n.LengthDelimited).string(e.uri);for(let t=0;t<e.query.length;t++)eM.internalBinaryWrite(e.query[t],r.tag(2,n.LengthDelimited).fork(),s).join();let i=s.writeUnknownFields;return!1!==i&&(!0==i?t.onWrite:i)(this.typeName,e,r),r}},eM=new class e extends el{constructor(){super("com.spotify.extendedmetadata.proto.ExtensionQuery",[{no:1,name:"kind",kind:"enum",T:()=>["com.spotify.extendedmetadata.proto.ExtensionKind",c]},{no:2,name:"etag",kind:"scalar",opt:!0,T:9}])}create(e){let t=globalThis.Object.create(this.messagePrototype);return t.kind=0,void 0!==e&&S(this,t,e),t}internalBinaryRead(e,n,r,s){let i=s??this.create(),a=e.pos+n;for(;e.pos<a;){let[n,s]=e.tag();switch(n){case 1:i.kind=e.int32();break;case 2:i.etag=e.string();break;default:let a=r.readUnknownField;if("throw"===a)throw new globalThis.Error(`Unknown field ${n} (wire type ${s}) for ${this.typeName}`);let o=e.skip(s);!1!==a&&(!0===a?t.onRead:a)(this.typeName,i,n,s,o)}}return i}internalBinaryWrite(e,r,s){0!==e.kind&&r.tag(1,n.Varint).int32(e.kind),void 0!==e.etag&&r.tag(2,n.LengthDelimited).string(e.etag);let i=s.writeUnknownFields;return!1!==i&&(!0==i?t.onWrite:i)(this.typeName,e,r),r}},eG=new class e extends el{constructor(){super("com.spotify.extendedmetadata.proto.BatchedExtensionResponse",[{no:1,name:"header",kind:"message",T:()=>eH},{no:2,name:"extended_metadata",kind:"message",repeat:1,T:()=>eX}])}create(e){let t=globalThis.Object.create(this.messagePrototype);return t.extendedMetadata=[],void 0!==e&&S(this,t,e),t}internalBinaryRead(e,n,r,s){let i=s??this.create(),a=e.pos+n;for(;e.pos<a;){let[n,s]=e.tag();switch(n){case 1:i.header=eH.internalBinaryRead(e,e.uint32(),r,i.header);break;case 2:i.extendedMetadata.push(eX.internalBinaryRead(e,e.uint32(),r));break;default:let a=r.readUnknownField;if("throw"===a)throw new globalThis.Error(`Unknown field ${n} (wire type ${s}) for ${this.typeName}`);let o=e.skip(s);!1!==a&&(!0===a?t.onRead:a)(this.typeName,i,n,s,o)}}return i}internalBinaryWrite(e,r,s){e.header&&eH.internalBinaryWrite(e.header,r.tag(1,n.LengthDelimited).fork(),s).join();for(let t=0;t<e.extendedMetadata.length;t++)eX.internalBinaryWrite(e.extendedMetadata[t],r.tag(2,n.LengthDelimited).fork(),s).join();let i=s.writeUnknownFields;return!1!==i&&(!0==i?t.onWrite:i)(this.typeName,e,r),r}},eH=new class e extends el{constructor(){super("com.spotify.extendedmetadata.proto.BatchedExtensionResponseHeader",[])}create(e){let t=globalThis.Object.create(this.messagePrototype);return void 0!==e&&S(this,t,e),t}internalBinaryRead(e,t,n,r){return r??this.create()}internalBinaryWrite(e,n,r){let s=r.writeUnknownFields;return!1!==s&&(!0==s?t.onWrite:s)(this.typeName,e,n),n}},eX=new class e extends el{constructor(){super("com.spotify.extendedmetadata.proto.EntityExtensionDataArray",[{no:1,name:"header",kind:"message",T:()=>eY},{no:2,name:"kind",kind:"enum",T:()=>["com.spotify.extendedmetadata.proto.ExtensionKind",c]},{no:3,name:"extension_data",kind:"message",repeat:1,T:()=>eJ}])}create(e){let t=globalThis.Object.create(this.messagePrototype);return t.kind=0,t.extensionData=[],void 0!==e&&S(this,t,e),t}internalBinaryRead(e,n,r,s){let i=s??this.create(),a=e.pos+n;for(;e.pos<a;){let[n,s]=e.tag();switch(n){case 1:i.header=eY.internalBinaryRead(e,e.uint32(),r,i.header);break;case 2:i.kind=e.int32();break;case 3:i.extensionData.push(eJ.internalBinaryRead(e,e.uint32(),r));break;default:let a=r.readUnknownField;if("throw"===a)throw new globalThis.Error(`Unknown field ${n} (wire type ${s}) for ${this.typeName}`);let o=e.skip(s);!1!==a&&(!0===a?t.onRead:a)(this.typeName,i,n,s,o)}}return i}internalBinaryWrite(e,r,s){e.header&&eY.internalBinaryWrite(e.header,r.tag(1,n.LengthDelimited).fork(),s).join(),0!==e.kind&&r.tag(2,n.Varint).int32(e.kind);for(let t=0;t<e.extensionData.length;t++)eJ.internalBinaryWrite(e.extensionData[t],r.tag(3,n.LengthDelimited).fork(),s).join();let i=s.writeUnknownFields;return!1!==i&&(!0==i?t.onWrite:i)(this.typeName,e,r),r}},eY=new class e extends el{constructor(){super("com.spotify.extendedmetadata.proto.EntityExtensionDataArrayHeader",[{no:1,name:"provider_error_status",kind:"scalar",T:5},{no:2,name:"cache_ttl_in_seconds",kind:"scalar",T:3,L:2},{no:3,name:"offline_ttl_in_seconds",kind:"scalar",T:3,L:2},{no:4,name:"extension_type",kind:"enum",T:()=>["com.spotify.extendedmetadata.proto.ExtensionType",l]}])}create(e){let t=globalThis.Object.create(this.messagePrototype);return t.providerErrorStatus=0,t.cacheTtlInSeconds=0,t.offlineTtlInSeconds=0,t.extensionType=0,void 0!==e&&S(this,t,e),t}internalBinaryRead(e,n,r,s){let i=s??this.create(),a=e.pos+n;for(;e.pos<a;){let[n,s]=e.tag();switch(n){case 1:i.providerErrorStatus=e.int32();break;case 2:i.cacheTtlInSeconds=e.int64().toNumber();break;case 3:i.offlineTtlInSeconds=e.int64().toNumber();break;case 4:i.extensionType=e.int32();break;default:let a=r.readUnknownField;if("throw"===a)throw new globalThis.Error(`Unknown field ${n} (wire type ${s}) for ${this.typeName}`);let o=e.skip(s);!1!==a&&(!0===a?t.onRead:a)(this.typeName,i,n,s,o)}}return i}internalBinaryWrite(e,r,s){0!==e.providerErrorStatus&&r.tag(1,n.Varint).int32(e.providerErrorStatus),0!==e.cacheTtlInSeconds&&r.tag(2,n.Varint).int64(e.cacheTtlInSeconds),0!==e.offlineTtlInSeconds&&r.tag(3,n.Varint).int64(e.offlineTtlInSeconds),0!==e.extensionType&&r.tag(4,n.Varint).int32(e.extensionType);let i=s.writeUnknownFields;return!1!==i&&(!0==i?t.onWrite:i)(this.typeName,e,r),r}},eJ=new class e extends el{constructor(){super("com.spotify.extendedmetadata.proto.EntityExtensionData",[{no:1,name:"header",kind:"message",T:()=>eq},{no:2,name:"entity_uri",kind:"scalar",T:9},{no:3,name:"extension_data",kind:"message",T:()=>eK}])}create(e){let t=globalThis.Object.create(this.messagePrototype);return t.entityUri="",void 0!==e&&S(this,t,e),t}internalBinaryRead(e,n,r,s){let i=s??this.create(),a=e.pos+n;for(;e.pos<a;){let[n,s]=e.tag();switch(n){case 1:i.header=eq.internalBinaryRead(e,e.uint32(),r,i.header);break;case 2:i.entityUri=e.string();break;case 3:i.extensionData=eK.internalBinaryRead(e,e.uint32(),r,i.extensionData);break;default:let a=r.readUnknownField;if("throw"===a)throw new globalThis.Error(`Unknown field ${n} (wire type ${s}) for ${this.typeName}`);let o=e.skip(s);!1!==a&&(!0===a?t.onRead:a)(this.typeName,i,n,s,o)}}return i}internalBinaryWrite(e,r,s){e.header&&eq.internalBinaryWrite(e.header,r.tag(1,n.LengthDelimited).fork(),s).join(),""!==e.entityUri&&r.tag(2,n.LengthDelimited).string(e.entityUri),e.extensionData&&eK.internalBinaryWrite(e.extensionData,r.tag(3,n.LengthDelimited).fork(),s).join();let i=s.writeUnknownFields;return!1!==i&&(!0==i?t.onWrite:i)(this.typeName,e,r),r}},eq=new class e extends el{constructor(){super("com.spotify.extendedmetadata.proto.EntityExtensionDataHeader",[{no:1,name:"status_code",kind:"scalar",T:5},{no:2,name:"etag",kind:"scalar",T:9},{no:3,name:"locale",kind:"scalar",T:9},{no:4,name:"cache_ttl_in_seconds",kind:"scalar",T:3,L:2},{no:5,name:"offline_ttl_in_seconds",kind:"scalar",T:3,L:2}])}create(e){let t=globalThis.Object.create(this.messagePrototype);return t.statusCode=0,t.etag="",t.locale="",t.cacheTtlInSeconds=0,t.offlineTtlInSeconds=0,void 0!==e&&S(this,t,e),t}internalBinaryRead(e,n,r,s){let i=s??this.create(),a=e.pos+n;for(;e.pos<a;){let[n,s]=e.tag();switch(n){case 1:i.statusCode=e.int32();break;case 2:i.etag=e.string();break;case 3:i.locale=e.string();break;case 4:i.cacheTtlInSeconds=e.int64().toNumber();break;case 5:i.offlineTtlInSeconds=e.int64().toNumber();break;default:let a=r.readUnknownField;if("throw"===a)throw new globalThis.Error(`Unknown field ${n} (wire type ${s}) for ${this.typeName}`);let o=e.skip(s);!1!==a&&(!0===a?t.onRead:a)(this.typeName,i,n,s,o)}}return i}internalBinaryWrite(e,r,s){0!==e.statusCode&&r.tag(1,n.Varint).int32(e.statusCode),""!==e.etag&&r.tag(2,n.LengthDelimited).string(e.etag),""!==e.locale&&r.tag(3,n.LengthDelimited).string(e.locale),0!==e.cacheTtlInSeconds&&r.tag(4,n.Varint).int64(e.cacheTtlInSeconds),0!==e.offlineTtlInSeconds&&r.tag(5,n.Varint).int64(e.offlineTtlInSeconds);let i=s.writeUnknownFields;return!1!==i&&(!0==i?t.onWrite:i)(this.typeName,e,r),r}},eZ=new class e extends el{constructor(){super("com.spotify.extendedmetadata.proto.PlainListAssoc",[{no:1,name:"entity_uri",kind:"scalar",repeat:2,T:9}])}create(e){let t=globalThis.Object.create(this.messagePrototype);return t.entityUri=[],void 0!==e&&S(this,t,e),t}internalBinaryRead(e,n,r,s){let i=s??this.create(),a=e.pos+n;for(;e.pos<a;){let[n,s]=e.tag();if(1===n)i.entityUri.push(e.string());else{let a=r.readUnknownField;if("throw"===a)throw new globalThis.Error(`Unknown field ${n} (wire type ${s}) for ${this.typeName}`);let o=e.skip(s);!1!==a&&(!0===a?t.onRead:a)(this.typeName,i,n,s,o)}}return i}internalBinaryWrite(e,r,s){for(let t=0;t<e.entityUri.length;t++)r.tag(1,n.LengthDelimited).string(e.entityUri[t]);let i=s.writeUnknownFields;return!1!==i&&(!0==i?t.onWrite:i)(this.typeName,e,r),r}},ez=new class e extends el{constructor(){super("com.spotify.extendedmetadata.proto.AssocHeader",[])}create(e){let t=globalThis.Object.create(this.messagePrototype);return void 0!==e&&S(this,t,e),t}internalBinaryRead(e,t,n,r){return r??this.create()}internalBinaryWrite(e,n,r){let s=r.writeUnknownFields;return!1!==s&&(!0==s?t.onWrite:s)(this.typeName,e,n),n}};new class e extends el{constructor(){super("com.spotify.extendedmetadata.proto.Assoc",[{no:1,name:"header",kind:"message",T:()=>ez},{no:2,name:"plain_list",kind:"message",T:()=>eZ}])}create(e){let t=globalThis.Object.create(this.messagePrototype);return void 0!==e&&S(this,t,e),t}internalBinaryRead(e,n,r,s){let i=s??this.create(),a=e.pos+n;for(;e.pos<a;){let[n,s]=e.tag();switch(n){case 1:i.header=ez.internalBinaryRead(e,e.uint32(),r,i.header);break;case 2:i.plainList=eZ.internalBinaryRead(e,e.uint32(),r,i.plainList);break;default:let a=r.readUnknownField;if("throw"===a)throw new globalThis.Error(`Unknown field ${n} (wire type ${s}) for ${this.typeName}`);let o=e.skip(s);!1!==a&&(!0===a?t.onRead:a)(this.typeName,i,n,s,o)}}return i}internalBinaryWrite(e,r,s){e.header&&ez.internalBinaryWrite(e.header,r.tag(1,n.LengthDelimited).fork(),s).join(),e.plainList&&eZ.internalBinaryWrite(e.plainList,r.tag(2,n.LengthDelimited).fork(),s).join();let i=s.writeUnknownFields;return!1!==i&&(!0==i?t.onWrite:i)(this.typeName,e,r),r}};let eQ=new URL($request.url);g(`⚠ url: ${eQ.toJSON()}`,"");let e0=$request.method,e1=eQ.hostname,e2=eQ.pathname;g(`⚠ METHOD: ${e0}, HOST: ${e1}, PATH: ${e2}`,"");let e3=($response.headers?.["Content-Type"]??$response.headers?.["content-type"])?.split(";")?.[0];g(`⚠ FORMAT: ${e3}`,""),(async()=>{let{Settings:e,Caches:t,Configs:n}=function(e,t,n){g("☑️ Set Environment Variables","");let{Settings:r,Caches:s,Configs:i}=function(e,t,n){let r=m.getItem(e,n),s={};switch(typeof $argument){case"string":let i=Object.fromEntries($argument.split("&").map(e=>e.split("=").map(e=>e.replace(/\"/g,""))));for(let e in i)p.set(s,e,i[e]);break;case"object":for(let e in $argument)p.set(s,e,$argument[e])}let a={Settings:n?.Default?.Settings||{},Configs:n?.Default?.Configs||{},Caches:{}};for(let e of(!Array.isArray(t)&&(t=[t]),t))a.Settings={...a.Settings,...n?.[e]?.Settings,...s,...r?.[e]?.Settings},a.Configs={...a.Configs,...n?.[e]?.Configs},r?.[e]?.Caches&&"string"==typeof r?.[e]?.Caches&&(r[e].Caches=JSON.parse(r?.[e]?.Caches)),a.Caches={...a.Caches,...r?.[e]?.Caches};return function e(t,n){for(var r in t){var s=t[r];t[r]="object"==typeof s&&null!==s?e(s,n):n(r,s)}return t}(a.Settings,(e,t)=>("true"===t||"false"===t?t=JSON.parse(t):"string"==typeof t&&(t=t.includes(",")?t.split(",").map(e=>o(e)):o(t)),t)),a;function o(e){return e&&!isNaN(e)&&(e=parseInt(e,10)),e}}(e,t,n);return!Array.isArray(r?.Types)&&(r.Types=r.Types?[r.Types]:[]),g(`✅ Set Environment Variables, Settings: ${typeof r}, Settings内容: ${JSON.stringify(r)}`,""),("object"!=typeof s?.Playlists||Array.isArray(s?.Playlists))&&(s.Playlists={}),s.Playlists.Master=new Map(JSON.parse(s?.Playlists?.Master||"[]")),s.Playlists.Subtitle=new Map(JSON.parse(s?.Playlists?.Subtitle||"[]")),"object"!=typeof s?.Subtitles&&(s.Subtitles=new Map(JSON.parse(s?.Subtitles||"[]"))),("object"!=typeof s?.Metadatas||Array.isArray(s?.Metadatas))&&(s.Metadatas={}),"object"!=typeof s?.Metadatas?.Tracks&&(s.Metadatas.Tracks=new Map(JSON.parse(s?.Metadatas?.Tracks||"[]"))),{Settings:r,Caches:s,Configs:i}}("DualSubs","Spotify",y);if(g(`⚠ Settings.Switch: ${e?.Switch}`,""),!1===e.Switch);else{let n=eQ.searchParams.get("subtype")??e.Type,r=[eQ.searchParams.get("lang")?.toUpperCase?.()??e.Languages[0],(eQ.searchParams.get("tlang")??t?.tlang)?.toUpperCase?.()??e.Languages[1]];g(`⚠ Type: ${n}, Languages: ${r}`,"");let s={};switch(e3){case void 0:case"application/x-www-form-urlencoded":case"text/plain":default:case"application/x-mpegURL":case"application/x-mpegurl":case"application/vnd.apple.mpegurl":case"audio/mpegurl":case"text/xml":case"text/html":case"text/plist":case"application/xml":case"application/plist":case"application/x-plist":case"text/vtt":case"application/vtt":break;case"text/json":case"application/json":switch(s=JSON.parse($response.body??"{}"),g(`🚧 body: ${JSON.stringify(s)}`,""),e2){case"/melody/v1/product_state":s.country=e.Country,s["selected-language"]=e.Languages[1].toLowerCase();break;case"/v1/tracks":s?.tracks?.forEach?.(e=>{g(`🚧 track: ${JSON.stringify(e)}`,"");let n=e?.id,r={track:e?.name,album:e?.album?.name,artist:e?.artists?.[0]?.name};t.Metadatas.Tracks.set(n,r)}),t.Metadatas.Tracks=function(e,t=100){return console.log(`☑️ Set Cache, cacheSize: ${t}`,""),e=(e=Array.from(e||[])).slice(-t),console.log("✅ Set Cache",""),e}(t.Metadatas.Tracks,e.CacheSize),m.setItem("@DualSubs.Spotify.Caches.Metadatas.Tracks",t.Metadatas.Tracks)}$response.body=JSON.stringify(s);break;case"application/protobuf":case"application/x-protobuf":case"application/vnd.google.protobuf":case"application/grpc":case"application/grpc+proto":case"application/octet-stream":{let t="Quantumult X"===h?new Uint8Array($response.bodyBytes??[]):$response.body??new Uint8Array;switch(e3){case"application/protobuf":case"application/x-protobuf":case"application/vnd.google.protobuf":switch(e2){case"/bootstrap/v1/bootstrap":case"/user-customization-service/v1/customize":switch(e2){case"/bootstrap/v1/bootstrap":{s=ex.fromBinary(t);let n=s?.ucsResponseV0?.result?.success?.customization?.result?.success?.resolveResult?.resolveSuccess?.configuration?.assignedValues;n&&(n=T(n));let r=s?.ucsResponseV0?.result?.success?.customization?.result?.success?.accountAttributesResult?.accountAttributesSuccess?.accountAttributes;r&&(r.country_code={value:{oneofKind:"stringValue",stringValue:e.CountryCode}},r=b(r)),t=ex.toBinary(s);break}case"/user-customization-service/v1/customize":{s=eU.fromBinary(t);let n=s?.result?.success?.resolveResult?.resolveSuccess?.configuration?.assignedValues;n&&(n=T(n));let r=s?.result?.success?.accountAttributesResult?.accountAttributesSuccess?.accountAttributes;r&&(r.country_code={value:{oneofKind:"stringValue",stringValue:e.CountryCode}},r=b(r)),t=eU.toBinary(s)}}break;case"/extended-metadata/v0/extended-metadata":s=eG.fromBinary(t),t=eG.toBinary(s)}}$response.body=t}}}})().catch(e=>(function(e){switch(h){case"Surge":case"Loon":case"Stash":case"Egern":case"Shadowrocket":case"Quantumult X":default:g("",`❗️执行错误!`,e,"");break;case"Node.js":g("",`❗️执行错误!`,e.stack,"")}})(e)).finally(()=>(function(e={}){switch(h){case"Surge":e.policy&&p.set(e,"headers.X-Surge-Policy",e.policy),g("",`🚩 执行结束! 🕛 ${new Date().getTime()/1e3-$script.startTime} 秒`,""),$done(e);break;case"Loon":e.policy&&(e.node=e.policy),g("",`🚩 执行结束! 🕛 ${(new Date-$script.startTime)/1e3} 秒`,""),$done(e);break;case"Stash":e.policy&&p.set(e,"headers.X-Stash-Selected-Proxy",encodeURI(e.policy)),g("",`🚩 执行结束! 🕛 ${(new Date-$script.startTime)/1e3} 秒`,""),$done(e);break;case"Egern":case"Shadowrocket":default:g("",`🚩 执行结束!`,""),$done(e);break;case"Quantumult X":e.policy&&p.set(e,"opts.policy",e.policy),delete e["auto-redirect"],delete e["auto-cookie"],delete e["binary-mode"],delete e.charset,delete e.host,delete e.insecure,delete e.method,delete e.opt,delete e.path,delete e.policy,delete e["policy-descriptor"],delete e.scheme,delete e.sessionIndex,delete e.statusCode,delete e.timeout,e.body instanceof ArrayBuffer?(e.bodyBytes=e.body,delete e.body):ArrayBuffer.isView(e.body)?(e.bodyBytes=e.body.buffer.slice(e.body.byteOffset,e.body.byteLength+e.body.byteOffset),delete e.body):e.body&&delete e.bodyBytes,g("",`🚩 执行结束!`,""),$done(e);break;case"Node.js":g("",`🚩 执行结束!`,""),process.exit(1)}})($response))})();
//# sourceMappingURL=response.bundle.js.map