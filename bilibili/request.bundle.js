console.log("\uD83D\uDCFA BiliBili: \uD83D\uDEE1Ô∏è ADBlock"),console.log("request.bundle.js"),console.log("Version: 0.6.17"),console.log("Date: 2024/12/23 16:07:13"),(()=>{var e={249:function(e,t,s){var a,r;a=0,r=function(){var e=e||function(e,t){if("undefined"!=typeof window&&window.crypto&&(a=window.crypto),"undefined"!=typeof self&&self.crypto&&(a=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(a=globalThis.crypto),!a&&"undefined"!=typeof window&&window.msCrypto&&(a=window.msCrypto),!a&&void 0!==s.g&&s.g.crypto&&(a=s.g.crypto),!a)try{a=s(761)}catch(e){}var a,r=function(){if(a){if("function"==typeof a.getRandomValues)try{return a.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof a.randomBytes)try{return a.randomBytes(4).readInt32LE()}catch(e){}}throw Error("Native crypto module could not be used to get secure random number.")},i=Object.create||function(){function e(){}return function(t){var s;return e.prototype=t,s=new e,e.prototype=null,s}}(),n={},o=n.lib={},c=o.Base={extend:function(e){var t=i(this);return e&&t.mixIn(e),(!t.hasOwnProperty("init")||this.init===t.init)&&(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},l=o.WordArray=c.extend({init:function(e,s){e=this.words=e||[],t!=s?this.sigBytes=s:this.sigBytes=4*e.length},toString:function(e){return(e||d).stringify(this)},concat:function(e){var t=this.words,s=e.words,a=this.sigBytes,r=e.sigBytes;if(this.clamp(),a%4)for(var i=0;i<r;i++){var n=s[i>>>2]>>>24-i%4*8&255;t[a+i>>>2]|=n<<24-(a+i)%4*8}else for(var o=0;o<r;o+=4)t[a+o>>>2]=s[o>>>2];return this.sigBytes+=r,this},clamp:function(){var t=this.words,s=this.sigBytes;t[s>>>2]&=0xffffffff<<32-s%4*8,t.length=e.ceil(s/4)},clone:function(){var e=c.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],s=0;s<e;s+=4)t.push(r());return new l.init(t,e)}}),u=n.enc={},d=u.Hex={stringify:function(e){for(var t=e.words,s=e.sigBytes,a=[],r=0;r<s;r++){var i=t[r>>>2]>>>24-r%4*8&255;a.push((i>>>4).toString(16)),a.push((15&i).toString(16))}return a.join("")},parse:function(e){for(var t=e.length,s=[],a=0;a<t;a+=2)s[a>>>3]|=parseInt(e.substr(a,2),16)<<24-a%8*4;return new l.init(s,t/2)}},f=u.Latin1={stringify:function(e){for(var t=e.words,s=e.sigBytes,a=[],r=0;r<s;r++){var i=t[r>>>2]>>>24-r%4*8&255;a.push(String.fromCharCode(i))}return a.join("")},parse:function(e){for(var t=e.length,s=[],a=0;a<t;a++)s[a>>>2]|=(255&e.charCodeAt(a))<<24-a%4*8;return new l.init(s,t)}},h=u.Utf8={stringify:function(e){try{return decodeURIComponent(escape(f.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return f.parse(unescape(encodeURIComponent(e)))}},p=o.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new l.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=h.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var s,a=this._data,r=a.words,i=a.sigBytes,n=this.blockSize,o=i/(4*n),c=(o=t?e.ceil(o):e.max((0|o)-this._minBufferSize,0))*n,u=e.min(4*c,i);if(c){for(var d=0;d<c;d+=n)this._doProcessBlock(r,d);s=r.splice(0,c),a.sigBytes-=u}return new l.init(s,u)},clone:function(){var e=c.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});o.Hasher=p.extend({cfg:c.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){p.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,s){return new e.init(s).finalize(t)}},_createHmacHelper:function(e){return function(t,s){return new g.HMAC.init(e,s).finalize(t)}}});var g=n.algo={};return n}(Math);return e},e.exports=r()},214:function(e,t,s){var a,r;a=0,r=function(e){return!function(t){var s=e.lib,a=s.WordArray,r=s.Hasher,i=e.algo,n=[];!function(){for(var e=0;e<64;e++)n[e]=0x100000000*t.abs(t.sin(e+1))|0}();var o=i.MD5=r.extend({_doReset:function(){this._hash=new a.init([0x67452301,0xefcdab89,0x98badcfe,0x10325476])},_doProcessBlock:function(e,t){for(var s=0;s<16;s++){var a=t+s,r=e[a];e[a]=(r<<8|r>>>24)&0xff00ff|(r<<24|r>>>8)&0xff00ff00}var i=this._hash.words,o=e[t+0],f=e[t+1],h=e[t+2],p=e[t+3],g=e[t+4],y=e[t+5],m=e[t+6],b=e[t+7],w=e[t+8],v=e[t+9],S=e[t+10],k=e[t+11],$=e[t+12],x=e[t+13],A=e[t+14],B=e[t+15],E=i[0],C=i[1],N=i[2],R=i[3];E=c(E,C,N,R,o,7,n[0]),R=c(R,E,C,N,f,12,n[1]),N=c(N,R,E,C,h,17,n[2]),C=c(C,N,R,E,p,22,n[3]),E=c(E,C,N,R,g,7,n[4]),R=c(R,E,C,N,y,12,n[5]),N=c(N,R,E,C,m,17,n[6]),C=c(C,N,R,E,b,22,n[7]),E=c(E,C,N,R,w,7,n[8]),R=c(R,E,C,N,v,12,n[9]),N=c(N,R,E,C,S,17,n[10]),C=c(C,N,R,E,k,22,n[11]),E=c(E,C,N,R,$,7,n[12]),R=c(R,E,C,N,x,12,n[13]),N=c(N,R,E,C,A,17,n[14]),C=c(C,N,R,E,B,22,n[15]),E=l(E,C,N,R,f,5,n[16]),R=l(R,E,C,N,m,9,n[17]),N=l(N,R,E,C,k,14,n[18]),C=l(C,N,R,E,o,20,n[19]),E=l(E,C,N,R,y,5,n[20]),R=l(R,E,C,N,S,9,n[21]),N=l(N,R,E,C,B,14,n[22]),C=l(C,N,R,E,g,20,n[23]),E=l(E,C,N,R,v,5,n[24]),R=l(R,E,C,N,A,9,n[25]),N=l(N,R,E,C,p,14,n[26]),C=l(C,N,R,E,w,20,n[27]),E=l(E,C,N,R,x,5,n[28]),R=l(R,E,C,N,h,9,n[29]),N=l(N,R,E,C,b,14,n[30]),C=l(C,N,R,E,$,20,n[31]),E=u(E,C,N,R,y,4,n[32]),R=u(R,E,C,N,w,11,n[33]),N=u(N,R,E,C,k,16,n[34]),C=u(C,N,R,E,A,23,n[35]),E=u(E,C,N,R,f,4,n[36]),R=u(R,E,C,N,g,11,n[37]),N=u(N,R,E,C,b,16,n[38]),C=u(C,N,R,E,S,23,n[39]),E=u(E,C,N,R,x,4,n[40]),R=u(R,E,C,N,o,11,n[41]),N=u(N,R,E,C,p,16,n[42]),C=u(C,N,R,E,m,23,n[43]),E=u(E,C,N,R,v,4,n[44]),R=u(R,E,C,N,$,11,n[45]),N=u(N,R,E,C,B,16,n[46]),C=u(C,N,R,E,h,23,n[47]),E=d(E,C,N,R,o,6,n[48]),R=d(R,E,C,N,b,10,n[49]),N=d(N,R,E,C,A,15,n[50]),C=d(C,N,R,E,y,21,n[51]),E=d(E,C,N,R,$,6,n[52]),R=d(R,E,C,N,p,10,n[53]),N=d(N,R,E,C,S,15,n[54]),C=d(C,N,R,E,f,21,n[55]),E=d(E,C,N,R,w,6,n[56]),R=d(R,E,C,N,B,10,n[57]),N=d(N,R,E,C,m,15,n[58]),C=d(C,N,R,E,x,21,n[59]),E=d(E,C,N,R,g,6,n[60]),R=d(R,E,C,N,k,10,n[61]),N=d(N,R,E,C,h,15,n[62]),C=d(C,N,R,E,v,21,n[63]),i[0]=i[0]+E|0,i[1]=i[1]+C|0,i[2]=i[2]+N|0,i[3]=i[3]+R|0},_doFinalize:function(){var e=this._data,s=e.words,a=8*this._nDataBytes,r=8*e.sigBytes;s[r>>>5]|=128<<24-r%32;var i=t.floor(a/0x100000000);s[(r+64>>>9<<4)+15]=(i<<8|i>>>24)&0xff00ff|(i<<24|i>>>8)&0xff00ff00,s[(r+64>>>9<<4)+14]=(a<<8|a>>>24)&0xff00ff|(a<<24|a>>>8)&0xff00ff00,e.sigBytes=(s.length+1)*4,this._process();for(var n=this._hash,o=n.words,c=0;c<4;c++){var l=o[c];o[c]=(l<<8|l>>>24)&0xff00ff|(l<<24|l>>>8)&0xff00ff00}return n},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}});function c(e,t,s,a,r,i,n){var o=e+(t&s|~t&a)+r+n;return(o<<i|o>>>32-i)+t}function l(e,t,s,a,r,i,n){var o=e+(t&a|s&~a)+r+n;return(o<<i|o>>>32-i)+t}function u(e,t,s,a,r,i,n){var o=e+(t^s^a)+r+n;return(o<<i|o>>>32-i)+t}function d(e,t,s,a,r,i,n){var o=e+(s^(t|~a))+r+n;return(o<<i|o>>>32-i)+t}e.MD5=r._createHelper(o),e.HmacMD5=r._createHmacHelper(o)}(Math),e.MD5},e.exports=r(s(249))},761:function(){}},t={};function s(a){var r=t[a];if(void 0!==r)return r.exports;var i=t[a]={exports:{}};return e[a].call(i.exports,i,i.exports,s),i.exports}s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}}(),s.rv=function(){return"1.1.8"},s.ruid="bundler=rspack@1.1.8";(()=>{"use strict";let e,t=(()=>{let e=Object.keys(globalThis);switch(!0){case e.includes("$task"):return"Quantumult X";case e.includes("$loon"):return"Loon";case e.includes("$rocket"):return"Shadowrocket";case"undefined"!=typeof module:return"Node.js";case e.includes("Egern"):return"Egern";case e.includes("$environment"):if($environment["surge-version"])return"Surge";if($environment["stash-version"])return"Stash";return;default:return}})();class a{static #e=new Map([]);static #t=[];static #s=new Map([]);static clear=()=>{};static count=(e="default")=>{switch(a.#e.has(e)){case!0:a.#e.set(e,a.#e.get(e)+1);break;case!1:a.#e.set(e,0)}a.log(`${e}: ${a.#e.get(e)}`)};static countReset=(e="default")=>{switch(a.#e.has(e)){case!0:a.#e.set(e,0),a.log(`${e}: ${a.#e.get(e)}`);break;case!1:a.warn(`Counter "${e}" doesn‚Äôt exist`)}};static debug=(...e)=>{!(a.#a<4)&&(e=e.map(e=>`üÖ±Ô∏è ${e}`),a.log(...e))};static error(...e){if(!(a.#a<1)){switch(t){case"Surge":case"Loon":case"Stash":case"Egern":case"Shadowrocket":case"Quantumult X":default:e=e.map(e=>`‚ùå ${e}`);break;case"Node.js":e=e.map(e=>`‚ùå ${e.stack}`)}a.log(...e)}}static exception=(...e)=>a.error(...e);static group=e=>a.#t.unshift(e);static groupEnd=()=>a.#t.shift();static info(...e){!(a.#a<3)&&(e=e.map(e=>`‚ÑπÔ∏è ${e}`),a.log(...e))}static #a=3;static get logLevel(){switch(a.#a){case 0:return"OFF";case 1:return"ERROR";case 2:return"WARN";case 3:default:return"INFO";case 4:return"DEBUG";case 5:return"ALL"}}static set logLevel(e){switch(typeof e){case"string":e=e.toLowerCase();break;case"number":break;default:e="warn"}switch(e){case 0:case"off":a.#a=0;break;case 1:case"error":a.#a=1;break;case 2:case"warn":case"warning":default:a.#a=2;break;case 3:case"info":a.#a=3;break;case 4:case"debug":a.#a=4;break;case 5:case"all":a.#a=5}}static log=(...e)=>{0!==a.#a&&(e=e.map(e=>{switch(typeof e){case"object":e=JSON.stringify(e);break;case"bigint":case"number":case"boolean":case"string":e=e.toString()}return e}),a.#t.forEach(t=>{(e=e.map(e=>`  ${e}`)).unshift(`‚ñº ${t}:`)}),console.log((e=["",...e]).join("\n")))};static time=(e="default")=>a.#s.set(e,Date.now());static timeEnd=(e="default")=>a.#s.delete(e);static timeLog=(e="default")=>{let t=a.#s.get(e);t?a.log(`${e}: ${Date.now()-t}ms`):a.warn(`Timer "${e}" doesn‚Äôt exist`)};static warn(...e){!(a.#a<2)&&(e=e.map(e=>`‚ö†Ô∏è ${e}`),a.log(...e))}}class r{static escape(e){let t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};return e.replace(/[&<>"']/g,e=>t[e])}static get(e={},t="",s){!Array.isArray(t)&&(t=r.toPath(t));let a=t.reduce((e,t)=>Object(e)[t],e);return void 0===a?s:a}static omit(e={},t=[]){return!Array.isArray(t)&&(t=[t.toString()]),t.forEach(t=>r.unset(e,t)),e}static pick(e={},t=[]){return!Array.isArray(t)&&(t=[t.toString()]),Object.fromEntries(Object.entries(e).filter(([e,s])=>t.includes(e)))}static set(e,t,s){return!Array.isArray(t)&&(t=r.toPath(t)),t.slice(0,-1).reduce((e,s,a)=>Object(e[s])===e[s]?e[s]:e[s]=/^\d+$/.test(t[a+1])?[]:{},e)[t[t.length-1]]=s,e}static toPath(e){return e.replace(/\[(\d+)\]/g,".$1").split(".").filter(Boolean)}static unescape(e){let t={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"};return e.replace(/&amp;|&lt;|&gt;|&quot;|&#39;/g,e=>t[e])}static unset(e={},t=""){return!Array.isArray(t)&&(t=r.toPath(t)),t.reduce((e,s,a)=>a===t.length-1?(delete e[s],!0):Object(e)[s],e)}}let i={100:"Continue",101:"Switching Protocols",102:"Processing",103:"Early Hints",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",304:"Not Modified",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Content Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Too Early",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",510:"Not Extended",511:"Network Authentication Required"};function n(e={}){switch(t){case"Surge":e.policy&&r.set(e,"headers.X-Surge-Policy",e.policy),a.log("\uD83D\uDEA9 ÊâßË°åÁªìÊùü!",`üïõ ${new Date().getTime()/1e3-$script.startTime} Áßí`),$done(e);break;case"Loon":e.policy&&(e.node=e.policy),a.log("\uD83D\uDEA9 ÊâßË°åÁªìÊùü!",`üïõ ${(new Date-$script.startTime)/1e3} Áßí`),$done(e);break;case"Stash":e.policy&&r.set(e,"headers.X-Stash-Selected-Proxy",encodeURI(e.policy)),a.log("\uD83D\uDEA9 ÊâßË°åÁªìÊùü!",`üïõ ${(new Date-$script.startTime)/1e3} Áßí`),$done(e);break;case"Egern":case"Shadowrocket":a.log("\uD83D\uDEA9 ÊâßË°åÁªìÊùü!"),$done(e);break;case"Quantumult X":switch(e.policy&&r.set(e,"opts.policy",e.policy),typeof(e=r.pick(e,["status","url","headers","body","bodyBytes"])).status){case"number":e.status=`HTTP/1.1 ${e.status} ${i[e.status]}`;break;case"string":case"undefined":break;default:throw TypeError(`${Function.name}: ÂèÇÊï∞Á±ªÂûãÈîôËØØ, status ÂøÖÈ°ª‰∏∫Êï∞Â≠óÊàñÂ≠óÁ¨¶‰∏≤`)}e.body instanceof ArrayBuffer?(e.bodyBytes=e.body,e.body=void 0):ArrayBuffer.isView(e.body)?(e.bodyBytes=e.body.buffer.slice(e.body.byteOffset,e.body.byteLength+e.body.byteOffset),e.body=void 0):e.body&&(e.bodyBytes=void 0),a.log("\uD83D\uDEA9 ÊâßË°åÁªìÊùü!"),$done(e);break;default:a.log("\uD83D\uDEA9 ÊâßË°åÁªìÊùü!"),process.exit(1)}}let o=e=>{let t={};switch(typeof e){case void 0:break;case"string":case"number":case"boolean":switch($app){case"Surge":case"Stash":case"Egern":default:t.url=e;break;case"Loon":case"Shadowrocket":t.openUrl=e;break;case"Quantumult X":t["open-url"]=e;case"Node.js":}break;case"object":{let s=e.open||e["open-url"]||e.url||e.openUrl,a=e.copy||e["update-pasteboard"]||e.updatePasteboard,r=e.media||e["media-url"]||e.mediaUrl;switch($app){case"Surge":case"Stash":case"Egern":case"Shadowrocket":default:if(s&&(t.action="open-url",t.url=s),a&&(t.action="clipboard",t.text=a),r)switch(!0){case r.startsWith("http"):t["media-url"]=r;break;case r.startsWith("data:"):{let{MIME:s,Base64:a}=r.match(/^data:(?<MIME>\w+\/\w+);base64,(?<Base64>.+)/).groups;t["media-base64"]=a,t["media-base64-mime"]=e.mime||s;break}default:switch(t["media-base64"]=r,!0){case r.startsWith("CiVQREYt"):case r.startsWith("JVBERi0"):t["media-base64-mime"]="application/pdf";break;case r.startsWith("R0lGODdh"):case r.startsWith("R0lGODlh"):t["media-base64-mime"]="image/gif";break;case r.startsWith("iVBORw0KGgo"):t["media-base64-mime"]="image/png";break;case r.startsWith("/9j/"):t["media-base64-mime"]="image/jpg";break;case r.startsWith("Qk02U"):t["media-base64-mime"]="image/bmp"}}e["auto-dismiss"]&&(t["auto-dismiss"]=e["auto-dismiss"]),e.sound&&(t.sound=e.sound);break;case"Loon":s&&(t.openUrl=s),r?.startsWith("http")&&(t.mediaUrl=r);break;case"Quantumult X":s&&(t["open-url"]=s),r?.startsWith("http")&&(t["media-url"]=r),a&&(t["update-pasteboard"]=a);case"Node.js":}break}default:Console.error(`‰∏çÊîØÊåÅÁöÑÈÄöÁü•ÂèÇÊï∞Á±ªÂûã: ${typeof e}`,"")}return t};class c{static data=null;static dataFile="box.dat";static #r=/^@(?<key>[^.]+)(?:\.(?<path>.*))?$/;static getItem(e,s=null){let a=s;if(!0===e.startsWith("@")){let{key:t,path:s}=e.match(c.#r)?.groups;e=t;let i=c.getItem(e,{});"object"!=typeof i&&(i={}),a=r.get(i,s);try{a=JSON.parse(a)}catch(e){}}else{switch(t){case"Surge":case"Loon":case"Stash":case"Egern":case"Shadowrocket":a=$persistentStore.read(e);break;case"Quantumult X":a=$prefs.valueForKey(e);break;case"Node.js":c.data=c.#i(c.dataFile),a=c.data?.[e];break;default:a=c.data?.[e]||null}try{a=JSON.parse(a)}catch(e){}}return a??s}static setItem(e=new String,s=new String){let a=!1;if("object"==typeof s)s=JSON.stringify(s);else s=String(s);if(!0===e.startsWith("@")){let{key:t,path:i}=e.match(c.#r)?.groups;e=t;let n=c.getItem(e,{});"object"!=typeof n&&(n={}),r.set(n,i,s),a=c.setItem(e,n)}else switch(t){case"Surge":case"Loon":case"Stash":case"Egern":case"Shadowrocket":a=$persistentStore.write(s,e);break;case"Quantumult X":a=$prefs.setValueForKey(s,e);break;case"Node.js":c.data=c.#i(c.dataFile),c.data[e]=s,c.#n(c.dataFile),a=!0;break;default:a=c.data?.[e]||null}return a}static removeItem(e){let s=!1;if(!0===e.startsWith("@")){let{key:t,path:a}=e.match(c.#r)?.groups;e=t;let i=c.getItem(e);"object"!=typeof i&&(i={}),keyValue=r.unset(i,a),s=c.setItem(e,i)}else switch(t){case"Surge":case"Loon":case"Stash":case"Egern":case"Shadowrocket":case"Node.js":s=!1;break;case"Quantumult X":s=$prefs.removeValueForKey(e);break;default:s=!1}return s}static clear(){let e=!1;switch(t){case"Surge":case"Loon":case"Stash":case"Egern":case"Shadowrocket":case"Node.js":e=!1;break;case"Quantumult X":e=$prefs.removeAllValues();break;default:e=!1}return e}static #i=e=>{if("Node.js"!==t)return{};{this.fs=this.fs?this.fs:require("node:fs"),this.path=this.path?this.path:require("node:path");let t=this.path.resolve(e),s=this.path.resolve(process.cwd(),e),a=this.fs.existsSync(t),r=!a&&this.fs.existsSync(s);if(!a&&!r)return{};try{return JSON.parse(this.fs.readFileSync(a?t:s))}catch(e){return{}}}};static #n=(e=this.dataFile)=>{if("Node.js"===t){this.fs=this.fs?this.fs:require("node:fs"),this.path=this.path?this.path:require("node:path");let t=this.path.resolve(e),s=this.path.resolve(process.cwd(),e),a=this.fs.existsSync(t),r=!a&&this.fs.existsSync(s),i=JSON.stringify(this.data);a?this.fs.writeFileSync(t,i):r?this.fs.writeFileSync(s,i):this.fs.writeFileSync(t,i)}}}function l(e){return/^\d+$/.test(e)&&(e=Number.parseInt(e,10)),e}let u={ADBlock:{Settings:{Splash:!0,Feed:{AD:!0,Activity:!1,Vertical:!1,BlockUpLiveList:"",Story:!0},Search:{AD:!0,HotSearch:!0},PGC:{AD:!0},Xlive:{AD:!0},Dynamic:{HotTopics:!0,MostVisited:!1,AdCard:!0},View:{AD:!0},DM:{Command:!1,Colorful:!1},Reply:{AD:!0}}},Default:{Settings:{LogLevel:"WARN"}}};var d=s("214");let f=new URL($request.url);a.info(`url: ${f.toJSON()}`);let h=f.pathname.split("/").filter(Boolean);a.info(`PATHs: ${h}`);let p=($request.headers?.["Content-Type"]??$request.headers?.["content-type"])?.split(";")?.[0];a.info(`FORMAT: ${p}`),(async()=>{let{Settings:e,Caches:t,Configs:s}=function(e,t,s){a.log("‚òëÔ∏è Set Environment Variables");let{Settings:i,Caches:n,Configs:o}=function(e,t,s){t=[t].flat(Number.POSITIVE_INFINITY);let a={Settings:s?.Default?.Settings||{},Configs:s?.Default?.Configs||{},Caches:{}};switch(t.forEach(e=>{a.Settings={...a.Settings,...s?.[e]?.Settings},a.Configs={...a.Configs,...s?.[e]?.Configs}}),typeof $argument){case"string":$argument=Object.fromEntries($argument.split("&").map(e=>e.split("=",2).map(e=>e.replace(/\"/g,""))));case"object":{let e={};Object.keys($argument).forEach(t=>r.set(e,t,$argument[t])),a.Settings={...a.Settings,...e}}}let i=c.getItem(e);return i&&t.forEach(e=>{switch(typeof i?.[e]?.Settings){case"string":i[e].Settings=JSON.parse(i[e].Settings||"{}");case"object":a.Settings={...a.Settings,...i[e].Settings}}switch(typeof i?.[e]?.Caches){case"string":i[e].Caches=JSON.parse(i[e].Caches||"{}");case"object":a.Caches={...a.Caches,...i[e].Caches}}}),function e(t,s){for(let a in t){let r=t[a];t[a]="object"==typeof r&&null!==r?e(r,s):s(a,r)}return t}(a.Settings,(e,t)=>("true"===t||"false"===t?t=JSON.parse(t):"string"==typeof t&&(t=t.includes(",")?t.split(",").map(e=>l(e)):l(t)),t)),a}(e,t,s);return a.info(`typeof Settings: ${typeof i}`,`Settings: ${JSON.stringify(i,null,2)}`),a.log("‚úÖ Set Environment Variables"),{Settings:i,Caches:n,Configs:o}}("BiliBili","ADBlock",u);switch(a.logLevel=e.LogLevel,$request.method){case"POST":case"PUT":case"PATCH":case"DELETE":case"GET":case"HEAD":case"OPTIONS":default:switch(f.hostname){case"www.bilibili.com":case"search.bilibili.com":break;case"app.bilibili.com":case"app.biliapi.net":switch(f.pathname){case"/x/v2/splash/show":case"/x/v2/splash/list":case"/x/v2/splash/brand/list":case"/x/v2/splash/event/list2":case"/x/v2/feed/index/story":case"/x/v2/search/square":case"/x/v2/search":case"/x/v2/search/type":break;case"/x/v2/feed/index":switch(e?.Feed?.Activity){case!0:default:if(f.searchParams.has("banner_hash")&&"0"!==f.searchParams.get("login_event")){f.searchParams.delete("sign"),f.searchParams.set("open_event",""),f.searchParams.set("pull",0),t.banner_hash&&(f.searchParams.set("banner_hash",t.banner_hash),a.log("‚úÖ ËØªÂèñhashÁºìÂ≠òÊàêÂäü"));let e=d(`${f.search.substring(1)}c2ed53a74eeefe3cf99fbd01d8c9c375`).toString();f.searchParams.set("sign",e)}break;case!1:a.warn("Áî®Êà∑ËÆæÁΩÆÊé®ËçêÈ°µÊ¥ªÂä®Â§ßÂõæ‰∏çÂéªÈô§")}}break;case"api.bilibili.com":case"api.biliapi.net":f.pathname;break;case"api.live.bilibili.com":f.pathname}case"CONNECT":case"TRACE":}$request.url=f.toString(),a.debug(`$request.url: ${$request.url}`)})().catch(e=>a.error(e)).finally(()=>{switch(typeof e){case"object":if(e.headers?.["Content-Encoding"]&&(e.headers["Content-Encoding"]="identity"),e.headers?.["content-encoding"]&&(e.headers["content-encoding"]="identity"),"Quantumult X"===t)!e.status&&(e.status="HTTP/1.1 200 OK"),delete e.headers?.["Content-Length"],delete e.headers?.["content-length"],delete e.headers?.["Transfer-Encoding"],n(e);else n({response:e});break;case"undefined":n($request);break;default:a.error(`‰∏çÂêàÊ≥ïÁöÑ $response Á±ªÂûã: ${typeof e}`)}})})()})();